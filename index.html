<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RecycLearner</title>
    <link rel="icon" type="image/png" href="assets/logo.png">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --primary-blue: #007bff;
            --secondary-blue: #0056b3;
            --primary-green: #28a745;
            --secondary-green: #1e7e34;
            --light-green: #e6f7ea;
            --light-blue: #e0f3ff;
            --accent-yellow: #ffc107;
            --accent-orange: #fd7e14;
            --background-start: #f0f9ff;
            --background-mid: #e6fff0;
            --background-end: #fffde7;
            --card-background: rgba(255, 255, 255, 0.92);
            --header-background: rgba(255, 255, 255, 0.88);
            --text-dark: #1a202c;
            --text-medium: #4a5568;
            --text-light: #718096;
            --border-radius-xl: 40px;
            --border-radius-lg: 30px;
            --border-radius-md: 20px;
            --border-radius-sm: 12px;
            --shadow-light: 0 4px 15px rgba(0, 0, 0, 0.06);
            --shadow-medium: 0 8px 25px rgba(0, 0, 0, 0.1);
            --shadow-strong: 0 12px 35px rgba(0, 0, 0, 0.12);
            --transition-speed: 0.35s;
        }

        /* --- Base Styles --- */
        body {
            margin: 0;
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(135deg, var(--background-start), var(--background-mid), var(--background-end));
            background-attachment: fixed;
            background-size: 400% 400%;
            animation: bgAnimation 30s ease infinite;
            color: var(--text-dark);
            overflow-x: hidden;
            line-height: 1.6;
        }

        @keyframes bgAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .lead {
            font-size: 1.15rem;
            font-weight: 400;
            color: var(--text-medium);
        }

        .view { display: none; animation: fadeIn 0.5s ease-in-out; }
        .view.active { display: block; }


        /* --- Header --- */
        header {
            background-color: var(--header-background);
            padding: 1rem 1.5rem; /* Adjusted padding */
            backdrop-filter: blur(15px) saturate(180%);
            -webkit-backdrop-filter: blur(15px) saturate(180%);
            border-bottom: 1px solid rgba(0, 0, 0, 0.07);
            position: sticky;
            top: 0;
            z-index: 1030;
            box-shadow: var(--shadow-medium);
            display: flex;
            align-items: center;
            justify-content: space-between; /* For logo and auth section */
        }

        .header-main-content {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            animation: fadeInDown var(--transition-speed) ease-out;
        }
         .header-logo-tagline {
            display: flex; /* Default for larger screens */
            align-items: center;
            gap: 0.8rem;
        }

        header .logo-img {
            height: 50px; /* Slightly smaller */
            width: 50px;
            object-fit: contain;
            border-radius: var(--border-radius-sm);
        }

        header .logo-title {
            font-size: clamp(1.7rem, 4vw, 2.4rem);
            font-weight: 800;
            margin: 0;
            letter-spacing: -0.5px;
        }

        header .logo-title .recyc { color: var(--primary-blue); }
        header .logo-title .learner { color: var(--primary-green); }

        header .tagline {
            font-size: clamp(0.8rem, 2vw, 1rem);
            color: var(--text-medium);
            margin-top: 0.2rem; /* Adjusted */
            animation: fadeInUp var(--transition-speed) ease-out 0.2s backwards;
            display: none; /* Hidden by default, shown on larger screens */
        }
        @media (min-width: 768px) {
            header .tagline { display: block; margin-left: 10px;}
             .header-logo-tagline { flex-direction: row; align-items: center; }
        }
         @media (max-width: 767.98px) { /* For smaller screens */
            .header-logo-tagline {
                flex-direction: column; /* Stack logo and title/tagline */
                align-items: flex-start; /* Align items to the start */
                gap: 0.2rem; /* Reduce gap */
            }
            header .logo-title { font-size: 1.5rem; }
            header .tagline { font-size: 0.75rem; margin-top: 0; }
            header { padding: 0.75rem 1rem; }
        }


        /* User Auth Section in Header */
        #user-auth-section {
            position: relative;
        }
        #user-auth-section .btn-sign-in {
            background-color: var(--primary-blue);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 0.9rem;
            transition: background-color var(--transition-speed);
        }
        #user-auth-section .btn-sign-in:hover { background-color: var(--secondary-blue); }

        #user-auth-section .profile-dropdown img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid var(--primary-green);
            padding: 2px;
        }
        #user-auth-section .dropdown-menu {
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-medium);
            border: 1px solid rgba(0,0,0,0.08);
        }
        #user-auth-section .dropdown-item {
            font-weight: 500;
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
        }
        #user-auth-section .dropdown-item i { margin-right: 8px; color: var(--text-medium); }
        #user-auth-section .dropdown-item:hover { background-color: var(--light-blue); color: var(--primary-blue); }


        /* --- Navigation --- */
        .main-nav-wrapper {
            display: flex;
            justify-content: center;
            padding: 0.8rem 0;
            margin-bottom: 1.8rem;
        }

        .nav-pills {
            background-color: rgba(255, 255, 255, 0.75);
            padding: 0.6rem;
            border-radius: var(--border-radius-xl);
            display: inline-flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            box-shadow: var(--shadow-light);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .nav-pills::-webkit-scrollbar { display: none; }

        .nav-pills .nav-item { margin: 0 3px; flex-shrink: 0; }

        .nav-pills .nav-link {
            border-radius: var(--border-radius-lg);
            color: var(--text-dark);
            font-weight: 600;
            font-size: 0.9rem;
            padding: 0.7rem 1.4rem;
            transition: all var(--transition-speed) cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 2px solid transparent;
            white-space: nowrap;
        }
        .nav-pills .nav-link i { margin-right: 7px; font-size: 0.9em; }

        .nav-pills .nav-link:hover, .nav-pills .nav-link:focus {
            background-color: rgba(0, 0, 0, 0.05);
            transform: translateY(-2px);
            color: var(--primary-blue);
            border-color: var(--light-blue);
        }

        .nav-pills .nav-link.active {
            background: linear-gradient(60deg, var(--primary-blue), var(--primary-green));
            color: white;
            box-shadow: 0 6px 15px rgba(0, 100, 200, 0.2);
            transform: translateY(-2px) scale(1.03);
            border-color: transparent;
        }
        .nav-pills .nav-link.active:hover {
             box-shadow: 0 8px 20px rgba(0, 100, 200, 0.3);
        }

        /* --- Mobile Navigation (Offcanvas) --- */
        .mobile-nav-toggle {
            display: none; /* Initially hidden, shown via media query */
            font-size: 1.7rem;
            color: var(--primary-blue);
            background: var(--card-background);
            border: 1px solid rgba(0,0,0,0.1);
            padding: 0.4rem 0.7rem;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-medium);
            /* position: fixed; top: 18px; right: 18px; z-index: 1031; */ /* Removed fixed positioning to place in header */
            transition: transform var(--transition-speed) ease;
        }
        .mobile-nav-toggle:hover { transform: scale(1.1); }

        .offcanvas-header {
            border-bottom: 1px solid #e0e0e0;
            background-color: var(--light-blue);
            padding: 1rem 1.25rem;
        }
        .offcanvas-title { color: var(--primary-blue); font-weight: 700; font-size: 1.2rem; }
        .offcanvas-body .nav-link {
            display: flex;
            align-items: center;
            padding: 0.9rem 1.25rem;
            margin-bottom: 0.4rem;
            border-radius: var(--border-radius-md);
            color: var(--text-dark);
            font-weight: 600;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }
        .offcanvas-body .nav-link i { margin-right: 12px; font-size: 1.1em; width: 20px; text-align: center;}
        .offcanvas-body .nav-link:hover { background-color: var(--light-green); color: var(--primary-green); }
        .offcanvas-body .nav-link.active { background-color: var(--primary-green); color: white; }

        /* --- Tab Content --- */
        .tab-content-wrapper { padding: 0 0.8rem; }
        .tab-content {
            background-color: var(--card-background);
            padding: clamp(1.2rem, 3.5vw, 2.8rem);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-strong);
            min-height: 480px;
            backdrop-filter: blur(12px) saturate(160%);
            -webkit-backdrop-filter: blur(12px) saturate(160%);
            border: 1px solid rgba(255,255,255,0.25);
        }

        .tab-content h2, .auth-view h2, .profile-view h2 {
            color: var(--primary-green);
            font-weight: 700;
            font-size: clamp(1.7rem, 3.8vw, 2.1rem);
            margin-bottom: 1.8rem;
            border-bottom: 3px solid var(--primary-blue);
            padding-bottom: 0.6rem;
            display: inline-block;
            animation: slideInFromLeft 0.7s ease-out;
        }

        .tab-pane { animation: fadeIn 0.6s ease-in-out; }

        .tab-pane p, .tab-pane ul {
            font-size: clamp(0.9rem, 2vw, 1rem);
            line-height: 1.75;
            color: var(--text-medium);
            margin-bottom: 1.1rem;
        }
        .tab-pane ul { list-style-type: none; padding-left: 0.5rem; }
        .tab-pane ul li {
            padding-left: 2em;
            position: relative;
            margin-bottom: 0.7em;
        }
        .tab-pane ul li::before {
            content: "\f058";
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            color: var(--primary-green);
            position: absolute;
            left: 0;
            top: 4px;
            font-size: 1.1em;
        }
        .tab-pane strong { color: var(--text-dark); font-weight: 600; }

        /* --- Subscription Plans --- */
        .subscription-plan {
            border: 1px solid #d8dde2;
            border-radius: var(--border-radius-md);
            padding: 2.2rem 1.3rem;
            text-align: center;
            background-color: #ffffff;
            box-shadow: var(--shadow-medium);
            margin-bottom: 1.8rem;
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        .subscription-plan::before {
            content: '';
            position: absolute;
            top: -60px;
            left: -60px;
            width: 120px;
            height: 120px;
            background: linear-gradient(45deg, var(--light-blue), var(--light-green));
            border-radius: 50%;
            opacity: 0.15;
            transition: transform 0.6s ease, opacity 0.6s ease;
            z-index: 0;
        }

        .subscription-plan:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-strong);
        }
        .subscription-plan:hover::before { transform: scale(1.8); opacity: 0.25; }

        .subscription-plan > * { position: relative; z-index: 1; }

        .subscription-plan .plan-icon {
            font-size: 2.8rem;
            margin-bottom: 0.8rem;
            color: var(--primary-blue);
            transition: color var(--transition-speed) ease, transform var(--transition-speed) ease;
        }
        .subscription-plan:hover .plan-icon { color: var(--primary-green); transform: rotateY(15deg); }

        .subscription-plan h3 {
            color: var(--primary-blue);
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 0.8rem;
        }

        .subscription-plan .plan-price {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-dark);
            margin: 1.3rem 0;
        }
        .subscription-plan .plan-price small { font-size: 0.9rem; color: var(--text-light); font-weight: 400;}

        .subscription-plan .plan-features {
            list-style: none;
            padding: 0;
            margin: 0.8rem 0 1.3rem;
            text-align: left;
            flex-grow: 1;
            font-size: 0.9rem;
        }
        .subscription-plan .plan-features li {
            margin-bottom: 0.5rem;
            color: var(--text-medium);
            padding-left: 1.6em;
            position: relative; /* Added for ::before positioning */
        }
        .subscription-plan .plan-features li::before {
            content: "\f00c";
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            color: var(--primary-green);
            position: absolute;
            left: 0;
            top: 4px;
            font-size: 0.9em;
        }

        .subscription-plan .badge.popular-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background-color: var(--accent-yellow) !important;
            color: var(--text-dark);
            font-weight: 700;
            padding: 0.4em 0.7em;
            border-radius: var(--border-radius-sm);
            font-size: 0.75rem;
            letter-spacing: 0.5px;
        }
        .subscription-plan.popular-plan {
            border: 2.5px solid var(--primary-blue);
            transform: scale(1.04);
        }
         .subscription-plan.popular-plan:hover {
             transform: translateY(-10px) scale(1.07);
         }

        /* --- Buttons --- */
        .btn-custom,
        .subscription-plan .btn-select-plan,
        #payment-form button[type="submit"],
        #waste-form button[type="submit"],
        .auth-view button[type="submit"],
        .profile-view button[type="submit"],
        .modal-footer .btn {
            background: linear-gradient(60deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: var(--border-radius-lg);
            transition: all var(--transition-speed) ease;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 123, 255, 0.22);
            text-transform: uppercase;
            letter-spacing: 0.7px;
            margin-top: 0.8rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        .btn-custom i, .subscription-plan .btn-select-plan i,
        .auth-view button[type="submit"] i, .profile-view button[type="submit"] i { margin-right: 8px; font-size: 0.95em; }

        .btn-custom:hover,
        .subscription-plan .btn-select-plan:hover,
        #payment-form button[type="submit"]:hover,
        #waste-form button[type="submit"]:hover,
        .auth-view button[type="submit"]:hover,
        .profile-view button[type="submit"]:hover,
        .modal-footer .btn-primary:hover {
            background: linear-gradient(60deg, var(--secondary-blue), var(--primary-blue));
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 8px 20px rgba(0, 123, 255, 0.3);
        }
        .btn-custom:disabled, #waste-form button[type="submit"]:disabled,
        .auth-view button[type="submit"]:disabled, .profile-view button[type="submit"]:disabled {
            background: #adb5bd;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }


        .subscription-plan .btn-contact {
            background: linear-gradient(60deg, var(--primary-green), var(--secondary-green));
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.22);
        }
        .subscription-plan .btn-contact:hover {
            background: linear-gradient(60deg, var(--secondary-green), var(--primary-green));
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
        }
         .btn-google {
            background-color: #DB4437 !important; /* Google Red */
            color: white !important;
            border: none;
        }
        .btn-google:hover {
            background-color: #C33D2E !important;
            box-shadow: 0 6px 18px rgba(219, 68, 55, 0.3);
        }


        /* --- Forms --- */
        .form-control, .form-select {
            border-radius: var(--border-radius-sm);
            padding: 0.85rem 1.2rem;
            border: 1px solid #ced4da;
            transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            font-size: 0.95rem;
            background-clip: padding-box;
        }
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.15);
        }
        textarea.form-control { min-height: 100px; }

        .form-label {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.4rem;
            font-size: 0.9rem;
        }
        .form-text { color: var(--text-light); font-size: 0.8rem; }
        .form-check-label { font-size: 0.9rem; color: var(--text-medium); }
        .form-check-input {
            width: 1.1em; height: 1.1em;
            margin-top: 0.25em;
        }
        .form-check-input:checked {
            background-color: var(--primary-green);
            border-color: var(--primary-green);
        }
        .form-check-input:focus {
            box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.2);
        }

        /* --- Waste Form Specific --- */
        #waste-form .or-divider {
            display: flex;
            align-items: center;
            text-align: center;
            color: var(--text-light);
            margin: 1.3rem 0;
            font-weight: 600;
            font-size: 0.9rem;
        }
        #waste-form .or-divider::before,
        #waste-form .or-divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid #d0d0d0;
        }
        #waste-form .or-divider:not(:empty)::before { margin-right: .7em; }
        #waste-form .or-divider:not(:empty)::after { margin-left: .7em; }

        #waste-image-preview-container {
            margin-top: 1rem;
            text-align: center;
        }
        #waste-image-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: var(--border-radius-sm);
            border: 2px dashed var(--light-blue);
            padding: 5px;
            object-fit: contain;
            display: none;
        }


        /* --- Authentication & Profile Views --- */
        .auth-view, .profile-view {
            max-width: 550px;
            margin: 2rem auto;
            padding: clamp(1.5rem, 4vw, 3rem);
            background-color: var(--card-background);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-strong);
            backdrop-filter: blur(12px) saturate(160%);
            -webkit-backdrop-filter: blur(12px) saturate(160%);
            border: 1px solid rgba(255,255,255,0.25);
        }
        .auth-view .form-control, .profile-view .form-control {
             padding: 0.9rem 1.2rem; /* Larger padding for auth forms */
             font-size: 1rem;
        }
        .auth-view .btn-link-custom {
            color: var(--primary-blue);
            text-decoration: none;
            font-weight: 600;
            transition: color var(--transition-speed);
        }
        .auth-view .btn-link-custom:hover { color: var(--secondary-blue); text-decoration: underline;}
        .auth-view .divider-text {
            display: flex;
            align-items: center;
            text-align: center;
            color: var(--text-light);
            margin: 1.5rem 0;
            font-weight: 500;
        }
        .auth-view .divider-text::before, .auth-view .divider-text::after {
            content: ''; flex: 1; border-bottom: 1px solid #d0d0d0;
        }
        .auth-view .divider-text:not(:empty)::before { margin-right: .7em; }
        .auth-view .divider-text:not(:empty)::after { margin-left: .7em; }

        .profile-view .profile-picture-wrapper {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .profile-view .profile-picture {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary-green);
            box-shadow: var(--shadow-light);
            margin-bottom: 0.5rem;
        }
        .profile-view .form-label { font-size: 0.95rem; }


        /* --- Footer --- */
        footer {
            text-align: center;
            padding: 2.5rem 1rem;
            margin-top: 3.5rem;
            background-color: rgba(0,0,0,0.03);
            border-top: 1px solid rgba(0,0,0,0.06);
        }
        footer p {
            margin-bottom: 0.4rem;
            color: var(--text-medium);
            font-size: 0.9rem;
        }
        footer .social-icons a {
            color: var(--text-light);
            font-size: 1.4rem;
            margin: 0 0.6rem;
            transition: color var(--transition-speed) ease, transform var(--transition-speed) ease;
        }
        footer .social-icons a:hover {
            color: var(--primary-blue);
            transform: translateY(-3px) scale(1.15);
        }

        /* --- Animations --- */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideInFromLeft { from { opacity: 0; transform: translateX(-25px); } to { opacity: 1; transform: translateX(0); } }

        .scroll-animate {
            opacity: 0;
            transform: translateY(35px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }
        .scroll-animate.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Custom Modal --- */
        .modal-content {
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-strong);
            border: none;
        }
        .modal-header {
            background: linear-gradient(60deg, var(--primary-blue), var(--primary-green));
            color: white;
            border-top-left-radius: var(--border-radius-md);
            border-top-right-radius: var(--border-radius-md);
            border-bottom: none;
            padding: 1rem 1.3rem;
        }
        .modal-header .btn-close { filter: brightness(0) invert(1); opacity: 0.8; }
        .modal-header .btn-close:hover { opacity: 1; }
        .modal-title { font-weight: 700; font-size: 1.25rem; }
        .modal-body { padding: 1.3rem 1.8rem; font-size: 1rem; line-height: 1.65;}
        .modal-body h5 {
            font-size: 1.1rem;
            color: var(--primary-blue);
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }
        .modal-body ul {
            padding-left: 20px;
            list-style-type: disc;
        }
         .modal-body ul li { padding-left: 0; margin-bottom: 0.3em; }
         .modal-body ul li::before { display: none; }


        .modal-footer { border-top: 1px solid #e9ecef; padding: 0.8rem 1.3rem;}
        .modal-footer .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
            padding: 0.6rem 1.5rem;
        }
         .modal-footer .btn-secondary:hover {
            background-color: #5a6268;
            border-color: #545b62;
         }

        /* --- Spinner for AI processing --- */
        .spinner-container {
            display: none;
            text-align: center;
            margin-top: 1.3rem;
            padding: 1rem;
            background-color: var(--light-blue);
            border-radius: var(--border-radius-sm);
        }
        .spinner-border {
            width: 2.5rem;
            height: 2.5rem;
            color: var(--primary-green);
            border-width: .3em;
        }
        .spinner-container p {
            margin-top: 0.6rem;
            color: var(--text-medium);
            font-style: italic;
            font-weight: 600;
            font-size: 0.95rem;
        }

        /* --- Responsive Adjustments --- */
        @media (max-width: 991.98px) { /* Tablets */
            .tab-content h2, .auth-view h2, .profile-view h2 { font-size: 1.7rem; }
            .subscription-plan { margin-bottom: 1.3rem; }
            .main-nav-wrapper { /* Keep main nav on tablet */
                display: flex;
            }
             .mobile-nav-toggle { display: none; } /* Hide hamburger on tablet if main nav shown */
        }

        @media (max-width: 767.98px) { /* Landscape phones */
             header .logo-img { height: 40px; width: 40px; }
            /* header .header-main-content { flex-direction: column; align-items: flex-start; gap: 0.4rem;} */
            /* .tagline { margin-top: 0.1rem; } */

            .main-nav-wrapper { display: none; } /* Hide full nav on small screens */
            .mobile-nav-toggle { display: block; } /* Show hamburger */
             #user-auth-section .btn-sign-in { font-size: 0.8rem; padding: 0.4rem 0.8rem; }
             #user-auth-section .profile-dropdown img { width: 36px; height: 36px;}


            .tab-content, .auth-view, .profile-view { padding: 1.3rem; }
            .tab-content h2, .auth-view h2, .profile-view h2 { font-size: 1.5rem; margin-bottom: 1.3rem; }

            .subscription-plan { padding: 1.8rem 1rem; }
            .subscription-plan h3 { font-size: 1.3rem; }
            .subscription-plan .plan-price { font-size: 1.7rem; }
            .subscription-plan.popular-plan { transform: scale(1); }
            .subscription-plan.popular-plan:hover { transform: translateY(-7px) scale(1.02); }

            #payment-form .row .col-md-6 { margin-bottom: 0.8rem; }
            #payment-form .row .col-md-6:last-child { margin-bottom: 0; }

            footer { padding: 1.8rem 0.8rem; }
        }

        @media (max-width: 575.98px) { /* Portrait phones */
            header { padding: 0.6rem 0.75rem; }
            header .logo-img { height: 32px; width: 32px; }
            header .logo-title { font-size: 1.3rem; }

            .tab-content, .auth-view, .profile-view { padding: 0.9rem; }
            .tab-content h2, .auth-view h2, .profile-view h2 { font-size: 1.3rem; }
            .tab-pane p, .tab-pane ul { font-size: 0.85rem; }

            .btn-custom,
            .subscription-plan .btn-select-plan,
            #payment-form button[type="submit"],
            #waste-form button[type="submit"],
            .auth-view button[type="submit"],
            .profile-view button[type="submit"] {
                padding: 0.7rem 1.3rem;
                font-size: 0.85rem;
            }
            .mobile-nav-toggle { font-size: 1.5rem; } /* top: 15px; right: 15px; */
            .offcanvas-title { font-size: 1.1rem; }
            .offcanvas-body .nav-link { padding: 0.8rem 1rem; }
             #user-auth-section .btn-sign-in { font-size: 0.75rem; padding: 0.3rem 0.6rem; }
             #user-auth-section .profile-dropdown img { width: 32px; height: 32px;}
        }
    </style>
</head>

<body>
    <header>
        <div class="header-main-content">
             <button class="mobile-nav-toggle" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileNav" aria-controls="mobileNav" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <div class="header-logo-tagline">
                <img src="assets/logo.png" alt="RecycLearner Logo" class="logo-img">
                <div>
                    <h1 class="logo-title">
                        <span class="recyc">Recyc</span><span class="learner">Learner</span>
                    </h1>
                    <p class="tagline">AI-Powered Guidance for a Greener Tomorrow.</p>
                </div>
            </div>
        </div>
        <div id="user-auth-section">
            </div>
    </header>


    <div id="main-nav-wrapper-container"> <div class="main-nav-wrapper">
            <ul class="nav nav-pills" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button" role="tab" aria-controls="about" aria-selected="true"><i class="fas fa-info-circle"></i>About Us</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="commitment-tab" data-bs-toggle="tab" data-bs-target="#commitment" type="button" role="tab" aria-controls="commitment" aria-selected="false"><i class="fas fa-seedling"></i>Our Mission</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="how-it-works-tab" data-bs-toggle="tab" data-bs-target="#how-it-works" type="button" role="tab" aria-controls="how-it-works" aria-selected="false"><i class="fas fa-lightbulb"></i>How It Works</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="submit-waste-tab" data-bs-toggle="tab" data-bs-target="#submit-waste" type="button" role="tab" aria-controls="submit-waste" aria-selected="false"><i class="fas fa-microchip"></i>AI Recycle Helper</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="subscription-plans-tab" data-bs-toggle="tab" data-bs-target="#subscription-plans" type="button" role="tab" aria-controls="subscription-plans" aria-selected="false"><i class="fas fa-star"></i>Our Plans</button>
                </li>
                <li class="nav-item" role="presentation" style="display: none;" id="payment-tab-li">
                     <button class="nav-link" id="payment-tab" data-bs-toggle="tab" data-bs-target="#payment" type="button" role="tab" aria-controls="payment" aria-selected="false"><i class="fas fa-credit-card"></i>Checkout</button>
                </li>
            </ul>
        </div>
    </div>

    <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileNav" aria-labelledby="mobileNavLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="mobileNavLabel"><img src="assets/logo.png" alt="RecycLearner" style="height: 24px; margin-right: 8px; vertical-align: middle;"><span class="recyc">Recyc</span><span class="learner">Learner</span></h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="nav flex-column">
                <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#about" data-bs-dismiss="offcanvas"><i class="fas fa-info-circle"></i>About Us</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#commitment" data-bs-dismiss="offcanvas"><i class="fas fa-seedling"></i>Our Mission</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#how-it-works" data-bs-dismiss="offcanvas"><i class="fas fa-lightbulb"></i>How It Works</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#submit-waste" data-bs-dismiss="offcanvas"><i class="fas fa-microchip"></i>AI Recycle Helper</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#subscription-plans" data-bs-dismiss="offcanvas"><i class="fas fa-star"></i>Our Plans</button></li>
            </ul>
        </div>
    </div>

    <div class="container mt-3">

        <div id="main-content-tabs-view" class="view active tab-content-wrapper">
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="about-tab">
                    <h2>Welcome to RecycLearner: Your AI Recycling Companion</h2>
                    <p class="lead">At RecycLearner, we're transforming the complex world of waste management into a simple, engaging, and impactful experience. Our intelligent platform uses the power of Artificial Intelligence to provide you with clear, actionable guidance on recycling and upcycling. We believe that sustainable living should be accessible to everyone, empowering individuals and businesses alike to make a real difference for our planet.</p>
                    <p>Consider 'waste' not as an endpoint, but as a resource waiting to be rediscovered. RecycLearner is designed to help you unlock this potential. Whether you're unsure how to recycle a specific item, looking for creative ways to give old materials new life, or aiming to reduce your overall environmental footprint, our AI is here to assist. Join our community of eco-conscious innovators and let's build a more sustainable future, one recycled item at a time.</p>
                </div>

                <div class="tab-pane fade" id="commitment" role="tabpanel" aria-labelledby="commitment-tab">
                    <h2>Our Mission: A Greener Planet Through Smart Technology</h2>
                    <p>RecycLearner is driven by a profound commitment to environmental sustainability. We aim to be a catalyst for positive change by equipping our users with the knowledge and tools needed for responsible and innovative waste management. Our core pillars are:</p>
                    <ul>
                        <li><strong>Empowering Action:</strong> Delivering precise, AI-driven recycling and upcycling instructions to significantly reduce landfill waste and promote resource conservation.</li>
                        <li><strong>Pioneering Eco-Innovation:</strong> Continuously enhancing our AI algorithms and platform features to offer the most advanced and user-friendly sustainability solutions.</li>
                        <li><strong>Fostering Eco-Literacy:</strong> Educating users about the principles of a circular economy, the lifecycle of materials, and the collective impact of individual sustainable choices.</li>
                        <li><strong>Cultivating a Global Movement:</strong> Uniting individuals, communities, and organizations in a shared mission to protect and preserve our environment for future generations.</li>
                    </ul>
                    <p>We firmly believe that technology, when guided by purpose, can solve some of our world's most pressing challenges. Your engagement with RecycLearner contributes directly to a healthier planet and a more sustainable way of life.</p>
                </div>

                <div class="tab-pane fade" id="how-it-works" role="tabpanel" aria-labelledby="how-it-works-tab">
                    <h2>Unlock Recycling Wisdom in 3 Simple Steps</h2>
                    <p>RecycLearner streamlines your path to sustainable waste management with an intuitive, AI-driven process. Discover how to transform your waste into a valuable resource effortlessly:</p>
                    <div class="row g-4 mt-3 align-items-stretch">
                        <div class="col-md-4 d-flex scroll-animate">
                            <div class="text-center p-3 border rounded-3 shadow-sm bg-white h-100">
                                <i class="fas fa-camera-retro fa-3x text-primary-blue mb-3"></i>
                                <h4>1. Submit Your Item</h4>
                                <p>Easily upload a clear photograph of the waste item or provide a detailed text description. The more information you give, the smarter our AI can be!</p>
                            </div>
                        </div>
                        <div class="col-md-4 d-flex scroll-animate" style="transition-delay: 0.15s;">
                            <div class="text-center p-3 border rounded-3 shadow-sm bg-white h-100">
                                <i class="fas fa-robot fa-3x text-primary-green mb-3"></i>
                                <h4>2. AI Magic Happens</h4>
                                <p>Our sophisticated Gemini-powered AI instantly processes your submission, identifying materials, assessing recyclability, and uncovering creative upcycling potential.</p>
                            </div>
                        </div>
                        <div class="col-md-4 d-flex scroll-animate" style="transition-delay: 0.3s;">
                             <div class="text-center p-3 border rounded-3 shadow-sm bg-white h-100">
                                <i class="fas fa-directions fa-3x text-accent-orange mb-3"></i>
                                <h4>3. Get Clear Guidance</h4>
                                <p>Receive personalized, easy-to-understand instructions for correct recycling, innovative upcycling projects, and safe disposal methods for any tricky items.</p>
                            </div>
                        </div>
                    </div>
                    <p class="mt-4">From everyday packaging like plastics and paper to more complex items such as electronics and textiles, RecycLearner is your dedicated AI partner for making informed, eco-friendly choices with confidence. <strong>Try it once for free in the "AI Recycle Helper" tab!</strong></p>
                </div>

                <div class="tab-pane fade" id="submit-waste" role="tabpanel" aria-labelledby="submit-waste-tab">
                    <h2><i class="fas fa-microchip text-primary-blue me-2"></i>AI Recycle Helper: Get Instant Advice!</h2>
                    <p>Unsure how to handle a specific waste item? Let our Gemini-powered AI analyze it for you. Provide an image or describe the item, and we'll give you tailored recycling and upcycling suggestions. <strong>Every user gets one free analysis!</strong></p>
                    <div id="ai-trial-message" class="alert alert-info mt-3" style="display: none;"></div>
                    <form id="waste-form" class="mt-4">
                        <div class="mb-3">
                            <label for="waste-image" class="form-label"><i class="fas fa-image me-2"></i>Upload an Image (Optional, but helps!)</label>
                            <input type="file" class="form-control" id="waste-image" name="waste-image" accept="image/jpeg, image/png, image/webp">
                             <div class="form-text">Clear, well-lit photos of a single item work best. Max file size: 4MB.</div>
                             <div id="waste-image-preview-container">
                                 <img id="waste-image-preview" src="#" alt="Image Preview" />
                             </div>
                        </div>
                        <div class="or-divider my-3">OR / AND</div>
                        <div class="mb-3">
                            <label for="waste-description" class="form-label"><i class="fas fa-pencil-alt me-2"></i>Describe Your Waste Material (Required if no image)</label>
                            <textarea class="form-control" id="waste-description" name="waste-description" rows="4"
                                placeholder="e.g., Empty plastic milk jug (HDPE #2), old smartphone (brand/model), stained cotton t-shirt, mixed paper scraps, aluminum can, glass jar with lid. Be as specific as possible!"></textarea>
                        </div>
                        <div class="text-center mt-4">
                            <button type="submit" class="btn-custom btn-lg" id="get-insights-button"><i class="fas fa-lightbulb me-2"></i>✨ Get AI Recycling Insights</button>
                        </div>
                    </form>
                    <div class="spinner-container mt-4" id="loading-spinner">
                        <div class="d-flex align-items-center justify-content-center">
                            <div class="spinner-border me-3" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mb-0">Our AI is thinking... Please wait a moment for your personalized recycling plan!</p>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="subscription-plans" role="tabpanel" aria-labelledby="subscription-plans-tab">
                    <h2>Supercharge Your Sustainability: Choose Your Plan</h2>
                    <p class="text-center mb-5 lead">Elevate your eco-impact with features designed for every level of commitment. All paid plans include a <strong>no-obligation 7-day free trial!</strong> After your first free AI analysis, a plan is needed for more.</p>
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4 d-flex align-items-stretch scroll-animate">
                            <div class="subscription-plan">
                                <div>
                                    <i class="fas fa-seedling plan-icon"></i>
                                    <h3>Starter Spark</h3>
                                    <p class="text-muted small">Ideal for individuals exploring sustainable habits.</p>
                                    <ul class="plan-features">
                                        <li>Standard AI Waste Analysis (10/month after trial)</li>
                                        <li>Core Recycling Guides</li>
                                        <li>Basic Impact Tracking</li>
                                        <li>Community Forum Access</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="plan-price">$9.99<small>/year</small></p>
                                    <button class="btn-select-plan w-100" onclick="showPaymentPage('Starter Spark Plan', '$9.99/year', 'Begin your journey with essential AI recycling tools and community support.')"><i class="fas fa-check-circle"></i> Start Trial</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 mb-4 d-flex align-items-stretch scroll-animate" style="transition-delay: 0.15s;">
                            <div class="subscription-plan popular-plan">
                                 <span class="badge popular-badge"><i class="fas fa-fire me-1"></i>Most Popular</span>
                                <div>
                                    <i class="fas fa-rocket plan-icon"></i>
                                    <h3>Eco Pro</h3>
                                    <p class="text-muted small">For dedicated recyclers & eco-conscious households.</p>
                                    <ul class="plan-features">
                                        <li>Advanced AI Waste Analysis (Unlimited)</li>
                                        <li>✨ Exclusive Upcycling Project Library</li>
                                        <li>Detailed Impact Reporting</li>
                                        <li>Priority Email & Chat Support</li>
                                        <li>Early Access to New AI Features</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="plan-price">$19.99<small>/year</small></p>
                                    <button class="btn-select-plan w-100" onclick="showPaymentPage('Eco Pro Plan', '$19.99/year', 'Unlock unlimited AI analysis, exclusive upcycling projects, and premium support.')"><i class="fas fa-star"></i> Start Trial</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 mb-4 d-flex align-items-stretch scroll-animate" style="transition-delay: 0.3s;">
                            <div class="subscription-plan">
                                <div>
                                    <i class="fas fa-globe-americas plan-icon"></i>
                                    <h3>Green Business</h3>
                                    <p class="text-muted small">Custom solutions for organizations committed to sustainability.</p>
                                     <ul class="plan-features">
                                        <li>Tailored AI Model Integration</li>
                                        <li>Bulk Waste Auditing Tools</li>
                                        <li>Comprehensive Sustainability Dashboards</li>
                                        <li>Dedicated Account Management</li>
                                        <li>Team Collaboration Features</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="plan-price">Custom Pricing</p>
                                    <button class="btn-select-plan btn-contact w-100" onclick="showInfoModal('Green Business Plan Inquiry', 'We\'re excited to help your business achieve its sustainability targets! Please reach out to our enterprise team at <a href=\'mailto:biz@recyclearner.com\'>biz@recyclearner.com</a> or call us at (555) ECO-SMART for a personalized consultation and quote.')"><i class="fas fa-handshake"></i> Contact Sales</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="payment" role="tabpanel" aria-labelledby="payment-tab">
                    <h2>Secure Checkout: <span id="selected-plan-name-title" class="text-primary-blue">Your Plan</span></h2>
                    <p id="selected-plan-description" class="text-muted mb-3">You're just a step away from unlocking powerful recycling tools!</p>
                    <form id="payment-form">
                        <input type="hidden" id="selected-plan-value" name="selected-plan-value">
                        <div class="alert alert-success d-flex align-items-center shadow-sm" role="alert">
                            <i class="fas fa-shield-alt fa-2x me-3 text-success"></i>
                            <div>
                                <strong>Start Your 7-Day Free Trial!</strong> You will not be charged today.
                                Your selected plan: <strong id="selected-plan-price-info" class="text-success">$0.00/year</strong>.
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-md-12 mb-3">
                                <label for="cardholder-name" class="form-label">Cardholder Name</label>
                                <input type="text" class="form-control form-control-lg" id="cardholder-name" placeholder="Full Name as on Card" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="card-number" class="form-label">Card Number</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-credit-card"></i></span>
                                <input type="text" class="form-control form-control-lg" id="card-number" placeholder="•••• •••• •••• ••••" required pattern="\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}" title="Enter a valid 16-digit card number">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-7 mb-3 mb-md-0">
                                <label for="expiry-date" class="form-label">Expiry Date</label>
                                <input type="text" class="form-control form-control-lg" id="expiry-date" placeholder="MM / YY" required pattern="(0[1-9]|1[0-2])\s?\/\s?\d{2}" title="Enter date as MM / YY">
                            </div>
                            <div class="col-md-5">
                                <label for="cvv" class="form-label">CVV/CVC</label>
                                <input type="text" class="form-control form-control-lg" id="cvv" placeholder="•••" required pattern="\d{3,4}" title="Enter 3 or 4 digit CVV">
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="billing-email" class="form-label">Billing Email Address</label>
                             <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                <input type="email" class="form-control form-control-lg" id="billing-email" placeholder="you@example.com" required>
                            </div>
                        </div>
                         <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" value="" id="termsCheck" required>
                            <label class="form-check-label" for="termsCheck">
                                I have read and agree to the RecycLearner <a href="#" onclick="showInfoModal('Terms and Conditions', 'This is placeholder text for RecycLearner\'s Terms and Conditions. In a real application, this would link to a comprehensive T&C page covering service usage, subscription terms, payment policies, cancellation rights, data privacy (linking to Privacy Policy), intellectual property, acceptable use, disclaimers, limitation of liability, and governing law. Users must agree to these terms to proceed.')">Terms and Conditions</a> and acknowledge the 7-day free trial.
                            </label>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="btn-custom btn-lg"><i class="fas fa-lock me-2"></i>Activate My Free Trial Now</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>


        <div id="signin-view" class="view auth-view">
            <h2><i class="fas fa-sign-in-alt me-2 text-primary-blue"></i>Sign In to RecycLearner</h2>
            <p class="text-muted mb-4">Welcome back! Access your account to continue your sustainability journey.</p>
            <form id="signin-form">
                <div class="mb-3">
                    <label for="signin-email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="signin-email" placeholder="you@example.com" required>
                </div>
                <div class="mb-3">
                    <label for="signin-password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="signin-password" placeholder="Enter your password" required>
                </div>
                <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-paper-plane"></i> Sign In</button>
                    <button type="button" class="btn-custom btn-lg btn-google" onclick="showInfoModal('Feature Not Implemented', 'Sign in with Google is not yet available. Please use email and password.', false)"><i class="fab fa-google"></i> Sign In with Google</button>
                </div>
            </form>
            <p class="text-center mt-4">
                Don't have an account yet? <a href="#" id="navigateToSignUp" class="btn-link-custom">Create one here!</a>
            </p>
        </div>

        <div id="signup-view" class="view auth-view">
            <h2><i class="fas fa-user-plus me-2 text-primary-green"></i>Create Your Account</h2>
            <p class="text-muted mb-4">Join RecycLearner today and start making a difference!</p>
            <form id="signup-form">
                <div class="mb-3">
                    <label for="signup-username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="signup-username" placeholder="Choose a unique username" required>
                </div>
                <div class="mb-3">
                    <label for="signup-fullname" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="signup-fullname" placeholder="Enter your full name" required>
                </div>
                <div class="mb-3">
                    <label for="signup-email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="signup-email" placeholder="you@example.com" required>
                </div>
                <div class="mb-3">
                    <label for="signup-password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="signup-password" placeholder="Create a strong password" required>
                </div>
                 <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-check-circle"></i> Sign Up</button>
                    <button type="button" class="btn-custom btn-lg btn-google" onclick="showInfoModal('Feature Not Implemented', 'Sign up with Google is not yet available. Please use the form above.', false)"><i class="fab fa-google"></i> Sign Up with Google</button>
                </div>
            </form>
            <p class="text-center mt-4">
                Already have an account? <a href="#" id="navigateToSignIn" class="btn-link-custom">Sign in here!</a>
            </p>
        </div>

        <div id="profile-view" class="view profile-view">
            <h2><i class="fas fa-id-card me-2 text-primary-blue"></i>Manage Your Profile</h2>
            <p class="text-muted mb-4">Keep your information up to date.</p>
            <form id="profile-form">
                <div class="profile-picture-wrapper">
                    <img src="assets/logo.png" alt="Profile Picture" id="profile-view-image" class="profile-picture">
                    <input type="file" id="profile-pic-upload" accept="image/*" style="display: none;">
                    <button type="button" class="btn btn-sm btn-outline-secondary mt-2" id="changeProfilePicButton"><i class="fas fa-camera"></i> Change Picture (Mock)</button>
                </div>
                <div class="mb-3">
                    <label for="profile-username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="profile-username" readonly>
                </div>
                <div class="mb-3">
                    <label for="profile-fullname" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="profile-fullname">
                </div>
                <div class="mb-3">
                    <label for="profile-email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="profile-email" readonly>
                </div>
                <div class="mb-3">
                    <label for="profile-new-password" class="form-label">New Password (Optional)</label>
                    <input type="password" class="form-control" id="profile-new-password" placeholder="Enter new password to change">
                </div>
                <div class="d-grid mt-4">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-save"></i> Save Changes</button>
                </div>
            </form>
             <div class="text-center mt-4">
                <button class="btn btn-outline-secondary" id="backToMainFromProfile"><i class="fas fa-arrow-left"></i> Back to Main Site</button>
            </div>
        </div>

    </div> <footer class="scroll-animate">
        <div class="container">
            <img src="assets/logo.png" alt="RecycLearner Small Logo" style="height: 40px; margin-bottom: 10px; opacity: 0.7;">
            <p>&copy; <span id="currentYear"></span> <span style="color: var(--primary-blue);">Recyc</span><span style="color: var(--primary-green);">Learner</span>. All Rights Reserved.
            <br>Pioneering AI for a Sustainable Planet. Dubai, UAE.</p>
            <div class="social-icons mt-3">
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg"> <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="infoModalLabel"><i class="fas fa-info-circle me-2"></i>RecycLearner Notification</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="infoModalBody" style="max-height: 70vh; overflow-y: auto;">
            </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal"><i class="fas fa-thumbs-up me-2"></i>Got it!</button>
          </div>
        </div>
      </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // --- DOMContentLoaded ---
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // --- Global Elements ---
            const views = document.querySelectorAll('.view');
            const mainContentTabsView = document.getElementById('main-content-tabs-view');
            const signinView = document.getElementById('signin-view');
            const signupView = document.getElementById('signup-view');
            const profileView = document.getElementById('profile-view');
            const userAuthSection = document.getElementById('user-auth-section');
            const mainNavWrapperContainer = document.getElementById('main-nav-wrapper-container');
            const mobileNavToggle = document.querySelector('.mobile-nav-toggle');


            // Mock Profile Pictures
            const mockProfilePics = [
                'assets/logo.png', // Default or initial
                'https://via.placeholder.com/120/007bff/FFFFFF?Text=UserA',
                'https://via.placeholder.com/120/28a745/FFFFFF?Text=UserB',
                'https://via.placeholder.com/120/ffc107/000000?Text=UserC'
            ];
            let currentProfilePicIndex = 0;


            // --- View Management ---
            function navigateToView(viewId) {
                views.forEach(v => v.classList.remove('active'));
                const targetView = document.getElementById(viewId);
                if (targetView) {
                    targetView.classList.add('active');
                }

                // Control visibility of main navigation based on view
                if (viewId === 'main-content-tabs-view') {
                    mainNavWrapperContainer.style.display = 'block';
                    if (window.innerWidth <= 767.98) { // Only show mobile toggle if main nav is relevant
                        mobileNavToggle.style.display = 'block';
                    } else {
                        mobileNavToggle.style.display = 'none';
                    }

                } else { // Auth or Profile views
                    mainNavWrapperContainer.style.display = 'none';
                    mobileNavToggle.style.display = 'none'; // Hide hamburger on auth/profile
                    const offcanvas = bootstrap.Offcanvas.getInstance(document.getElementById('mobileNav'));
                    if (offcanvas && document.getElementById('mobileNav').classList.contains('show')) {
                        offcanvas.hide();
                    }
                }
                 window.scrollTo(0, 0); // Scroll to top on view change
            }


            // --- Tab Management for Mobile/Desktop Navigation ---
            const mobileNavLinks = document.querySelectorAll('#mobileNav .nav-link');
            const desktopTabElms = document.querySelectorAll('.main-nav-wrapper .nav-link');
            const desktopTabInstance = {};

            desktopTabElms.forEach(tabEl => {
                if(tabEl.dataset.bsTarget) {
                    desktopTabInstance[tabEl.dataset.bsTarget] = new bootstrap.Tab(tabEl);
                }
            });

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', function() {
                    const targetTabId = this.dataset.bsTarget;
                    if (desktopTabInstance[targetTabId]) {
                        desktopTabInstance[targetTabId].show();
                         navigateToView('main-content-tabs-view'); // Ensure main view is active
                    }
                });
            });

            // --- Payment Tab Logic (Existing) ---
            const paymentTabLi = document.getElementById('payment-tab-li');
            const paymentTabButton = document.getElementById('payment-tab');
            let paymentTabBootstrapInstance = paymentTabButton ? new bootstrap.Tab(paymentTabButton) : null;

            window.showPaymentPage = function(planName, planPrice, planDescription) {
                document.getElementById('selected-plan-name-title').textContent = planName;
                document.getElementById('selected-plan-description').textContent = planDescription;
                document.getElementById('selected-plan-price-info').textContent = planPrice.replace('/year', '/month for 7 days, then billed annually'); // Adjusted text
                const planValue = planName ? planName.toLowerCase().replace(/\s+/g, '-') : 'unknown-plan';
                document.getElementById('selected-plan-value').value = planValue;

                if (paymentTabLi) paymentTabLi.style.display = 'list-item';
                if (paymentTabBootstrapInstance) paymentTabBootstrapInstance.show();
                 navigateToView('main-content-tabs-view'); // Ensure main view is active

                const mobileNav = document.getElementById('mobileNav');
                if (mobileNav) {
                    const bsOffcanvas = bootstrap.Offcanvas.getInstance(mobileNav);
                    if (bsOffcanvas && mobileNav.classList.contains('show')) {
                        bsOffcanvas.hide();
                    }
                }
            }

            document.querySelectorAll('.main-nav-wrapper .nav-link, #mobileNav .nav-link').forEach(tab => {
                tab.addEventListener('shown.bs.tab', function (event) {
                    if (paymentTabLi && event.target.id !== 'payment-tab' && event.target.dataset.bsTarget !=='#payment') {
                        paymentTabLi.style.display = 'none';
                    }
                    // Sync active state for mobile nav
                    mobileNavLinks.forEach(ml => {
                        ml.classList.remove('active');
                        if(ml.dataset.bsTarget === event.target.dataset.bsTarget) {
                            ml.classList.add('active');
                        }
                    });
                    // Sync active state for desktop tabs if changed via mobile or programmatically
                    desktopTabElms.forEach(dt => {
                         dt.classList.remove('active');
                         if(dt.dataset.bsTarget === event.target.dataset.bsTarget) {
                            dt.classList.add('active');
                        }
                    });
                });
            });


            // --- Custom Modal Function (Existing) ---
            const infoModalEl = document.getElementById('infoModal');
            const infoModal = infoModalEl ? new bootstrap.Modal(infoModalEl) : null;
            window.showInfoModal = function(title, message, isHtml = true) {
                if (!infoModal) return;
                const modalTitleEl = document.getElementById('infoModalLabel');
                const modalBodyEl = document.getElementById('infoModalBody');

                if (modalTitleEl) modalTitleEl.innerHTML = title;
                if (modalBodyEl) {
                    if (isHtml) {
                        modalBodyEl.innerHTML = message;
                    } else {
                        modalBodyEl.textContent = message;
                    }
                }
                infoModal.show();
            }

            // --- Image Preview for Waste Form (Existing) ---
            const wasteImageInput = document.getElementById('waste-image');
            const imagePreview = document.getElementById('waste-image-preview');
            if (wasteImageInput && imagePreview) {
                wasteImageInput.addEventListener('change', function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            imagePreview.src = e.target.result;
                            imagePreview.style.display = 'block';
                        }
                        reader.readAsDataURL(file);
                    } else {
                        imagePreview.style.display = 'none';
                        imagePreview.src = '#';
                    }
                });
            }


            // --- User Authentication (Mocked with localStorage) ---
            const LS_USER_KEY = 'recyclearner_user';
            const LS_ANON_TRIAL_KEY = 'recyclearner_anon_ai_trial_used';

            function getCurrentUser() {
                const userJson = localStorage.getItem(LS_USER_KEY);
                return userJson ? JSON.parse(userJson) : null;
            }

            function saveCurrentUser(userData) {
                localStorage.setItem(LS_USER_KEY, JSON.stringify(userData));
            }

            function signOutUser() {
                localStorage.removeItem(LS_USER_KEY);
                updateHeaderUI();
                navigateToView('main-content-tabs-view'); // Go to home/about
                showInfoModal('Signed Out', 'You have been successfully signed out.', false);
                 // Reset payment tab visibility on sign out
                if (paymentTabLi) paymentTabLi.style.display = 'none';
                if (desktopTabInstance['#about']) desktopTabInstance['#about'].show();
            }

            function updateHeaderUI() {
                const user = getCurrentUser();
                userAuthSection.innerHTML = ''; // Clear previous state

                if (user) {
                    const profilePicUrl = user.profilePic || mockProfilePics[0];
                    const dropdownHtml = `
                        <div class="dropdown profile-dropdown">
                            <img src="${profilePicUrl}" alt="Profile" id="userProfilePicHeader" data-bs-toggle="dropdown" aria-expanded="false">
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userProfilePicHeader">
                                <li><a class="dropdown-item" href="#" id="profileNavButton"><i class="fas fa-user-circle"></i> My Profile</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" id="signOutButton"><i class="fas fa-sign-out-alt"></i> Sign Out</a></li>
                            </ul>
                        </div>`;
                    userAuthSection.innerHTML = dropdownHtml;

                    document.getElementById('profileNavButton').addEventListener('click', (e) => {
                        e.preventDefault();
                        populateProfileForm(user);
                        navigateToView('profile-view');
                    });
                    document.getElementById('signOutButton').addEventListener('click', (e) => {
                        e.preventDefault();
                        signOutUser();
                    });
                } else {
                    userAuthSection.innerHTML = '<button class="btn btn-sm btn-sign-in" id="signInHeaderButton">Sign In</button>';
                    document.getElementById('signInHeaderButton').addEventListener('click', (e) => {
                        e.preventDefault();
                        navigateToView('signin-view');
                    });
                }
            }

            // Sign In Form
            const signinForm = document.getElementById('signin-form');
            if (signinForm) {
                signinForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = document.getElementById('signin-email').value;
                    // In a real app, you'd fetch user data from a backend. Here we mock.
                    // For mock, we assume if a user tries to sign in with a known signup email, it works.
                    // This is highly simplified.
                    const storedUsers = JSON.parse(localStorage.getItem('recyclearner_all_users')) || {};
                    if (storedUsers[email] && storedUsers[email].password === document.getElementById('signin-password').value) {
                        saveCurrentUser(storedUsers[email]);
                        updateHeaderUI();
                        navigateToView('main-content-tabs-view'); // Or a dashboard
                        if (desktopTabInstance['#about']) desktopTabInstance['#about'].show();
                        showInfoModal('Login Successful', `Welcome back, ${storedUsers[email].fullName || storedUsers[email].username}!`, false);
                        signinForm.reset();
                    } else {
                        showInfoModal('Login Failed', 'Invalid email or password. Please try again or sign up.', false);
                    }
                });
            }

            // Sign Up Form
            const signupForm = document.getElementById('signup-form');
            if (signupForm) {
                signupForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const username = document.getElementById('signup-username').value;
                    const fullName = document.getElementById('signup-fullname').value;
                    const email = document.getElementById('signup-email').value;
                    const password = document.getElementById('signup-password').value;

                    // Mock: Store user data in localStorage (insecure, for demo only)
                    let storedUsers = JSON.parse(localStorage.getItem('recyclearner_all_users')) || {};
                    if (storedUsers[email]) {
                        showInfoModal('Signup Failed', 'An account with this email already exists. Please sign in.', false);
                        return;
                    }

                    const newUser = {
                        username,
                        fullName,
                        email,
                        password, // In real app, hash password
                        profilePic: mockProfilePics[0], // Default profile pic
                        aiTrialUsed: localStorage.getItem(LS_ANON_TRIAL_KEY) === 'true' // If anon trial used, mark as used for new account
                    };
                    storedUsers[email] = newUser;
                    localStorage.setItem('recyclearner_all_users', JSON.stringify(storedUsers));

                    saveCurrentUser(newUser); // Automatically log in the new user
                    updateHeaderUI();
                    navigateToView('main-content-tabs-view');
                     if (desktopTabInstance['#about']) desktopTabInstance['#about'].show();
                    showInfoModal('Signup Successful!', `Welcome to RecycLearner, ${fullName || username}! Your account has been created.`, false);
                    signupForm.reset();
                });
            }


            // Profile Form
            const profileForm = document.getElementById('profile-form');
            const profileViewImage = document.getElementById('profile-view-image');

            function populateProfileForm(user) {
                if (!user) return;
                document.getElementById('profile-username').value = user.username;
                document.getElementById('profile-fullname').value = user.fullName;
                document.getElementById('profile-email').value = user.email;
                document.getElementById('profile-new-password').value = ''; // Clear password field
                profileViewImage.src = user.profilePic || mockProfilePics[0];
                // Find current pic in mock array to continue cycle from there
                currentProfilePicIndex = mockProfilePics.indexOf(user.profilePic);
                if(currentProfilePicIndex === -1) currentProfilePicIndex = 0;
            }

            if (profileForm) {
                profileForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    let user = getCurrentUser();
                    if (!user) {
                        showInfoModal('Error', 'Not logged in.', false);
                        navigateToView('signin-view');
                        return;
                    }

                    user.fullName = document.getElementById('profile-fullname').value;
                    const newPassword = document.getElementById('profile-new-password').value;
                    if (newPassword) {
                        user.password = newPassword; // In real app, hash password
                    }
                    user.profilePic = profileViewImage.src;

                    // Update in "all users" mock DB
                    let storedUsers = JSON.parse(localStorage.getItem('recyclearner_all_users')) || {};
                    storedUsers[user.email] = user;
                    localStorage.setItem('recyclearner_all_users', JSON.stringify(storedUsers));

                    saveCurrentUser(user);
                    updateHeaderUI(); // Reflect potential pic change in header
                    showInfoModal('Profile Updated', 'Your profile information has been saved.', false);
                });
            }

            const changeProfilePicButton = document.getElementById('changeProfilePicButton');
            if (changeProfilePicButton) {
                changeProfilePicButton.addEventListener('click', () => {
                    currentProfilePicIndex = (currentProfilePicIndex + 1) % mockProfilePics.length;
                    profileViewImage.src = mockProfilePics[currentProfilePicIndex];
                });
            }
             const backToMainFromProfile = document.getElementById('backToMainFromProfile');
             if(backToMainFromProfile) {
                backToMainFromProfile.addEventListener('click', () => {
                    navigateToView('main-content-tabs-view');
                    if (desktopTabInstance['#about']) desktopTabInstance['#about'].show();
                });
             }


            // Navigation between auth pages
            document.getElementById('navigateToSignUp')?.addEventListener('click', (e) => { e.preventDefault(); navigateToView('signup-view'); });
            document.getElementById('navigateToSignIn')?.addEventListener('click', (e) => { e.preventDefault(); navigateToView('signin-view'); });


            // --- AI Recycle Helper & Trial Logic ---
            const wasteForm = document.getElementById('waste-form');
            const loadingSpinner = document.getElementById('loading-spinner');
            const getInsightsButton = document.getElementById('get-insights-button');
            const aiTrialMessageDiv = document.getElementById('ai-trial-message');

            function canUseAITrial() {
                const user = getCurrentUser();
                if (user) {
                    return !user.aiTrialUsed;
                } else {
                    return localStorage.getItem(LS_ANON_TRIAL_KEY) !== 'true';
                }
            }

            function markAITrialUsed() {
                const user = getCurrentUser();
                if (user) {
                    user.aiTrialUsed = true;
                    saveCurrentUser(user);
                     // Update in "all users" mock DB as well
                    let storedUsers = JSON.parse(localStorage.getItem('recyclearner_all_users')) || {};
                    if (storedUsers[user.email]) {
                        storedUsers[user.email].aiTrialUsed = true;
                        localStorage.setItem('recyclearner_all_users', JSON.stringify(storedUsers));
                    }
                } else {
                    localStorage.setItem(LS_ANON_TRIAL_KEY, 'true');
                }
            }

            // Update AI Helper UI based on trial status when tab is shown
             const submitWasteTabButton = document.getElementById('submit-waste-tab');
             if(submitWasteTabButton){
                new bootstrap.Tab(submitWasteTabButton)._element.addEventListener('shown.bs.tab', function () {
                    updateAIHelperUIAccess();
                });
             }


            function updateAIHelper
