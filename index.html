<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        RecycLearner
    </title>
    <link rel="icon" type="image/png" href="assets/logo.png" onerror="this.href='https://placehold.co/32x32/007bff/ffffff?text=RL';">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /*
        ==========================================================================
        RecycLearner - Comprehensive Stylesheet
        Version: 2.0 (Massive Expansion)
        Author: AI Generated
        ==========================================================================

        Table of Contents:
        1.  :root Variables (Light & Dark Modes)
        2.  Base & Body Styles
        3.  Typography
        4.  View Management & Animations
        5.  Header & Logo
        6.  Dark Mode Toggle Switch
        7.  User Authentication Section (Header)
        8.  Main Navigation (Desktop Tabs & Mobile Offcanvas)
        9.  Tab Content Wrapper & General Tab Pane Styling
        10. Specific Tab Panes:
            10.1. About Us
            10.2. Our Mission
            10.3. How It Works
            10.4. AI Recycle Helper
            10.5. Our Plans
        11. NEW Tab Panes (Detailed Styling):
            11.1. Recycling Guides
            11.2. Upcycling Hub
            11.3. Community Central
            11.4. FAQ Section
            11.5. Eco-Blog
        12. Subscription Plans Styling
        13. Buttons (General & Specific)
        14. Forms (General & Specific)
        15. Authentication Views (Sign In, Sign Up)
        16. Profile View (Expanded)
        17. Payment View
        18. Footer
        19. Modal Styling
        20. Spinner / Loader
        21. Scroll Animations & Utility Classes
        22. Responsive Adjustments (Multiple Breakpoints)
        23. Print Styles (Basic)
        ==========================================================================
        */

        :root {
            /* Light Mode Color Palette */
            --primary-blue: #007bff;
            --secondary-blue: #0056b3;
            --primary-green: #28a745;
            --secondary-green: #1e7e34;
            --light-green: #e6f7ea;
            --light-blue: #e0f3ff;
            --accent-yellow: #ffc107;
            --accent-orange: #fd7e14;
            --accent-red: #dc3545;
            --accent-teal: #20c997;
            --accent-purple: #6f42c1;

            --background-start: #edf2f7;
            --background-mid: #e2e8f0;
            --background-end: #d4dde7;
            --card-background: rgba(255, 255, 255, 0.98);
            --header-background: rgba(255, 255, 255, 0.95);
            --footer-background: rgba(230, 235, 240, 0.9);

            --text-dark: #1a202c;
            --text-dark-rgb: 26, 32, 44;
            --text-medium: #4a5568;
            --text-light: #718096;
            --text-on-primary: #ffffff;
            --text-on-success: #ffffff;

            --border-color: #cbd5e0;
            --border-color-light: #e2e8f0;
            --input-border-color: #ced4da;
            --input-focus-border-color: #80bdff;
            --input-focus-box-shadow: rgba(0, 123, 255, 0.25);


            --border-radius-xl: 45px;
            --border-radius-lg: 35px;
            --border-radius-md: 25px;
            --border-radius-sm: 15px;
            --border-radius-xs: 8px;

            --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.05);
            --shadow-medium: 0 10px 30px rgba(0, 0, 0, 0.08);
            --shadow-strong: 0 15px 40px rgba(0, 0, 0, 0.1);
            --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.06);

            --transition-speed: 0.4s;
            --transition-speed-fast: 0.25s;
            --transition-speed-slow: 0.6s;
            --transition-cubic: cubic-bezier(0.25, 0.8, 0.25, 1);

            /* Dark Mode Color Palette - Overridden by body.dark-mode */
            --dm-primary-blue: #3b8dff;
            --dm-secondary-blue: #2a78e0;
            --dm-primary-green: #34c759;
            --dm-secondary-green: #29a347;
            --dm-light-green: rgba(52, 199, 89, 0.15);
            --dm-light-blue: rgba(59, 141, 255, 0.15);
            --dm-accent-yellow: #ffd60a;
            --dm-accent-orange: #ff9f0a;
            --dm-accent-red: #ff453a;
            --dm-accent-teal: #64d2ff;
            --dm-accent-purple: #bf5af2;


            --dm-background-start: #1c1c1e; /* Slightly different dark shades */
            --dm-background-mid: #2c2c2e;
            --dm-background-end: #3a3a3c;
            --dm-card-background: rgba(44, 44, 46, 0.98); /* Dark card */
            --dm-header-background: rgba(28, 28, 30, 0.95); /* Dark header */
            --dm-footer-background: rgba(28, 28, 30, 0.9);

            --dm-text-dark: #f2f2f7;    /* Primary text for dark mode (very light grey) */
            --dm-text-dark-rgb: 242, 242, 247;
            --dm-text-medium: #aeaeb2; /* Secondary text */
            --dm-text-light: #8e8e93;  /* Tertiary text */
            --dm-text-on-primary: #ffffff;
            --dm-text-on-success: #ffffff;

            --dm-border-color: #48484a; /* Darker border */
            --dm-border-color-light: #3a3a3c;
            --dm-input-border-color: #545458;
            --dm-input-focus-border-color: var(--dm-primary-blue);
            --dm-input-focus-box-shadow: rgba(59, 141, 255, 0.3);

            --dm-shadow-light: 0 5px 15px rgba(0, 0, 0, 0.15); /* Stronger shadows for dark mode */
            --dm-shadow-medium: 0 10px 30px rgba(0, 0, 0, 0.25);
            --dm-shadow-strong: 0 15px 40px rgba(0, 0, 0, 0.3);
            --dm-shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* --- Base & Body Styles --- */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px; /* Base font size */
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(140deg, var(--background-start), var(--background-mid), var(--background-end));
            background-attachment: fixed;
            background-size: 400% 400%; /* Larger size for smoother animation */
            animation: bgAnimation 45s ease infinite alternate; /* Slower animation */
            color: var(--text-dark);
            overflow-x: hidden;
            line-height: 1.75; /* Slightly increased line height */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background var(--transition-speed-slow) ease, color var(--transition-speed) ease;
        }

        body.dark-mode {
            /* Apply dark mode variables by re-declaring them for the body.dark-mode scope */
            --primary-blue: var(--dm-primary-blue);
            --secondary-blue: var(--dm-secondary-blue);
            --primary-green: var(--dm-primary-green);
            --secondary-green: var(--dm-secondary-green);
            --light-green: var(--dm-light-green);
            --light-blue: var(--dm-light-blue);
            --accent-yellow: var(--dm-accent-yellow);
            --accent-orange: var(--dm-accent-orange);
            --accent-red: var(--dm-accent-red);
            --accent-teal: var(--dm-accent-teal);
            --accent-purple: var(--dm-accent-purple);

            --background-start: var(--dm-background-start);
            --background-mid: var(--dm-background-mid);
            --background-end: var(--dm-background-end);
            --card-background: var(--dm-card-background);
            --header-background: var(--dm-header-background);
            --footer-background: var(--dm-footer-background);

            --text-dark: var(--dm-text-dark);
            --text-dark-rgb: var(--dm-text-dark-rgb);
            --text-medium: var(--dm-text-medium);
            --text-light: var(--dm-text-light);

            --border-color: var(--dm-border-color);
            --border-color-light: var(--dm-border-color-light);
            --input-border-color: var(--dm-input-border-color);
            --input-focus-border-color: var(--dm-input-focus-border-color);
            --input-focus-box-shadow: var(--dm-input-focus-box-shadow);

            --shadow-light: var(--dm-shadow-light);
            --shadow-medium: var(--dm-shadow-medium);
            --shadow-strong: var(--dm-shadow-strong);
            --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.1);

            animation-name: bgAnimationDark; /* Use a potentially different animation for dark mode if desired */
        }

        @keyframes bgAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes bgAnimationDark { /* Can be the same or different */
             0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- Typography --- */
        h1, .h1, h2, .h2, h3, .h3, h4, .h4, h5, .h5, h6, .h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            color: var(--text-dark); /* Uses CSS variables, will change with dark mode */
            line-height: 1.3;
            margin-top: 0;
            margin-bottom: 1rem; /* Consistent margin */
            transition: color var(--transition-speed) ease;
        }

        h1, .h1 { font-size: clamp(2rem, 5vw, 3rem); letter-spacing: -0.5px; }
        h2, .h2 { font-size: clamp(1.75rem, 4vw, 2.5rem); }
        h3, .h3 { font-size: clamp(1.5rem, 3.5vw, 2rem); }
        h4, .h4 { font-size: clamp(1.25rem, 3vw, 1.75rem); }
        h5, .h5 { font-size: clamp(1.1rem, 2.5vw, 1.5rem); }
        h6, .h6 { font-size: clamp(1rem, 2vw, 1.25rem); }

        p {
            margin-bottom: 1.25rem;
            font-size: clamp(0.95rem, 1.5vw, 1.05rem);
            color: var(--text-medium);
            transition: color var(--transition-speed) ease;
        }

        .lead {
            font-size: clamp(1.1rem, 2.5vw, 1.3rem); /* Responsive lead */
            font-weight: 400; /* Slightly heavier lead */
            color: var(--text-medium);
            margin-bottom: 1.75rem;
        }

        a {
            color: var(--primary-blue);
            text-decoration: none;
            transition: color var(--transition-speed-fast) ease, opacity var(--transition-speed-fast) ease;
        }
        a:hover {
            color: var(--secondary-blue);
            text-decoration: underline;
            opacity: 0.85;
        }

        strong, b { font-weight: 700; color: var(--text-dark); } /* Will adapt to dark mode */
        em, i { font-style: italic; }

        blockquote {
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-left: 5px solid var(--primary-green);
            background-color: var(--light-green); /* Adapts with dark mode vars */
            border-radius: var(--border-radius-sm);
            font-style: italic;
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }
        blockquote p { margin-bottom: 0; }
        blockquote footer {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-light); /* Adapts */
        }


        /* --- View Management & Animations --- */
        .view {
            display: none;
            animation: viewFadeIn var(--transition-speed-slow) var(--transition-cubic);
            min-height: 70vh; /* Ensure views take up substantial space */
        }
        .view.active { display: block; }

        @keyframes viewFadeIn {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        @keyframes subtlePulse { /* Example of another animation */
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* --- Header & Logo --- */
        header {
            background-color: var(--header-background); /* Adapts */
            padding: 1rem 2rem; /* Increased padding */
            backdrop-filter: blur(25px) saturate(180%); /* Enhanced blur */
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border-bottom: 1px solid var(--border-color); /* Adapts */
            position: sticky;
            top: 0;
            z-index: 1050; /* Higher z-index */
            box-shadow: var(--shadow-medium); /* Adapts */
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: padding var(--transition-speed-fast) ease-out, background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }

        .header-main-content {
            display: flex;
            align-items: center;
            gap: 1rem; /* Increased gap */
            animation: fadeInDown var(--transition-speed) ease-out;
        }
         .header-logo-container {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        .header-logo-container:hover .logo-img { /* Enhanced hover effect */
            transform: scale(1.15) rotate(-8deg);
            filter: drop-shadow(0 0 12px rgba(var(--primary-green-rgb, 40, 167, 69), 0.5));
        }
        body.dark-mode .header-logo-container:hover .logo-img {
             filter: drop-shadow(0 0 12px rgba(var(--dm-primary-green-rgb, 52, 199, 89), 0.6));
        }


        header .logo-img {
            height: 55px; /* Slightly larger */
            width: 55px;
            object-fit: contain;
            border-radius: var(--border-radius-sm);
            transition: transform var(--transition-speed) ease-out, filter 0.3s ease;
        }

        header .logo-title {
            font-size: clamp(1.8rem, 4.5vw, 2.6rem); /* Larger title */
            font-weight: 800;
            margin: 0;
            letter-spacing: -1px; /* Tighter spacing */
            line-height: 1;
        }
        header .logo-title .recyc { color: var(--primary-blue); }
        header .logo-title .learner { color: var(--primary-green); }

        @media (max-width: 819.98px) { /* Responsive header adjustments */
            header .logo-title { font-size: 1.6rem; }
            header { padding: 0.8rem 1.3rem; }
        }

        /* --- Dark Mode Toggle Switch --- */
        .dark-mode-toggle-container {
            margin-left: auto; /* Pushes to the right before auth section */
            margin-right: 1.5rem; /* Space between toggle and auth */
            display: flex;
            align-items: center;
        }
        .dark-mode-switch {
            position: relative;
            display: inline-block;
            width: 60px; /* Wider switch */
            height: 34px;
        }
        .dark-mode-switch input { display: none; } /* Hide actual checkbox */

        .dark-mode-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #bdc3c7; /* Neutral grey for light mode 'off' */
            transition: var(--transition-speed) ease;
            border-radius: 34px;
            box-shadow: var(--shadow-inset);
        }
        body.dark-mode .dark-mode-slider {
            background-color: #555; /* Darker grey for dark mode 'off' */
        }

        .dark-mode-slider:before { /* The sliding circle */
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition-speed) var(--transition-cubic);
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
         /* Icons inside the slider */
        .dark-mode-slider .fa-moon, .dark-mode-slider .fa-sun {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px; /* Larger icons */
            color: var(--accent-yellow); /* Sun color */
            transition: opacity var(--transition-speed) ease, color var(--transition-speed) ease;
        }
        .dark-mode-slider .fa-moon { /* Moon icon specific */
            right: 8px;
            opacity: 1; /* Visible by default (when switch is for light mode) */
            color: var(--secondary-blue); /* Moon color */
        }
        .dark-mode-slider .fa-sun { /* Sun icon specific */
            left: 8px;
            opacity: 0; /* Hidden by default */
        }

        input:checked + .dark-mode-slider { /* When checkbox is checked (Dark Mode ON) */
            background-color: var(--primary-green); /* Green when ON in light theme context */
        }
        body.dark-mode input:checked + .dark-mode-slider { /* Dark mode ON in dark theme context */
            background-color: var(--dm-primary-green);
        }

        input:focus + .dark-mode-slider { /* Focus state */
            box-shadow: 0 0 0 2px var(--header-background), 0 0 0 4px var(--primary-blue);
        }
        body.dark-mode input:focus + .dark-mode-slider {
            box-shadow: 0 0 0 2px var(--dm-header-background), 0 0 0 4px var(--dm-primary-blue);
        }

        input:checked + .dark-mode-slider:before { /* Slider circle moves */
            transform: translateX(26px);
        }
        input:checked + .dark-mode-slider .fa-moon { opacity: 0; } /* Hide moon */
        input:checked + .dark-mode-slider .fa-sun { opacity: 1; } /* Show sun */


        /* --- User Auth Section in Header --- */
        #user-auth-section {
            position: relative;
            display: flex;
            align-items: center;
        }
        #user-auth-section .btn-sign-in {
            background: linear-gradient(55deg, var(--primary-blue), var(--secondary-blue));
            color: var(--text-on-primary);
            padding: 0.7rem 1.4rem; /* Adjusted padding */
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 0.9rem;
            transition: all var(--transition-speed-fast) var(--transition-cubic);
            box-shadow: var(--shadow-light);
            border:none;
            text-transform: uppercase;
            letter-spacing: 0.75px; /* Increased spacing */
        }
        #user-auth-section .btn-sign-in:hover, #user-auth-section .btn-sign-in:focus {
            background: linear-gradient(55deg, var(--secondary-blue), var(--primary-blue));
            transform: translateY(-3px) scale(1.05);
            box-shadow: var(--shadow-medium);
        }

        #user-auth-section .profile-dropdown img {
            width: 48px; /* Larger profile pic */
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid var(--primary-green); /* Thicker border */
            padding: 3px;
            object-fit: cover;
            transition: transform var(--transition-speed-fast) ease, box-shadow var(--transition-speed-fast) ease, border-color 0.3s ease;
        }
         #user-auth-section .profile-dropdown img:hover {
            transform: scale(1.15) rotate(5deg); /* Enhanced hover */
            box-shadow: 0 0 20px rgba(var(--text-dark-rgb, 26,32,44), 0.2); /* Use RGB for alpha, adapts */
            border-color: var(--accent-yellow);
         }

        #user-auth-section .dropdown-menu {
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-strong); /* Adapts */
            border: 1px solid var(--border-color-light); /* Adapts */
            padding: 0.5rem 0;
            animation: fadeInDropdown 0.3s ease-out;
            min-width: 200px; /* Wider dropdown */
            background-color: var(--card-background); /* Adapts */
        }
        @keyframes fadeInDropdown { /* Consistent animation */
            from { opacity: 0; transform: translateY(-15px) scale(0.97); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        #user-auth-section .dropdown-item {
            font-weight: 500;
            font-size: 0.95rem; /* Slightly larger font */
            padding: 0.75rem 1.5rem; /* More padding */
            color: var(--text-dark); /* Adapts */
            transition: background-color var(--transition-speed-fast) ease, color var(--transition-speed-fast) ease, padding-left 0.2s ease, transform 0.2s ease;
        }
        #user-auth-section .dropdown-item i {
            margin-right: 14px;
            color: var(--text-medium); /* Adapts */
            width: 20px; /* Wider icon space */
            text-align: center;
            transition: color var(--transition-speed-fast) ease, transform var(--transition-speed-fast) ease;
        }
        #user-auth-section .dropdown-item:hover {
            background-color: var(--light-blue); /* Adapts */
            color: var(--primary-blue); /* Adapts */
            padding-left: 1.7rem; /* Indent on hover */
            transform: translateX(3px);
        }
        #user-auth-section .dropdown-item:hover i {
            color: var(--primary-blue); /* Adapts */
            transform: scale(1.1);
        }
        #user-auth-section .dropdown-divider { margin: 0.5rem 0; border-top: 1px solid var(--border-color-light); /* Adapts */}

        /* --- Main Navigation (Desktop Tabs & Mobile Offcanvas) --- */
        .main-nav-wrapper-container {
             transition: opacity 0.4s ease-out, max-height 0.5s var(--transition-cubic), margin-bottom 0.5s var(--transition-cubic), padding 0.5s var(--transition-cubic);
             max-height: 250px; /* Ample space for more tabs */
        }
        .main-nav-wrapper-container.hidden-for-auth { /* Hides nav when on auth pages */
            opacity: 0;
            max-height: 0 !important;
            overflow: hidden;
            margin-bottom: 0 !important;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
            pointer-events: none;
        }
        .main-nav-wrapper { /* Desktop tabs container */
            display: flex;
            justify-content: center;
            padding: 0.8rem 0;
            margin-bottom: 2.5rem; /* Increased margin */
        }

        .nav-pills { /* The pill container itself */
            background-color: rgba(var(--text-dark-rgb, 255,255,255), 0.03); /* Subtle background based on text color for contrast */
            padding: 0.6rem; /* Slightly more padding */
            border-radius: var(--border-radius-xl);
            display: inline-flex;
            flex-wrap: nowrap; /* Important for horizontal scrolling */
            overflow-x: auto; /* Enable horizontal scroll on smaller screens if tabs overflow */
            box-shadow: var(--shadow-medium); /* Adapts */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
            border: 1px solid rgba(var(--text-dark-rgb, 0,0,0), 0.08); /* Adapts */
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }
        .nav-pills::-webkit-scrollbar { display: none; } /* Hide scrollbar for Chrome, Safari, Opera */

        .nav-pills .nav-item { margin: 0 5px; flex-shrink: 0; } /* Prevent shrinking of nav items */

        .nav-pills .nav-link { /* Individual tab buttons */
            border-radius: var(--border-radius-lg);
            color: var(--text-dark); /* Adapts */
            font-weight: 600;
            font-size: 0.92rem; /* Slightly larger */
            padding: 0.85rem 1.7rem; /* More padding */
            transition: all var(--transition-speed) var(--transition-cubic);
            border: 2.5px solid transparent;
            white-space: nowrap; /* Prevent text wrapping */
            letter-spacing: 0.4px; /* More spacing */
        }
        .nav-pills .nav-link i { margin-right: 10px; font-size: 1.05em; }

        .nav-pills .nav-link:hover, .nav-pills .nav-link:focus {
            background-color: rgba(var(--primary-blue-rgb, 0,123,255), 0.1); /* Adapts */
            transform: translateY(-4px); /* More pronounced hover */
            color: var(--primary-blue); /* Adapts */
            border-color: var(--light-blue); /* Adapts */
        }

        .nav-pills .nav-link.active {
            background: linear-gradient(70deg, var(--primary-blue), var(--primary-green));
            color: var(--text-on-primary) !important; /* Ensure text is white and overrides other color rules */
            box-shadow: 0 9px 22px rgba(var(--primary-blue-rgb,0,100,200), 0.3); /* Adapts */
            transform: translateY(-4px) scale(1.06); /* More pronounced active state */
            border-color: transparent;
        }
        .nav-pills .nav-link.active:hover { /* Hover on active tab */
             box-shadow: 0 12px 28px rgba(var(--primary-blue-rgb,0,100,200), 0.4); /* Adapts */
        }

        /* Mobile Navigation (Offcanvas) */
        .mobile-nav-toggle {
            font-size: 1.7rem; /* Larger toggle icon */
            color: var(--primary-blue); /* Adapts */
            background: var(--card-background); /* Adapts */
            border: 1.5px solid rgba(var(--text-dark-rgb,0,0,0), 0.1); /* Adapts */
            padding: 0.4rem 0.75rem;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-medium); /* Adapts */
            transition: all var(--transition-speed-fast) ease, opacity 0.3s ease-out, visibility 0.3s ease-out, display 0.1s;
        }
        .mobile-nav-toggle:hover { transform: scale(1.15) rotate(7deg); background-color: var(--light-blue); } /* Adapts */
        .mobile-nav-toggle.hidden-for-auth { /* Hides toggle on auth pages */
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none !important;
            display: none !important;
        }

        .offcanvas {
            background-color: var(--background-mid); /* Adapts */
            transition: background-color var(--transition-speed) ease;
            box-shadow: var(--shadow-strong);
        }
        .offcanvas-header {
            border-bottom: 1.5px solid var(--border-color); /* Adapts */
            background-color: var(--light-blue); /* Adapts */
            padding: 1.2rem 1.4rem;
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }
        .offcanvas-title { color: var(--primary-blue); font-weight: 700; font-size: 1.35rem; } /* Adapts */
        .offcanvas-body .nav-link { /* Links within mobile nav */
            display: flex;
            align-items: center;
            padding: 1.05rem 1.4rem; /* More padding */
            margin-bottom: 0.6rem;
            border-radius: var(--border-radius-md);
            color: var(--text-dark); /* Adapts */
            font-weight: 600;
            font-size: 1rem; /* Larger font */
            transition: background-color var(--transition-speed-fast) ease, color var(--transition-speed-fast) ease, transform var(--transition-speed-fast) ease, box-shadow 0.2s ease;
        }
        .offcanvas-body .nav-link i { margin-right: 16px; font-size: 1.25em; width: 26px; text-align: center; }
        .offcanvas-body .nav-link:hover {
            background-color: var(--light-green); /* Adapts */
            color: var(--primary-green); /* Adapts */
            transform: translateX(8px) scale(1.03); /* More pronounced hover */
            box-shadow: var(--shadow-light); /* Adapts */
        }
        .offcanvas-body .nav-link.active {
            background-color: var(--primary-green); /* Adapts */
            color: var(--text-on-success) !important; /* Ensure text is white */
            transform: translateX(8px) scale(1.03);
            box-shadow: var(--shadow-medium); /* Adapts */
        }
        .offcanvas .btn-close {
            filter: var(--bs-btn-close-white-filter); /* Default for Bootstrap dark backgrounds, adjust if needed for light/dark */
        }
        body.dark-mode .offcanvas .btn-close {
             filter: invert(1) grayscale(100%) brightness(200%); /* Ensures close button is visible on dark offcanvas */
        }


        /* --- Tab Content Wrapper & General Tab Pane Styling --- */
        .tab-content-wrapper {
            background-color: var(--card-background); /* Adapts */
            padding: clamp(1.8rem, 4.5vw, 3.5rem); /* Increased padding */
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-strong); /* Adapts */
            min-height: 550px; /* Increased min height */
            backdrop-filter: blur(20px) saturate(190%);
            -webkit-backdrop-filter: blur(20px) saturate(190%);
            border: 1px solid rgba(var(--text-dark-rgb, 0,0,0), 0.07); /* Adapts */
            margin-top: 0;
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }

        .tab-content-wrapper h2, .auth-view h2, .profile-view h2, #payment-view h2,
        .section-title { /* Common style for main titles in tabs/views */
            color: var(--primary-green); /* Adapts */
            font-weight: 700;
            font-size: clamp(2rem, 4.5vw, 2.7rem); /* Larger titles */
            margin-bottom: 2.5rem; /* More space below title */
            border-bottom: 4px solid var(--primary-blue); /* Adapts */
            padding-bottom: 1rem; /* More padding below title */
            display: inline-block; /* Allows border to fit content */
            animation: slideInFromLeft 0.9s ease-out;
        }
        .tab-pane h3, .section-subtitle { /* Common style for sub-titles */
             font-size: clamp(1.7rem, 3.8vw, 2.2rem); /* Larger sub-titles */
             color: var(--primary-blue); /* Adapts */
             margin-top: 3rem; /* More space above */
             margin-bottom: 1.6rem; /* More space below */
             padding-bottom: 0.7rem;
             border-bottom: 2.5px dotted var(--light-blue); /* Adapts */
        }
        .tab-pane h3:first-of-type, .section-subtitle:first-of-type {
            margin-top: 0.5rem; /* Less margin for the very first subtitle */
        }

        .tab-pane { animation: contentFadeIn 0.8s ease-in-out; } /* Slower fade-in */
        @keyframes contentFadeIn {
            from { opacity: 0; transform: scale(0.96) translateY(15px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        @keyframes slideInFromLeft { /* Reusable animation */
            from { opacity: 0; transform: translateX(-40px); }
            to { opacity: 1; transform: translateX(0); }
        }


        .tab-pane p, .tab-pane ul, .tab-pane ol {
            font-size: clamp(1rem, 2.3vw, 1.1rem); /* Larger base text */
            line-height: 1.9; /* More spacious line height */
            color: var(--text-medium); /* Adapts */
            margin-bottom: 1.5rem; /* More space between paragraphs */
        }
        .tab-pane ul:not(.list-unstyled), .tab-pane ol:not(.list-unstyled) { list-style-type: none; padding-left: 1rem; }
        .tab-pane ul:not(.list-unstyled) li {
            padding-left: 2.5em; /* More indent */
            position: relative;
            margin-bottom: 0.9rem; /* More space between list items */
        }
        .tab-pane ul:not(.list-unstyled) li::before {
            content: "\f058"; /* Font Awesome check-circle */
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            color: var(--primary-green); /* Adapts */
            position: absolute;
            left: 0;
            top: 7px; /* Adjusted for larger text */
            font-size: 1.25em; /* Larger icon */
            transition: transform var(--transition-speed-fast) ease-out, color 0.2s ease;
        }
        .tab-pane ul:not(.list-unstyled) li:hover::before {
            transform: scale(1.3) rotate(15deg); /* More pronounced hover */
            color: var(--secondary-green); /* Adapts */
        }
        .tab-pane strong { color: var(--text-dark); font-weight: 600; } /* Adapts */

        /* --- 10.1. About Us --- (Existing, can add more specific styles if content expands) */
        #about-tab-pane .about-intro-image {
            max-width: 100%;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-medium);
            margin-bottom: 1.5rem;
        }
        #about-tab-pane .team-member-card {
            background-color: var(--light-blue); /* Adapts */
            padding: 1.5rem;
            border-radius: var(--border-radius-md);
            margin-bottom: 1rem;
            text-align: center;
        }
        #about-tab-pane .team-member-card img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 0.5rem;
            border: 3px solid var(--primary-green);
        }

        /* --- 10.2. Our Mission --- (Existing) */
        #mission-tab-pane .mission-icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        #mission-tab-pane .mission-icon-item {
            text-align: center;
            padding: 1.5rem;
            border: 1px solid var(--border-color-light); /* Adapts */
            border-radius: var(--border-radius-md);
            background-color: rgba(var(--text-dark-rgb, 255,255,255), 0.02); /* Adapts */
        }
        #mission-tab-pane .mission-icon-item i {
            font-size: 2.5rem;
            color: var(--primary-blue); /* Adapts */
            margin-bottom: 1rem;
        }


        /* --- 10.3. How It Works --- (Existing step-by-step, enhanced hover) */
        #how-it-works-tab-pane .col-md-4 > div { /* The step card */
            transition: all 0.35s var(--transition-cubic);
            border: 1px solid var(--border-color-light); /* Adapts */
        }
        #how-it-works-tab-pane .col-md-4 > div:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: var(--shadow-strong) !important; /* Adapts */
            border-color: var(--primary-blue) !important; /* Adapts */
        }
        #how-it-works-tab-pane .col-md-4 > div:hover i {
            transform: scale(1.25) rotate(5deg);
            color: var(--primary-green) !important; /* Adapts */
        }

        /* --- 11. NEW Tab Panes Styling --- */

        /* --- 11.1. Recycling Guides --- */
        #recycling-guides-tab-pane .guide-category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem; /* Increased gap */
            margin-top: 1.5rem;
        }
        .guide-card {
            background-color: var(--card-background); /* Adapts */
            border: 1px solid var(--border-color-light); /* Adapts */
            border-radius: var(--border-radius-md);
            padding: 1.8rem; /* Increased padding */
            box-shadow: var(--shadow-light); /* Adapts */
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            display: flex;
            flex-direction: column;
            height: 100%; /* For equal height cards in a row */
        }
        .guide-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-medium); /* Adapts */
        }
        .guide-card-icon {
            font-size: 2.8rem; /* Larger icon */
            color: var(--primary-green); /* Adapts */
            margin-bottom: 1.2rem;
            text-align: center;
        }
        .guide-card h4 {
            font-size: 1.4rem; /* Larger heading */
            color: var(--primary-blue); /* Adapts */
            margin-bottom: 0.8rem;
        }
        .guide-card p {
            font-size: 0.95rem;
            color: var(--text-medium); /* Adapts */
            flex-grow: 1; /* Allows paragraph to take available space */
            margin-bottom: 1.2rem;
        }
        .guide-card .btn-learn-more {
            margin-top: auto; /* Pushes button to the bottom */
            background-color: var(--primary-green);
            border-color: var(--primary-green);
            color: var(--text-on-success);
        }
        .guide-card .btn-learn-more:hover {
            background-color: var(--secondary-green);
            border-color: var(--secondary-green);
        }
        /* Specific Guide Detail Styles (if opening in modal or new view) */
        .guide-detail-content img {
            max-width: 100%;
            height: auto;
            border-radius: var(--border-radius-sm);
            margin-bottom: 1rem;
        }
        .guide-detail-content .dos-donts ul {
            padding-left: 20px;
        }
        .guide-detail-content .dos-donts li.do::before {
            content: '\f00c'; /* Check mark */
            color: var(--primary-green);
            font-family: "Font Awesome 6 Free"; font-weight: 900;
            margin-right: 10px;
        }
        .guide-detail-content .dos-donts li.dont::before {
            content: '\f00d'; /* Times mark */
            color: var(--accent-red);
            font-family: "Font Awesome 6 Free"; font-weight: 900;
            margin-right: 10px;
        }

        /* --- 11.2. Upcycling Hub --- */
        #upcycling-hub-tab-pane .filter-controls {
            margin-bottom: 2rem;
            padding: 1rem;
            background-color: rgba(var(--text-dark-rgb,255,255,255), 0.03); /* Adapts */
            border-radius: var(--border-radius-md);
        }
        #upcycling-hub-tab-pane .filter-controls .form-label {
            font-weight: 600;
            margin-bottom: .3rem;
        }
        #upcycling-hub-tab-pane .upcycling-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.8rem;
        }
        .upcycling-idea-card {
            background-color: var(--card-background); /* Adapts */
            border-radius: var(--border-radius-md);
            overflow: hidden; /* To contain image */
            box-shadow: var(--shadow-medium); /* Adapts */
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            display: flex;
            flex-direction: column;
        }
        .upcycling-idea-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-strong); /* Adapts */
        }
        .upcycling-idea-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 3px solid var(--primary-green); /* Adapts */
        }
        .upcycling-idea-card-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .upcycling-idea-card-content h4 {
            font-size: 1.3rem;
            color: var(--primary-blue); /* Adapts */
            margin-bottom: 0.7rem;
        }
        .upcycling-idea-card-content .difficulty-badge {
            font-size: 0.8rem;
            padding: 0.3em 0.6em;
            border-radius: var(--border-radius-xs);
            margin-bottom: 0.8rem;
            display: inline-block;
        }
        .upcycling-idea-card-content .difficulty-badge.easy { background-color: var(--light-green); color: var(--primary-green); }
        .upcycling-idea-card-content .difficulty-badge.medium { background-color: var(--light-blue); color: var(--primary-blue); }
        .upcycling-idea-card-content .difficulty-badge.hard { background-color: rgba(var(--accent-red-rgb,220,53,69),0.2); color: var(--accent-red); }

        .upcycling-idea-card-content p {
            font-size: 0.9rem;
            color: var(--text-medium); /* Adapts */
            margin-bottom: 1rem;
            flex-grow: 1;
        }
        .upcycling-idea-card-content .btn-view-idea {
            margin-top: auto;
        }

        /* --- 11.3. Community Central --- */
        #community-central-tab-pane .community-intro {
            text-align: center;
            margin-bottom: 2.5rem;
        }
        #community-central-tab-pane .community-section {
            margin-bottom: 3rem;
            padding: 1.5rem;
            background-color: rgba(var(--text-dark-rgb,255,255,255), 0.02); /* Adapts */
            border-radius: var(--border-radius-md);
            border: 1px solid var(--border-color-light); /* Adapts */
        }
        #community-central-tab-pane .community-section h4 {
            color: var(--primary-green); /* Adapts */
            border-bottom: 2px solid var(--primary-blue); /* Adapts */
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .story-card, .forum-thread-card { /* Mock cards for stories/threads */
            background-color: var(--card-background); /* Adapts */
            padding: 1.2rem;
            border-radius: var(--border-radius-sm);
            margin-bottom: 1rem;
            box-shadow: var(--shadow-light); /* Adapts */
        }
        .story-card .user-avatar {
            width: 50px; height: 50px; border-radius: 50%; float: left; margin-right: 1rem;
        }
        .story-card strong { display: block; margin-bottom: 0.3rem; color: var(--text-dark); } /* Adapts */

        /* --- 11.4. FAQ Section --- */
        #faq-tab-pane .faq-search-filter {
            margin-bottom: 2rem;
        }
        #faq-tab-pane #faqSearchInput {
            padding: 0.8rem 1.2rem;
            border-radius: var(--border-radius-md);
        }
        .accordion-item {
            background-color: var(--card-background); /* Adapts */
            border: 1px solid var(--border-color-light); /* Adapts */
            margin-bottom: 0.8rem;
            border-radius: var(--border-radius-sm) !important; /* Override Bootstrap */
        }
        .accordion-button {
            background-color: rgba(var(--text-dark-rgb,255,255,255), 0.03); /* Adapts */
            color: var(--text-dark); /* Adapts */
            font-weight: 600;
            font-size: 1.1rem;
            padding: 1.2rem 1.5rem; /* Increased padding */
            border-radius: var(--border-radius-sm) !important;
        }
        .accordion-button:not(.collapsed) {
            background-color: var(--light-blue); /* Adapts */
            color: var(--primary-blue); /* Adapts */
            box-shadow: var(--shadow-inset); /* Adapts */
        }
        .accordion-button:focus {
            box-shadow: 0 0 0 0.2rem var(--input-focus-box-shadow); /* Adapts */
        }
        .accordion-button::after { /* Customizing the accordion arrow */
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%234a5568'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
        }
        body.dark-mode .accordion-button::after {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23aeaeb2'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
        }
        .accordion-body {
            padding: 1.5rem;
            font-size: 1rem;
            line-height: 1.8;
        }
        .faq-category-title {
            font-size: 1.5rem;
            color: var(--primary-green); /* Adapts */
            margin-top: 2rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--border-color); /* Adapts */
            padding-bottom: 0.5rem;
        }
        .faq-category-title:first-of-type { margin-top: 0; }

        /* --- 11.5. Eco-Blog --- */
        #eco-blog-tab-pane .blog-filters {
            margin-bottom: 2rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        #eco-blog-tab-pane .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
        }
        .blog-post-card {
            background-color: var(--card-background); /* Adapts */
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-medium); /* Adapts */
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
        }
        .blog-post-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-strong); /* Adapts */
        }
        .blog-post-card-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
        }
        .blog-post-card-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .blog-post-card-content h4 {
            font-size: 1.4rem;
            color: var(--primary-blue); /* Adapts */
            margin-bottom: 0.5rem;
        }
        .blog-post-card-meta {
            font-size: 0.85rem;
            color: var(--text-light); /* Adapts */
            margin-bottom: 1rem;
        }
        .blog-post-card-meta span { margin-right: 1rem; }
        .blog-post-card-excerpt {
            font-size: 0.95rem;
            color: var(--text-medium); /* Adapts */
            margin-bottom: 1.2rem;
            flex-grow: 1;
        }
        .blog-post-card .btn-read-more {
            margin-top: auto;
            align-self: flex-start; /* Align button to the left */
        }
        /* Blog Post Detail View (Modal or separate view) */
        .blog-post-full-content {
            padding: 2rem;
        }
        .blog-post-full-content .post-meta-full {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color-light); /* Adapts */
        }
        .blog-post-full-content .post-content-body img {
            max-width: 100%;
            height: auto;
            border-radius: var(--border-radius-sm);
            margin: 1rem 0;
        }
        .blog-post-full-content .comments-section {
            margin-top: 3rem;
        }
        .blog-post-full-content .comment {
            padding: 1rem;
            border: 1px solid var(--border-color-light); /* Adapts */
            border-radius: var(--border-radius-sm);
            margin-bottom: 1rem;
            background-color: rgba(var(--text-dark-rgb,255,255,255), 0.02); /* Adapts */
        }


        /* --- 10.4. AI Recycle Helper --- (Existing) */
        #waste-form .or-divider {
            display: flex;
            align-items: center;
            text-align: center;
            color: var(--text-light); /* Adapts */
            margin: 1.8rem 0; /* Increased margin */
            font-weight: 600;
            font-size: 0.98rem;
        }
        #waste-form .or-divider::before,
        #waste-form .or-divider::after {
            content: '';
            flex: 1;
            border-bottom: 1.8px solid var(--border-color); /* Adapts */
        }
        #waste-form .or-divider:not(:empty)::before { margin-right: .9rem; }
        #waste-form .or-divider:not(:empty)::after { margin-left: .9rem; }

        #waste-image-preview-container {
            margin-top: 1.5rem; /* Increased margin */
            text-align: center;
            min-height: 70px;
            padding: 12px;
            background-color: rgba(var(--text-dark-rgb,255,255,255), 0.03); /* Adapts */
            border-radius: var(--border-radius-md);
            border: 1px solid var(--border-color); /* Adapts */
        }
        #waste-image-preview {
            max-width: 100%;
            max-height: 250px; /* Slightly larger preview */
            border-radius: var(--border-radius-sm);
            border: 3px dashed var(--light-blue); /* Adapts */
            padding: 8px;
            object-fit: contain;
            display: none;
            background-color: var(--card-background); /* Adapts */
        }

        /* --- 10.5. Our Plans / Subscription Plans Styling --- (Existing) */
        #plans-tab-pane h2 {
             text-align: center;
             border-bottom: none;
             margin-bottom: 1.5rem; /* Increased margin */
        }
         #plans-tab-pane .lead {
            text-align: center;
            margin-bottom: 3rem; /* Increased margin */
         }

        .subscription-plan {
            border: 2px solid var(--border-color); /* Slightly thicker border, Adapts */
            border-radius: var(--border-radius-md);
            padding: 2.8rem 1.8rem; /* Increased padding */
            text-align: center;
            background-color: var(--card-background); /* Adapts */
            box-shadow: var(--shadow-medium); /* Adapts */
            margin-bottom: 2.5rem; /* Increased margin */
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease, border-color 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        .subscription-plan::before { /* Decorative element */
            content: '';
            position: absolute;
            top: -80px;
            left: -80px;
            width: 160px;
            height: 160px;
            background: linear-gradient(45deg, var(--light-blue), var(--light-green)); /* Adapts */
            border-radius: 50%;
            opacity: 0.08; /* More subtle */
            transition: transform 0.9s ease, opacity 0.9s ease;
            z-index: 0;
        }

        .subscription-plan:hover {
            transform: translateY(-16px) scale(1.04); /* More pronounced hover */
            box-shadow: var(--shadow-strong); /* Adapts */
            border-color: var(--primary-blue); /* Adapts */
        }
        .subscription-plan:hover::before { transform: scale(2.5); opacity: 0.15; }

        .subscription-plan > * { position: relative; z-index: 1; }

        .subscription-plan .plan-icon {
            font-size: 3.5rem; /* Larger icon */
            margin-bottom: 1.2rem;
            color: var(--primary-blue); /* Adapts */
            transition: color var(--transition-speed) ease, transform var(--transition-speed) ease;
        }
        .subscription-plan:hover .plan-icon { color: var(--primary-green); transform: rotateY(25deg) scale(1.15) translateY(-6px); } /* Enhanced hover */

        .subscription-plan h3 {
            color: var(--primary-blue); /* Adapts */
            font-weight: 700;
            font-size: 1.75rem; /* Larger heading */
            margin-bottom: 1.2rem;
        }

        .subscription-plan .plan-price {
            font-size: 2.5rem; /* Larger price */
            font-weight: 800;
            color: var(--text-dark); /* Adapts */
            margin: 1.8rem 0; /* Increased margin */
        }
        .subscription-plan .plan-price small { font-size: 1rem; color: var(--text-light); font-weight: 400;} /* Adapts */

        .subscription-plan .plan-features {
            list-style: none;
            padding: 0;
            margin: 1.2rem 0 1.8rem;
            text-align: left;
            flex-grow: 1;
            font-size: 0.98rem; /* Larger feature text */
        }
        .subscription-plan .plan-features li {
            margin-bottom: 0.7rem; /* More space */
            color: var(--text-medium); /* Adapts */
            padding-left: 2em; /* More indent */
            position: relative;
        }
        .subscription-plan .plan-features li::before {
            content: "\f00c"; /* Font Awesome check */
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            color: var(--primary-green); /* Adapts */
            position: absolute;
            left: 0;
            top: 6px; /* Adjusted for larger text */
            font-size: 1.05em; /* Larger icon */
        }

        .subscription-plan .badge.popular-badge {
            position: absolute;
            top: 18px; /* Adjusted position */
            right: 18px;
            background-color: var(--accent-yellow) !important; /* Adapts */
            color: var(--text-dark) !important; /* Ensure contrast */
            font-weight: 700;
            padding: 0.5em 0.8em; /* More padding */
            border-radius: var(--border-radius-sm);
            font-size: 0.85rem; /* Larger badge text */
            letter-spacing: 0.7px;
            transform: rotate(4deg); /* More pronounced rotation */
            box-shadow: 3px 3px 10px rgba(var(--text-dark-rgb,0,0,0), 0.15); /* Adapts */
        }
        .subscription-plan.popular-plan {
            border: 4px solid var(--primary-blue); /* Thicker border for popular, Adapts */
            transform: scale(1.07); /* Slightly larger popular plan */
        }
         .subscription-plan.popular-plan:hover {
             transform: translateY(-16px) scale(1.1); /* More pronounced hover for popular */
         }


        /* --- Buttons (General & Specific) --- */
        .btn-custom,
        .subscription-plan .btn-select-plan,
        #payment-form button[type="submit"],
        #waste-form button[type="submit"],
        .auth-view button[type="submit"],
        .profile-view button[type="submit"],
        .modal-footer .btn,
        .btn-read-more, .btn-view-idea, .btn-learn-more { /* Added new section buttons */
            background: linear-gradient(70deg, var(--primary-blue), var(--secondary-blue)); /* Adapts */
            color: var(--text-on-primary);
            border: none;
            padding: 0.95rem 2.5rem; /* Increased padding */
            border-radius: var(--border-radius-lg);
            transition: all var(--transition-speed) var(--transition-cubic);
            font-weight: 600;
            box-shadow: 0 8px 22px rgba(var(--primary-blue-rgb,0,123,255), 0.3); /* Adapts */
            text-transform: uppercase;
            letter-spacing: 0.9px; /* More spacing */
            margin-top: 1.2rem; /* Consistent margin */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            outline: none;
            position: relative;
            overflow: hidden;
        }
        .btn-custom i, .subscription-plan .btn-select-plan i,
        .auth-view button[type="submit"] i, .profile-view button[type="submit"] i,
        .btn-read-more i, .btn-view-idea i, .btn-learn-more i { margin-right: 12px; font-size: 1.1em; }

        .btn-custom:hover,
        .subscription-plan .btn-select-plan:hover,
        #payment-form button[type="submit"]:hover,
        #waste-form button[type="submit"]:hover,
        .auth-view button[type="submit"]:hover,
        .profile-view button[type="submit"]:hover,
        .modal-footer .btn-primary:hover,
        .btn-read-more:hover, .btn-view-idea:hover, .btn-learn-more:hover {
            background: linear-gradient(70deg, var(--secondary-blue), var(--primary-blue)); /* Adapts */
            transform: translateY(-5px) scale(1.05); /* More pronounced hover */
            box-shadow: 0 12px 28px rgba(var(--primary-blue-rgb,0,123,255), 0.4); /* Adapts */
        }
        .btn-custom:active, .subscription-plan .btn-select-plan:active { /* Active state */
            transform: translateY(-2px) scale(0.98);
            box-shadow: 0 5px 15px rgba(var(--primary-blue-rgb,0,123,255),0.25); /* Adapts */
        }


        .btn-custom:disabled, #waste-form button[type="submit"]:disabled,
        .auth-view button[type="submit"]:disabled, .profile-view button[type="submit"]:disabled {
            background: #b0bec5; /* More distinct disabled color */
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
            color: #78909c; /* Darker text for disabled */
        }
        body.dark-mode .btn-custom:disabled {
            background: #455a64;
            color: #90a4ae;
        }


        .subscription-plan .btn-contact { /* Specific button style */
            background: linear-gradient(70deg, var(--primary-green), var(--secondary-green)); /* Adapts */
            box-shadow: 0 8px 22px rgba(var(--primary-green-rgb,40,167,69), 0.3); /* Adapts */
        }
        .subscription-plan .btn-contact:hover {
            background: linear-gradient(70deg, var(--secondary-green), var(--primary-green)); /* Adapts */
            box-shadow: 0 12px 28px rgba(var(--primary-green-rgb,40,167,69), 0.4); /* Adapts */
        }
         .btn-google { /* Google button style */
            background-color: #DB4437 !important;
            color: white !important;
            border: none;
            box-shadow: 0 8px 22px rgba(219, 68, 55, 0.28);
        }
        .btn-google:hover {
            background-color: #C33D2E !important;
            box-shadow: 0 10px 25px rgba(219, 68, 55, 0.35);
            transform: translateY(-4px) scale(1.04);
        }


        /* --- Forms (General & Specific) --- */
        .form-control, .form-select {
            border-radius: var(--border-radius-sm);
            padding: 1rem 1.4rem; /* Increased padding */
            border: 2px solid var(--input-border-color); /* Thicker border, Adapts */
            transition: border-color var(--transition-speed-fast) ease, box-shadow var(--transition-speed-fast) ease, background-color 0.2s ease, color 0.2s ease;
            font-size: 1.05rem; /* Larger font */
            background-clip: padding-box;
            color: var(--text-dark); /* Adapts */
            background-color: var(--card-background); /* Adapts for consistency */
        }
        .form-control:focus, .form-select:focus {
            border-color: var(--input-focus-border-color); /* Adapts */
            box-shadow: 0 0 0 0.25rem var(--input-focus-box-shadow); /* Adapts */
            background-color: var(--card-background); /* Ensure focus bg matches, Adapts */
            color: var(--text-dark); /* Ensure text color on focus, Adapts */
        }
        textarea.form-control { min-height: 130px;  } /* Slightly taller textarea */

        .form-label {
            font-weight: 600;
            color: var(--text-dark); /* Adapts */
            margin-bottom: 0.6rem; /* More space */
            font-size: 0.98rem; /* Larger label */
        }
        .form-text { color: var(--text-light); font-size: 0.88rem; } /* Adapts */
        .form-check-label { font-size: 0.98rem; color: var(--text-medium); cursor: pointer; } /* Adapts */
        .form-check-input {
            width: 1.25em; height: 1.25em; /* Larger checkbox */
            margin-top: 0.3em;
            cursor: pointer;
            border: 1.8px solid var(--input-border-color); /* Adapts */
            background-color: var(--card-background); /* Adapts */
        }
        .form-check-input:checked {
            background-color: var(--primary-green); /* Adapts */
            border-color: var(--primary-green); /* Adapts */
        }
        .form-check-input:focus {
            box-shadow: 0 0 0 0.25rem rgba(var(--primary-green-rgb,40,167,69), 0.25); /* Adapts */
            border-color: var(--primary-green); /* Adapts */
        }
        .input-group-text {
            background-color: rgba(var(--text-dark-rgb,255,255,255), 0.05); /* Adapts */
            border: 2px solid var(--input-border-color); /* Adapts */
            color: var(--text-medium); /* Adapts */
            border-right: none; /* For seamless look with input */
        }
        .form-control-lg { /* Bootstrap's large form control, ensure consistency */
            padding: 1rem 1.5rem;
            font-size: 1.15rem;
        }


        /* --- Authentication & Profile Views & Payment View --- */
        .auth-view, .profile-view, #payment-view {
            max-width: 650px; /* Slightly wider */
            margin: 3rem auto; /* Increased margin */
            padding: clamp(2.2rem, 5.5vw, 3.8rem); /* Increased padding */
            background-color: var(--card-background); /* Adapts */
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-strong); /* Adapts */
            backdrop-filter: blur(20px) saturate(190%);
            -webkit-backdrop-filter: blur(20px) saturate(190%);
            border: 1px solid rgba(var(--text-dark-rgb,0,0,0), 0.07); /* Adapts */
        }
        #payment-view { max-width: 750px; } /* Wider payment form */

        .auth-view .form-control, .profile-view .form-control, #payment-view .form-control {
             padding: 1.05rem 1.35rem; /* Consistent padding */
             font-size: 1.08rem; /* Consistent font size */
        }
        .auth-view .btn-link-custom { /* Link for "Create account" / "Sign in" */
            color: var(--primary-blue); /* Adapts */
            text-decoration: none;
            font-weight: 600;
            transition: color var(--transition-speed-fast) ease, letter-spacing var(--transition-speed-fast) ease, text-shadow 0.2s ease;
        }
        .auth-view .btn-link-custom:hover {
            color: var(--secondary-blue); /* Adapts */
            text-decoration: underline;
            letter-spacing: 0.4px; /* More pronounced hover */
            text-shadow: 0 0 6px rgba(var(--primary-blue-rgb,0,123,255),0.25); /* Adapts */
        }

        .auth-view .divider-text { /* "OR" divider */
            display: flex;
            align-items: center;
            text-align: center;
            color: var(--text-light); /* Adapts */
            margin: 2rem 0; /* Increased margin */
            font-weight: 500;
            font-size: 0.95rem; /* Slightly larger */
        }
        .auth-view .divider-text::before, .auth-view .divider-text::after {
            content: ''; flex: 1; border-bottom: 2px solid var(--border-color-light); /* Adapts */
        }
        .auth-view .divider-text:not(:empty)::before { margin-right: .9em; }
        .auth-view .divider-text:not(:empty)::after { margin-left: .9em; }

        /* Profile View Specifics */
        .profile-view .profile-picture-wrapper {
            text-align: center;
            margin-bottom: 2.2rem; /* Increased margin */
            position: relative;
        }
        .profile-view .profile-picture {
            width: 140px; /* Larger picture */
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
            border: 6px solid var(--primary-green); /* Thicker border, Adapts */
            box-shadow: var(--shadow-medium); /* Adapts */
            margin-bottom: 0.8rem; /* More space */
            transition: transform 0.35s ease, box-shadow 0.35s ease;
        }
        .profile-view .profile-picture:hover {
            transform: scale(1.08); /* More pronounced hover */
            box-shadow: 0 0 22px rgba(var(--primary-green-rgb,40,167,69),0.35); /* Adapts */
        }
        .profile-view .form-label { font-size: 1.05rem; } /* Larger labels */
        .profile-view #uploadProfilePicButton { /* Button to upload picture */
            font-size: 0.9rem; /* Slightly larger */
            padding: 0.5rem 1rem;
            background-color: var(--light-blue); /* Adapts */
            border-color: var(--primary-blue); /* Adapts */
            color: var(--primary-blue); /* Adapts */
        }
        .profile-view #uploadProfilePicButton:hover {
            background-color: var(--primary-blue); /* Adapts */
            color: var(--text-on-primary);
        }
        /* Profile stats section */
        .profile-stats {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color-light); /* Adapts */
        }
        .profile-stats h5 {
            color: var(--primary-green); /* Adapts */
            margin-bottom: 1rem;
        }
        .stat-item {
            background-color: rgba(var(--text-dark-rgb,255,255,255),0.03); /* Adapts */
            padding: 1rem;
            border-radius: var(--border-radius-sm);
            text-align: center;
            margin-bottom: 1rem;
        }
        .stat-item .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-blue); /* Adapts */
            display: block;
        }
        .stat-item .stat-label {
            font-size: 0.9rem;
            color: var(--text-medium); /* Adapts */
        }


        /* --- Footer --- */
        footer {
            text-align: center;
            padding: 3.5rem 1.5rem; /* Increased padding */
            margin-top: 5rem; /* Increased margin */
            background-color: var(--footer-background); /* Adapts */
            border-top: 2.5px solid rgba(var(--text-dark-rgb,0,0,0), 0.1); /* Thicker border, Adapts */
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }
        footer p {
            margin-bottom: 0.6rem;
            color: var(--text-medium); /* Adapts */
            font-size: 0.98rem; /* Slightly larger */
        }
        footer .social-icons a {
            color: var(--text-light); /* Adapts */
            font-size: 1.6rem; /* Larger icons */
            margin: 0 0.8rem; /* More spacing */
            transition: color var(--transition-speed-fast) ease, transform var(--transition-speed-fast) ease, text-shadow 0.2s ease;
        }
        footer .social-icons a:hover {
            color: var(--primary-blue); /* Adapts */
            transform: translateY(-6px) scale(1.25); /* More pronounced hover */
            text-shadow: 0 0 12px rgba(var(--primary-blue-rgb,0,123,255),0.35); /* Adapts */
        }
        footer .footer-links {
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        footer .footer-links a {
            color: var(--text-medium); /* Adapts */
            margin: 0 0.75rem;
            font-size: 0.9rem;
            text-decoration: none;
        }
        footer .footer-links a:hover {
            color: var(--primary-blue); /* Adapts */
            text-decoration: underline;
        }


        /* --- Custom Modal --- */
        .modal-content {
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-strong); /* Adapts */
            border: none;
            background-color: var(--card-background); /* Adapts */
        }
        .modal-header {
            background: linear-gradient(70deg, var(--primary-blue), var(--primary-green)); /* Adapts */
            color: var(--text-on-primary);
            border-top-left-radius: var(--border-radius-lg);
            border-top-right-radius: var(--border-radius-lg);
            border-bottom: none;
            padding: 1.3rem 1.6rem; /* Increased padding */
        }
        .modal-header .btn-close {
            filter: brightness(0) invert(1); /* Ensures visibility on gradient */
            opacity: 0.95;
        }
        .modal-header .btn-close:hover { opacity: 1; transform: rotate(90deg) scale(1.15); transition: transform 0.3s ease-in-out;}
        .modal-title { font-weight: 700; font-size: 1.4rem; } /* Larger title */
        .modal-body { padding: 1.8rem 2.2rem; font-size: 1.08rem; line-height: 1.8;} /* Increased padding */
        .modal-body h5 { /* Subheadings within modal */
            font-size: 1.25rem;
            color: var(--primary-blue); /* Adapts */
            margin-top: 1.3rem;
            margin-bottom: 0.7rem;
            font-weight: 700;
        }
        .modal-body ul:not(.list-unstyled) {
            padding-left: 26px; /* More indent */
            list-style-type: disc;
        }
         .modal-body ul:not(.list-unstyled) li { padding-left: 0; margin-bottom: 0.5rem; }
         .modal-body ul:not(.list-unstyled) li::before { display: none; } /* Remove default pseudo-elements if using disc */


        .modal-footer {
            border-top: 2px solid var(--border-color-light); /* Thicker border, Adapts */
            padding: 1.2rem 1.6rem; /* Increased padding */
        }
        .modal-footer .btn-secondary { /* Secondary button in modal */
            background-color: #6c757d;
            border-color: #6c757d;
            padding: 0.75rem 1.8rem; /* More padding */
            font-weight: 500;
        }
         .modal-footer .btn-secondary:hover {
            background-color: #5a6268;
            border-color: #545b62;
            transform: translateY(-3px); /* More pronounced hover */
         }
         body.dark-mode .modal-footer .btn-secondary {
            background-color: #495057;
            border-color: #495057;
         }
         body.dark-mode .modal-footer .btn-secondary:hover {
            background-color: #343a40;
            border-color: #343a40;
         }


        /* --- Spinner for AI processing --- */
        .spinner-container {
            display: none;
            text-align: center;
            margin-top: 1.8rem; /* Increased margin */
            padding: 1.5rem; /* Increased padding */
            background-color: var(--light-blue); /* Adapts */
            border-radius: var(--border-radius-md);
        }
        .spinner-border {
            width: 3.2rem; /* Larger spinner */
            height: 3.2rem;
            color: var(--primary-green); /* Adapts */
            border-width: .38em; /* Thicker border */
        }
        .spinner-container p {
            margin-top: 0.8rem; /* More space */
            color: var(--text-medium); /* Adapts */
            font-style: italic;
            font-weight: 600;
            font-size: 1.05rem; /* Larger text */
        }

        /* --- Scroll Animations & Utility Classes --- */
        .scroll-animate {
            opacity: 0;
            transform: translateY(50px); /* More pronounced animation */
            transition: opacity 0.9s ease-out, transform 0.9s ease-out; /* Slower animation */
        }
        .scroll-animate.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .text-primary-blue { color: var(--primary-blue) !important; }
        .text-primary-green { color: var(--primary-green) !important; }
        .bg-light-subtle { background-color: rgba(var(--text-dark-rgb,255,255,255),0.03); } /* Adapts */
        .border-light-subtle { border-color: rgba(var(--text-dark-rgb,0,0,0),0.08) !important; } /* Adapts */


        /* --- Responsive Adjustments for Navigation & Content --- */
        @media (max-width: 1199.98px) { /* Extra Large devices to Large */
            /* .nav-pills .nav-link { font-size: 0.88rem; padding: 0.8rem 1.5rem; } */ /* This rule is no longer needed as the horizontal nav is removed */
        }

        @media (max-width: 991.98px) { /* Large devices to Medium (Tablet) */
            .main-nav-wrapper-container:not(.hidden-for-auth) .main-nav-wrapper {
                display: none !important; /* Hide desktop tabs */
            }
            .mobile-nav-toggle:not(.hidden-for-auth) {
                display: block !important; /* Show mobile toggle */
            }
            .tab-content-wrapper h2, .auth-view h2, .profile-view h2, #payment-view h2, .section-title { font-size: 1.9rem; }
            .tab-pane h3, .section-subtitle { font-size: 1.6rem; }
            .subscription-plan { margin-bottom: 1.8rem; }
            .dark-mode-toggle-container { margin-right: 1rem; }
        }

        @media (max-width: 767.98px) { /* Medium devices to Small (Mobile Landscape) */
             #user-auth-section .btn-sign-in { font-size: 0.85rem; padding: 0.55rem 1.1rem; }
             #user-auth-section .profile-dropdown img { width: 42px; height: 42px;}

            .tab-content-wrapper, .auth-view, .profile-view, #payment-view { padding: 1.8rem; }
            .tab-content-wrapper h2, .auth-view h2, .profile-view h2, #payment-view h2, .section-title { font-size: 1.7rem; margin-bottom: 1.8rem; }
            .tab-pane h3, .section-subtitle { font-size: 1.45rem; }

            .subscription-plan { padding: 2.2rem 1.3rem; }
            .subscription-plan h3 { font-size: 1.5rem; }
            .subscription-plan .plan-price { font-size: 2rem; }
            .subscription-plan.popular-plan { transform: scale(1); } /* Reset popular plan scale */
            .subscription-plan.popular-plan:hover { transform: translateY(-10px) scale(1.04); }

            #payment-form .row .col-md-6 { margin-bottom: 1.2rem; }
            #payment-form .row .col-md-6:last-child { margin-bottom: 0; }

            footer { padding: 2.5rem 1.2rem; }
            .dark-mode-toggle-container { margin-right: 0.5rem; }
            .dark-mode-switch { width: 50px; height: 28px; }
            .dark-mode-slider:before { height: 20px; width: 20px; }
            input:checked + .dark-mode-slider:before { transform: translateX(22px); }
            .dark-mode-slider .fa-moon, .dark-mode-slider .fa-sun { font-size: 12px; }


        }

        @media (max-width: 575.98px) { /* Small devices (Mobile Portrait) */
            header { padding: 0.8rem 1rem; }
            header .logo-img { height: 40px; width: 40px; }
            header .logo-title { font-size: 1.5rem; }

            .tab-content-wrapper, .auth-view, .profile-view, #payment-view { padding: 1.3rem; }
            .tab-content-wrapper h2, .auth-view h2, .profile-view h2, #payment-view h2, .section-title { font-size: 1.5rem; }
            .tab-pane h3, .section-subtitle { font-size: 1.3rem; }
            .tab-pane p, .tab-pane ul, .tab-pane ol { font-size: 0.92rem; }

            .btn-custom,
            .subscription-plan .btn-select-plan,
            #payment-form button[type="submit"],
            #waste-form button[type="submit"],
            .auth-view button[type="submit"],
            .profile-view button[type="submit"],
            .btn-read-more, .btn-view-idea, .btn-learn-more {
                padding: 0.85rem 1.6rem;
                font-size: 0.92rem;
            }
            .offcanvas-title { font-size: 1.25rem; }
             #user-auth-section .btn-sign-in { font-size: 0.82rem; padding: 0.45rem 0.9rem; }
             #user-auth-section .profile-dropdown img { width: 38px; height: 38px;}
             .guide-category-grid, .upcycling-gallery, .blog-grid { grid-template-columns: 1fr; } /* Single column for cards on smallest screens */
        }

        /* --- Print Styles (Basic) --- */
        @media print {
            body {
                background: #fff !important; /* White background for printing */
                color: #000 !important; /* Black text */
                font-size: 12pt;
            }
            header, footer, .main-nav-wrapper-container, .mobile-nav-toggle, .dark-mode-toggle-container,
            .btn, .subscription-plan, .auth-view, .profile-view, #payment-view, .spinner-container,
            .scroll-animate, #user-auth-section .profile-dropdown, .offcanvas, .modal {
                display: none !important; /* Hide non-essential elements */
            }
            .view.active, .tab-content-wrapper, .tab-pane.active {
                display: block !important;
                box-shadow: none !important;
                border: none !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            a { text-decoration: underline; color: #000 !important; }
            a[href^="#"]::after { content: " (Internal Link)"; }
            a[href^="http"]::after { content: " (" attr(href) ")"; }
            img { max-width: 100% !important; page-break-inside: avoid; }
            h1, h2, h3, h4, h5, h6 { color: #000 !important; page-break-after: avoid; }
        }

    </style>
</head>

<body>
    <header>
        <div class="header-main-content">
            <button class="mobile-nav-toggle" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileNav" aria-controls="mobileNav" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <div class="header-logo-container">
                <a href="#home" id="logoLinkToHome" style="text-decoration: none; display: flex; align-items: center; gap: 0.7rem;">
                    <img src="assets/logo.png" alt="RecycLearner Logo" class="logo-img" onerror="this.src='https://placehold.co/55x55/007bff/ffffff?text=RL'; this.style.border='1px solid #ccc';">
                    <div>
                        <h1 class="logo-title">
                            <span class="recyc">Recyc</span><span class="learner">Learner</span>
                        </h1>
                    </div>
                </a>
            </div>
        </div>
        <div class="d-flex align-items-center">
            <div class="dark-mode-toggle-container">
                <label class="dark-mode-switch">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="dark-mode-slider">
                        <i class="fas fa-moon"></i>
                        <i class="fas fa-sun"></i>
                    </span>
                </label>
            </div>
            <div id="user-auth-section">
                </div>
        </div>
    </header>

    <!--
    <div id="main-nav-wrapper-container">
        <nav class="main-nav-wrapper" aria-label="Main navigation">
            <ul class="nav nav-pills" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="about-tab-btn" data-bs-toggle="tab" data-bs-target="#about-tab-pane" type="button" role="tab" aria-controls="about-tab-pane" aria-selected="true"><i class="fas fa-info-circle"></i>About Us</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="mission-tab-btn" data-bs-toggle="tab" data-bs-target="#mission-tab-pane" type="button" role="tab" aria-controls="mission-tab-pane" aria-selected="false"><i class="fas fa-seedling"></i>Our Mission</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="how-it-works-tab-btn" data-bs-toggle="tab" data-bs-target="#how-it-works-tab-pane" type="button" role="tab" aria-controls="how-it-works-tab-pane" aria-selected="false"><i class="fas fa-lightbulb"></i>How It Works</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="recycling-guides-tab-btn" data-bs-toggle="tab" data-bs-target="#recycling-guides-tab-pane" type="button" role="tab" aria-controls="recycling-guides-tab-pane" aria-selected="false"><i class="fas fa-book-open"></i>Recycling Guides</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="upcycling-hub-tab-btn" data-bs-toggle="tab" data-bs-target="#upcycling-hub-tab-pane" type="button" role="tab" aria-controls="upcycling-hub-tab-pane" aria-selected="false"><i class="fas fa-recycle"></i>Upcycling Hub</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="ai-helper-tab-btn" data-bs-toggle="tab" data-bs-target="#ai-helper-tab-pane" type="button" role="tab" aria-controls="ai-helper-tab-pane" aria-selected="false"><i class="fas fa-microchip"></i>AI Helper</button>
                </li>
                 <li class="nav-item" role="presentation">
                    <button class="nav-link" id="eco-blog-tab-btn" data-bs-toggle="tab" data-bs-target="#eco-blog-tab-pane" type="button" role="tab" aria-controls="eco-blog-tab-pane" aria-selected="false"><i class="fas fa-newspaper"></i>EcoBlog</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="community-central-tab-btn" data-bs-toggle="tab" data-bs-target="#community-central-tab-pane" type="button" role="tab" aria-controls="community-central-tab-pane" aria-selected="false"><i class="fas fa-users"></i>Community</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="faq-tab-btn" data-bs-toggle="tab" data-bs-target="#faq-tab-pane" type="button" role="tab" aria-controls="faq-tab-pane" aria-selected="false"><i class="fas fa-question-circle"></i>FAQ</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="plans-tab-btn" data-bs-toggle="tab" data-bs-target="#plans-tab-pane" type="button" role="tab" aria-controls="plans-tab-pane" aria-selected="false"><i class="fas fa-star"></i>Our Plans</button>
                </li>
            </ul>
        </nav>
    </div>
    -->

    <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileNav" aria-labelledby="mobileNavLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="mobileNavLabel"><img src="assets/logo.png" alt="RecycLearner" style="height: 28px; margin-right: 10px; vertical-align: middle;" onerror="this.src='https://placehold.co/28x28/007bff/ffffff?text=RL';"><span class="recyc">Recyc</span><span class="learner">Learner</span></h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <nav class="offcanvas-body" aria-label="Mobile navigation">
            <ul class="nav flex-column">
                <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#about-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-info-circle"></i>About Us</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#mission-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-seedling"></i>Our Mission</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#how-it-works-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-lightbulb"></i>How It Works</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#recycling-guides-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-book-open"></i>Recycling Guides</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#upcycling-hub-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-recycle"></i>Upcycling Hub</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#ai-helper-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-microchip"></i>AI Helper</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#eco-blog-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-newspaper"></i>EcoBlog</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#community-central-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-users"></i>Community</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#faq-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-question-circle"></i>FAQ</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#plans-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-star"></i>Our Plans</button></li>
            </ul>
        </nav>
    </div>

    <div class="container mt-3">
        <div id="main-content-tabs-view" class="view active tab-content-wrapper">
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="about-tab-pane" role="tabpanel" aria-labelledby="about-tab-btn">
                    <article>
                        <h2 class="section-title">Welcome to RecycLearner: Your AI Recycling Companion</h2>
                        <img src="https://placehold.co/800x400/28a745/ffffff?text=Our+Team+Working+Sustainably" alt="RecycLearner Team" class="img-fluid rounded mb-4 shadow-sm about-intro-image">
                        <p class="lead">At RecycLearner, we're passionately simplifying the often-confusing world of waste management, transforming it into an engaging, educational, and impactful journey towards sustainability. Our state-of-the-art intelligent platform masterfully leverages cutting-edge Artificial Intelligence to furnish you with exceptionally clear, actionable, and personalized guidance on both recycling best practices and innovative upcycling projects. We champion the fundamental belief that sustainable living should be an accessible and empowering endeavor for everyone, enabling individuals, families, and businesses alike to forge a tangible, positive difference for our precious planet.</p>
                        <p>Founded in 2023 in the vibrant city of Dubai, UAE, RecycLearner was born from a shared vision: to harness technology for a greener future. Our diverse team of environmental scientists, AI engineers, UX designers, and sustainability advocates are united by a common goal – to make responsible waste management intuitive and rewarding. We understand the challenges: confusing local regulations, uncertainty about material types, and a desire to do more but not knowing where to start. RecycLearner is our answer.</p>
                        <p>We invite you to reimagine 'waste' not as a finality, but as a dormant resource brimming with untapped potential, eagerly awaiting its renaissance. RecycLearner is meticulously engineered and continuously refined to assist you in unlocking this vast, often overlooked, potential. Whether you find yourself puzzling over the correct disposal method for a specific item, seeking ingenious and creative ways to breathe vibrant new life into old materials, or are resolutely striving to minimize your overall environmental footprint, our sophisticated AI is your dedicated, ever-learning assistant. Become an integral part of our rapidly growing, vibrant community of eco-conscious innovators, forward-thinkers, and proactive change-makers. Let's collaboratively and enthusiastically build a more sustainable, resilient, and verdant future, one thoughtfully recycled or creatively upcycled item at a time. Your actions, amplified by knowledge, create ripples of positive change.</p>

                        <h3 class="section-subtitle mt-5">Our Core Values</h3>
                        <ul>
                            <li><strong>Innovation for Impact:</strong> We continuously explore and integrate the latest AI advancements to provide the most effective and user-friendly solutions.</li>
                            <li><strong>Education & Empowerment:</strong> Knowledge is key. We strive to educate our users, empowering them to make confident, eco-conscious decisions.</li>
                            <li><strong>Accessibility & Inclusivity:</strong> Sustainable practices should be for everyone. Our platform is designed to be intuitive and accessible to a global audience.</li>
                            <li><strong>Collaboration & Community:</strong> We believe in the power of collective action and aim to foster a supportive community dedicated to environmental stewardship.</li>
                            <li><strong>Transparency & Trust:</strong> We are committed to providing accurate information and being transparent about our processes and data handling.</li>
                        </ul>
                        <!--
                         <h3 class="section-subtitle mt-5">Meet the (Mock) Team</h3>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="team-member-card">
                                    <img src="https://placehold.co/100x100/007bff/ffffff?text=CEO" alt="CEO">
                                    <strong>Dr. Anya Sharma</strong><br><small>CEO & Chief Environmentalist</small>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="team-member-card">
                                     <img src="https://placehold.co/100x100/28a745/ffffff?text=CTO" alt="CTO">
                                    <strong>Ben Carter</strong><br><small>CTO & AI Architect</small>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                 <div class="team-member-card">
                                     <img src="https://placehold.co/100x100/ffc107/1a202c?text=UX" alt="UX Lead">
                                    <strong>Chloe Davis</strong><br><small>Head of UX & Community</small>
                                 </div>
                            </div>
                        </div>
                        -->
                    </article>
                </div>
                <div class="tab-pane fade" id="mission-tab-pane" role="tabpanel" aria-labelledby="mission-tab-btn">
                    <article>
                        <h2 class="section-title">Our Mission: A Greener Planet Through Smart Technology & Shared Knowledge</h2>
                        <img src="https://placehold.co/800x400/0056b3/ffffff?text=Global+Sustainability+Efforts" alt="Global Sustainability" class="img-fluid rounded mb-4 shadow-sm">
                        <p class="lead">RecycLearner is propelled by a profound and unwavering commitment to comprehensive environmental stewardship and the promotion of a truly circular economy. We aspire to be a dynamic and influential catalyst for positive, sustainable change by equipping our users worldwide with the critical knowledge, practical tools, and inspiring ideas necessary for responsible, innovative, and effective waste management. Our foundational pillars are built upon:</p>
                        <div class="mission-icon-grid">
                            <div class="mission-icon-item scroll-animate">
                                <i class="fas fa-lightbulb"></i>
                                <h4>Empowering Informed Action</h4>
                                <p>Delivering exceptionally precise, AI-driven recycling and upcycling instructions tailored to your specific items and location, designed to dramatically reduce landfill burdens and conserve resources.</p>
                            </div>
                            <div class="mission-icon-item scroll-animate" style="animation-delay: 0.1s;">
                                <i class="fas fa-cogs"></i>
                                <h4>Pioneering Eco-Innovation</h4>
                                <p>Relentlessly enhancing our AI algorithms and platform features to consistently offer the most advanced, intuitive, and user-friendly sustainability solutions.</p>
                            </div>
                            <div class="mission-icon-item scroll-animate" style="animation-delay: 0.2s;">
                                <i class="fas fa-graduation-cap"></i>
                                <h4>Fostering Eco-Literacy</h4>
                                <p>Passionately educating users on the circular economy, material lifecycles, and the profound power of individual and collective sustainable choices.</p>
                            </div>
                             <div class="mission-icon-item scroll-animate" style="animation-delay: 0.3s;">
                                <i class="fas fa-globe-americas"></i>
                                <h4>Cultivating Global Collaboration</h4>
                                <p>Uniting individuals, households, and organizations in a shared mission to protect and restore our global environment for current and future generations.</p>
                            </div>
                        </div>
                        <p class="mt-4">We ardently believe that technology, when thoughtfully designed and ethically guided by a clear, altruistic purpose, possesses the extraordinary power to address some of our world's most pressing and complex environmental challenges. Your active engagement with RecycLearner is not merely a personal act but a direct and meaningful contribution to a healthier, more vibrant planet and a more sustainable, equitable, and fulfilling way of life for all. Together, we can learn, adapt, and innovate for a brighter, greener tomorrow. We are dedicated to continuously expanding our knowledge base, incorporating regional recycling nuances, and partnering with local authorities and eco-organizations to provide the most relevant and actionable advice possible.</p>
                    </article>
                </div>
                <div class="tab-pane fade" id="how-it-works-tab-pane" role="tabpanel" aria-labelledby="how-it-works-tab-btn">
                    <article>
                        <h2 class="section-title">Unlock Recycling Wisdom in 3 Simple Steps</h2>
                        <p class="lead">RecycLearner demystifies your journey to effective sustainable waste management through an elegant, intuitive, and AI-powered process. Discover how to effortlessly transform your everyday waste items from potential pollutants into valuable resources, contributing to a healthier planet with every informed decision:</p>
                        <div class="row g-4 g-lg-5 mt-4 align-items-stretch">
                            <div class="col-md-4 d-flex scroll-animate">
                                <div class="text-center p-4 p-lg-5 border rounded-3 shadow-sm bg-white h-100">
                                    <i class="fas fa-camera-retro fa-3x text-primary-blue mb-3"></i>
                                    <h4>1. Submit Your Item</h4>
                                    <p>Simply upload a clear, well-lit photograph of the waste item in question, or provide a concise yet detailed text description. The more specific information you can share with our AI, the more accurate and helpful its guidance will be!</p>
                                </div>
                            </div>
                            <div class="col-md-4 d-flex scroll-animate" style="animation-delay: 0.15s;">
                                <div class="text-center p-4 p-lg-5 border rounded-3 shadow-sm bg-white h-100">
                                    <i class="fas fa-robot fa-3x text-primary-green mb-3"></i>
                                    <h4>2. AI Magic Happens</h4>
                                    <p>Our sophisticated, custom-trained Gemini-powered AI instantly springs into action, meticulously processing your submission. It identifies materials, cross-references vast databases for recyclability, and uncovers exciting, creative upcycling potential.</p>
                                </div>
                            </div>
                            <div class="col-md-4 d-flex scroll-animate" style="animation-delay: 0.3s;">
                                 <div class="text-center p-4 p-lg-5 border rounded-3 shadow-sm bg-white h-100">
                                    <i class="fas fa-directions fa-3x text-accent-orange mb-3"></i>
                                    <h4>3. Get Clear Guidance</h4>
                                    <p>Within moments, you'll receive personalized, easy-to-understand, and actionable instructions. This includes steps for correct recycling preparation, innovative upcycling project ideas, and crucial safe disposal methods.</p>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4 pt-3 border-top">From common everyday packaging like plastics, paper, and glass, to more complex and often confusing items such as electronics, textiles, and mixed materials, RecycLearner is your dedicated, intelligent AI partner. We empower you to make informed, eco-friendly choices with unwavering confidence, every single day. <strong>Your first AI analysis is on us! Try it in the "AI Helper" tab.</strong></p>
                    </article>
                </div>

                <div class="tab-pane fade" id="recycling-guides-tab-pane" role="tabpanel" aria-labelledby="recycling-guides-tab-btn">
                    <article>
                        <h2 class="section-title">Comprehensive Recycling Guides</h2>
                        <p class="lead">Navigate the world of recycling with ease. Our detailed guides cover a wide range of materials, helping you understand what can be recycled, how to prepare items, and their environmental impact.</p>
                        <div id="guide-category-grid-container" class="guide-category-grid">
                            </div>
                    </article>
                </div>

                <div class="tab-pane fade" id="upcycling-hub-tab-pane" role="tabpanel" aria-labelledby="upcycling-hub-tab-btn">
                    <article>
                        <h2 class="section-title">Upcycling Hub: Transform Trash into Treasure!</h2>
                        <p class="lead">Discover creative ways to give old items new life. Browse our collection of upcycling projects, from simple crafts to ambitious DIYs, and reduce waste while unleashing your creativity.</p>
                        <div class="filter-controls row g-3 align-items-end">
                            <div class="col-md-4">
                                <label for="upcyclingSearchInput" class="form-label">Search Projects:</label>
                                <input type="text" id="upcyclingSearchInput" class="form-control" placeholder="e.g., plastic bottles, old t-shirts">
                            </div>
                            <div class="col-md-3">
                                <label for="upcyclingDifficultyFilter" class="form-label">Difficulty:</label>
                                <select id="upcyclingDifficultyFilter" class="form-select">
                                    <option value="all">All Difficulties</option>
                                    <option value="easy">Easy</option>
                                    <option value="medium">Medium</option>
                                    <option value="hard">Hard</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="upcyclingMaterialFilter" class="form-label">Main Material:</label>
                                <select id="upcyclingMaterialFilter" class="form-select">
                                    <option value="all">All Materials</option>
                                    </select>
                            </div>
                            <div class="col-md-2">
                                <button id="applyUpcyclingFilters" class="btn btn-primary w-100">Filter</button>
                            </div>
                        </div>
                        <div id="upcycling-gallery-container" class="upcycling-gallery mt-4">
                            </div>
                    </article>
                </div>

                <div class="tab-pane fade" id="ai-helper-tab-pane" role="tabpanel" aria-labelledby="ai-helper-tab-btn">
                    <article>
                        <h2 class="section-title"><i class="fas fa-microchip text-primary-blue me-2"></i>AI Recycle Helper: Get Instant Advice!</h2>
                        <p class="lead">Unsure how to handle a specific waste item? Don't let it end up in a landfill by mistake! Let our advanced Gemini-powered AI analyze it for you. Provide an image or describe the item in detail, and our system will furnish you with tailored recycling insights, upcycling suggestions, and safe disposal alternatives where applicable. <strong>Remember, every user gets one complimentary AI analysis to experience the power of RecycLearner!</strong></p>
                        <div id="ai-trial-message" class="alert alert-info mt-3 fs-small" style="display: none;"></div>
                        <form id="waste-form" class="mt-4 pt-3 border-top">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="waste-image" class="form-label"><i class="fas fa-image me-2"></i>Upload an Image (Optional)</label>
                                    <input type="file" class="form-control form-control-lg" id="waste-image" name="waste-image" accept="image/jpeg, image/png, image/webp, image/heic">
                                     <div class="form-text mt-1">Clear, well-lit photos of a single item work best. Max file size: 4MB.</div>
                                     <div id="waste-image-preview-container" class="mt-2">
                                         <img id="waste-image-preview" src="#" alt="Image Preview" />
                                     </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="waste-description" class="form-label"><i class="fas fa-pencil-alt me-2"></i>Describe Your Waste Material</label>
                                    <textarea class="form-control form-control-lg" id="waste-description" name="waste-description" rows="6"
                                        placeholder="e.g., Empty plastic milk jug (HDPE #2, white, with cap), old iPhone 8 (cracked screen), stained cotton t-shirt (blue). The more details, the better!"></textarea>
                                    <div class="form-text mt-1">Include material type, color, any labels or symbols, brand (if relevant), and condition.</div>
                                </div>
                            </div>
                            <div class="text-center mt-4">
                                <button type="submit" class="btn-custom btn-lg" id="get-insights-button"><i class="fas fa-lightbulb me-2"></i>✨ Get AI Recycling Insights</button>
                            </div>
                        </form>
                        <div class="spinner-container mt-4" id="loading-spinner">
                            <div class="d-flex align-items-center justify-content-center">
                                <div class="spinner-border me-3" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                <p class="mb-0">Our AI is meticulously analyzing your item... Please wait a moment!</p>
                            </div>
                        </div>
                    </article>
                </div>

                <div class="tab-pane fade" id="eco-blog-tab-pane" role="tabpanel" aria-labelledby="eco-blog-tab-btn">
                    <article>
                        <h2 class="section-title">EcoBlog: Insights & Inspiration</h2>
                        <p class="lead">Stay informed and inspired with our latest articles on sustainability, recycling innovations, eco-friendly living tips, and RecycLearner news.</p>
                         <div class="blog-filters mb-4">
                            <input type="text" id="blogSearchInput" class="form-control w-50" placeholder="Search articles...">
                            <select id="blogCategoryFilter" class="form-select w-auto">
                                <option value="all">All Categories</option>
                                </select>
                        </div>
                        <div id="eco-blog-grid-container" class="blog-grid">
                            </div>
                    </article>
                </div>

                <div class="tab-pane fade" id="community-central-tab-pane" role="tabpanel" aria-labelledby="community-central-tab-btn">
                    <article>
                        <h2 class="section-title">Community Central: Connect & Share</h2>
                        <div class="community-intro">
                            <p class="lead">Join a vibrant community of eco-conscious individuals! Share your recycling successes, ask questions, and learn from others on their sustainability journey. (This is a conceptual mock-up)</p>
                            <button class="btn-custom btn-lg"><i class="fas fa-plus-circle me-2"></i>Post a New Topic (Mock)</button>
                        </div>

                        <div class="community-section">
                            <h4><i class="fas fa-star me-2 text-warning"></i>Featured Success Stories</h4>
                            <div id="success-stories-container">
                                </div>
                        </div>

                        <div class="community-section">
                            <h4><i class="fas fa-comments me-2 text-info"></i>Recent Forum Discussions (Mock)</h4>
                            <div id="forum-discussions-container">
                                </div>
                        </div>
                    </article>
                </div>

                <div class="tab-pane fade" id="faq-tab-pane" role="tabpanel" aria-labelledby="faq-tab-btn">
                    <article>
                        <h2 class="section-title">Frequently Asked Questions</h2>
                        <p class="lead">Find answers to common questions about recycling, upcycling, using RecycLearner, and our subscription plans. If you can't find your answer here, feel free to contact us!</p>
                        <div class="faq-search-filter input-group mb-4">
                            <span class="input-group-text"><i class="fas fa-search"></i></span>
                            <input type="text" id="faqSearchInput" class="form-control form-control-lg" placeholder="Search FAQs...">
                        </div>
                        <div class="accordion" id="faqAccordionContainer">
                            </div>
                    </article>
                </div>

                <div class="tab-pane fade" id="plans-tab-pane" role="tabpanel" aria-labelledby="plans-tab-btn">
                    <article id="subscription-plans">
                        <h2 class="section-title">Supercharge Your Sustainability: Choose Your Plan</h2>
                        <p class="lead">Elevate your eco-impact with features designed for every level of commitment. All paid plans come with a <strong>7-day free trial!</strong> After your initial complimentary AI analysis, a subscription is required for unlimited AI insights.</p>
                        <div class="row justify-content-center">
                            <div class="col-lg-4 col-md-6 mb-4 d-flex align-items-stretch scroll-animate">
                                <div class="subscription-plan">
                                    <div>
                                        <i class="fas fa-leaf plan-icon"></i>
                                        <h3>Starter Spark</h3>
                                        <p class="text-muted small mb-3">Perfect for individuals beginning their eco-journey.</p>
                                        <ul class="plan-features">
                                            <li>Standard AI Waste Analysis (10 queries/month after trial)</li>
                                            <li>Access to Core Recycling Guides</li>
                                            <li>Basic Personal Impact Tracking</li>
                                            <li>Community Forum Access</li>
                                            <li>Email Support</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="plan-price">$9.99<small>/year</small></p>
                                        <button class="btn-select-plan w-100" id="selectStarterPlanBtn"><i class="fas fa-check-circle"></i> Start Free Trial</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6 mb-4 d-flex align-items-stretch scroll-animate" style="animation-delay: 0.15s;">
                                <div class="subscription-plan popular-plan">
                                     <span class="badge popular-badge"><i class="fas fa-fire me-1"></i>Most Popular</span>
                                    <div>
                                        <i class="fas fa-recycle plan-icon"></i>
                                        <h3>Eco Pro</h3>
                                        <p class="text-muted small mb-3">For dedicated recyclers and eco-conscious households.</p>
                                        <ul class="plan-features">
                                            <li><strong>Unlimited</strong> Advanced AI Waste Analysis</li>
                                            <li>✨ Access to Exclusive Upcycling Project Library</li>
                                            <li>Detailed Personal & Household Impact Reporting</li>
                                            <li>Priority Email & Live Chat Support</li>
                                            <li>Early Access to New AI Features</li>
                                            <li>Downloadable Recycling Cheat Sheets</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="plan-price">$19.99<small>/year</small></p>
                                        <button class="btn-select-plan w-100" id="selectEcoProPlanBtn"><i class="fas fa-star"></i> Start Free Trial</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6 mb-4 d-flex align-items-stretch scroll-animate" style="animation-delay: 0.3s;">
                                <div class="subscription-plan">
                                    <div>
                                        <i class="fas fa-building-shield plan-icon"></i>
                                        <h3>Green Business</h3>
                                        <p class="text-muted small mb-3">Tailored for businesses committed to sustainability.</p>
                                         <ul class="plan-features">
                                            <li>Customized AI Model Integration Options</li>
                                            <li>Bulk Waste Auditing & Analysis Tools</li>
                                            <li>Comprehensive Sustainability Dashboards</li>
                                            <li>Dedicated Account Management</li>
                                            <li>Team Collaboration Features</li>
                                            <li>API Access for Integrations (Add-on)</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="plan-price">Custom Pricing</p>
                                        <button class="btn-select-plan btn-contact w-100" id="contactSalesPlanBtn"><i class="fas fa-handshake"></i> Contact Sales</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="text-center mt-4 text-muted small">All prices are in USD. Subscription automatically renews yearly after the trial period unless canceled. You can cancel anytime.</p>
                    </article>
                </div>
            </div>
        </div>

        <div id="payment-view" class="view">
            <h2 class="section-title">Secure Checkout: <span id="selected-plan-name-title" class="text-primary-blue">Your Plan</span></h2>
            <p id="selected-plan-description" class="text-muted mb-4">You're just a step away from unlocking powerful recycling tools!</p>
            <form id="payment-form">
                <input type="hidden" id="selected-plan-value" name="selected-plan-value">
                <div class="alert alert-success d-flex align-items-center shadow-sm mb-4" role="alert">
                    <i class="fas fa-shield-alt fa-2x me-3 text-success"></i>
                    <div>
                        <strong>Start Your 7-Day Free Trial!</strong> You will not be charged today.
                        Your selected plan: <strong id="selected-plan-price-info" class="text-success">$0.00/year</strong>.
                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col-md-12 mb-3">
                        <label for="cardholder-name" class="form-label">Cardholder Name</label>
                        <input type="text" class="form-control form-control-lg" id="cardholder-name" placeholder="Full Name as on Card" required autocomplete="cc-name">
                    </div>
                </div>
                <div class="mb-3">
                    <label for="card-number" class="form-label">Card Number</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-credit-card"></i></span>
                        <input type="text" class="form-control form-control-lg" id="card-number" placeholder="•••• •••• •••• ••••" required pattern="\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}" title="Enter a valid 16-digit card number" autocomplete="cc-number">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-7 mb-3 mb-md-0">
                        <label for="expiry-date" class="form-label">Expiry Date</label>
                        <input type="text" class="form-control form-control-lg" id="expiry-date" placeholder="MM / YY" required pattern="(0[1-9]|1[0-2])\s?\/\s?\d{2}" title="Enter date as MM / YY" autocomplete="cc-exp">
                    </div>
                    <div class="col-md-5">
                        <label for="cvv" class="form-label">CVV/CVC</label>
                        <input type="text" class="form-control form-control-lg" id="cvv" placeholder="•••" required pattern="\d{3,4}" title="Enter 3 or 4 digit CVV" autocomplete="cc-csc">
                    </div>
                </div>
                <div class="mb-4">
                    <label for="billing-email" class="form-label">Billing Email Address</label>
                     <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                        <input type="email" class="form-control form-control-lg" id="billing-email" placeholder="you@example.com" required autocomplete="email">
                    </div>
                </div>
                 <div class="form-check mb-4">
                    <input class="form-check-input" type="checkbox" value="" id="termsCheck" required>
                    <label class="form-check-label" for="termsCheck">
                        I have read and agree to the RecycLearner <a href="#" onclick="showInfoModal('Terms and Conditions', 'This is placeholder text for RecycLearner\'s Terms and Conditions... Users must agree to these terms to proceed.')">Terms and Conditions</a> and acknowledge the 7-day free trial.
                    </label>
                </div>
                <div class="text-center">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-lock me-2"></i>Activate My Free Trial Now</button>
                </div>
                 <div class="text-center mt-3">
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="backToHomeFromPayment"><i class="fas fa-arrow-left"></i> Back to Plans</button>
                </div>
            </form>
        </div>

        <div id="signin-view" class="view auth-view">
            <h2 class="section-title"><i class="fas fa-sign-in-alt me-2 text-primary-blue"></i>Sign In to RecycLearner</h2>
            <p class="text-muted mb-4">Welcome back! Access your account to continue your sustainability journey.</p>
            <form id="signin-form">
                <div class="mb-3">
                    <label for="signin-email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="signin-email" placeholder="you@example.com" required autocomplete="email">
                </div>
                <div class="mb-3">
                    <label for="signin-password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="signin-password" placeholder="Enter your password" required autocomplete="current-password">
                </div>
                <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-paper-plane"></i> Sign In</button>
                    <button type="button" class="btn-custom btn-lg btn-google" onclick="showInfoModal('Feature Not Implemented', 'Sign in with Google is not yet available.', false)"><i class="fab fa-google"></i> Sign In with Google</button>
                </div>
            </form>
            <p class="text-center mt-4">
                Don't have an account? <a href="#sign-up" id="navigateToSignUp" class="btn-link-custom">Create one here!</a>
            </p>
        </div>

        <div id="signup-view" class="view auth-view">
            <h2 class="section-title"><i class="fas fa-user-plus me-2 text-primary-green"></i>Create Your Account</h2>
            <p class="text-muted mb-4">Join our community, start your free AI trial, and impact the planet!</p>
            <form id="signup-form">
                <div class="mb-3">
                    <label for="signup-username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="signup-username" placeholder="Choose a unique username" required autocomplete="username">
                </div>
                <div class="mb-3">
                    <label for="signup-fullname" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="signup-fullname" placeholder="Enter your full name" required autocomplete="name">
                </div>
                <div class="mb-3">
                    <label for="signup-email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="signup-email" placeholder="you@example.com" required autocomplete="email">
                </div>
                <div class="mb-3">
                    <label for="signup-password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="signup-password" placeholder="Create a strong password (min. 6 characters)" required minlength="6" autocomplete="new-password">
                </div>
                 <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-check-circle"></i> Sign Up & Start Trial</button>
                    <button type="button" class="btn-custom btn-lg btn-google" onclick="showInfoModal('Feature Not Implemented', 'Sign up with Google is not yet available.', false)"><i class="fab fa-google"></i> Sign Up with Google</button>
                </div>
            </form>
            <p class="text-center mt-4">
                Already have an account? <a href="#sign-in" id="navigateToSignIn" class="btn-link-custom">Sign in here!</a>
            </p>
        </div>

        <div id="profile-view" class="view profile-view">
            <h2 class="section-title"><i class="fas fa-id-card me-2 text-primary-blue"></i>Manage Your Profile</h2>
            <p class="text-muted mb-4">Keep your information up to date and manage your RecycLearner experience.</p>
            <form id="profile-form">
                <div class="profile-picture-wrapper">
                    <img src="assets/logo.png" alt="Profile Picture" id="profile-view-image" class="profile-picture" onerror="this.src='https://placehold.co/140x140/007bff/ffffff?text=User';">
                    <input type="file" id="profile-pic-upload-input" accept="image/*" style="display: none;">
                    <button type="button" class="btn btn-sm btn-outline-secondary mt-2" id="uploadProfilePicButton"><i class="fas fa-camera"></i> Upload New Picture</button>
                </div>
                <div class="mb-3">
                    <label for="profile-username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="profile-username" readonly>
                </div>
                <div class="mb-3">
                    <label for="profile-fullname" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="profile-fullname" autocomplete="name">
                </div>
                <div class="mb-3">
                    <label for="profile-email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="profile-email" readonly>
                </div>
                <div class="mb-3">
                    <label for="profile-new-password" class="form-label">New Password (Optional)</label>
                    <input type="password" class="form-control" id="profile-new-password" placeholder="Enter new password to change (min. 6 characters)" minlength="6" autocomplete="new-password">
                </div>
                <div class="d-grid mt-4">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-save"></i> Save Changes</button>
                </div>
            </form>
            <div class="profile-stats mt-5">
                <h5><i class="fas fa-chart-line me-2"></i>Your Eco Impact (Mock Stats)</h5>
                <div class="row">
                    <div class="col-md-4">
                        <div class="stat-item">
                            <span class="stat-value" id="statItemsRecycled">0</span>
                            <span class="stat-label">Items Recycled</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="stat-item">
                            <span class="stat-value" id="statCo2Saved">0 kg</span>
                            <span class="stat-label">CO2 Saved (Est.)</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="stat-item">
                            <span class="stat-value" id="statUpcycledProjects">0</span>
                            <span class="stat-label">Upcycled Projects</span>
                        </div>
                    </div>
                </div>
                 <h5><i class="fas fa-user-cog me-2"></i>Subscription Details (Mock)</h5>
                 <div id="profile-subscription-details" class="mt-3 p-3 border rounded bg-light-subtle border-light-subtle">
                    </div>
            </div>
             <div class="text-center mt-4">
                <button type="button" class="btn btn-outline-secondary" id="backToMainFromProfile"><i class="fas fa-arrow-left"></i> Back to Main Site</button>
            </div>
        </div>

    </div> <footer class="scroll-animate">
        <div class="container">
            <img src="assets/logo.png" alt="RecycLearner Small Logo" style="height: 45px; margin-bottom: 15px; opacity: 0.8;" onerror="this.src='https://placehold.co/45x45/007bff/ffffff?text=RL';">
            <p>&copy; <span id="currentYear"></span> <span style="color: var(--primary-blue);">Recyc</span><span style="color: var(--primary-green);">Learner</span>. All Rights Reserved.
            <br>Pioneering AI for a Sustainable Planet. Dubai, UAE. <span id="currentLocationDisplay" class="d-block small mt-1"></span></p>
            <div class="footer-links">
                <a href="#home">Home</a> |
                <a href="#" onclick="showInfoModal('Privacy Policy', 'Placeholder for Privacy Policy content. This site uses local storage for mock user data and preferences. No data is sent to external servers beyond the AI API call for recycling analysis.')">Privacy Policy</a> |
                <a href="#" onclick="showInfoModal('Terms of Service', 'Placeholder for Terms of Service content. Use of this demonstration website is subject to acceptance of these mock terms.')">Terms of Service</a> |
                <a href="#faq-tab-pane" class="footer-faq-link">FAQ</a>
            </div>
            <div class="social-icons mt-3">
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="infoModalLabel"><i class="fas fa-info-circle me-2"></i>RecycLearner Notification</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="infoModalBody" style="max-height: 75vh; overflow-y: auto;">
            </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal"><i class="fas fa-thumbs-up me-2"></i>Got it!</button>
          </div>
        </div>
      </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // --- DOMContentLoaded: Main script execution start ---
        document.addEventListener('DOMContentLoaded', function() {
            // --- Initial Setup & Global Variables ---
            console.log("RecycLearner App Initializing - Version 2.0 (Expanded)");
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            // Mock current location (can be dynamic if needed)
            const mockLocation = "Dubai, UAE"; // Example
            const locationDisplay = document.getElementById('currentLocationDisplay');
            if(locationDisplay) locationDisplay.textContent = `Serving from: ${mockLocation}`;


            const views = document.querySelectorAll('.view');
            const userAuthSection = document.getElementById('user-auth-section');
            // const mainNavWrapperContainer = document.getElementById('main-nav-wrapper-container'); // No longer needed as horizontal nav is removed
            const mobileNavToggle = document.querySelector('.mobile-nav-toggle');
            const logoLinkToHome = document.getElementById('logoLinkToHome');
            const darkModeToggle = document.getElementById('darkModeToggle');

            // --- Client-Side Routing Configuration ---
            const routes = {
                'home': 'main-content-tabs-view', // Default view, shows tabs
                'profile': 'profile-view',
                'sign-up': 'signup-view',
                'sign-in': 'signin-view',
                'checkout': 'payment-view'
                // New top-level views can be added here if not part of the main tab system
            };
            // Reverse mapping for setting hash based on view ID
            const viewToHashMapping = Object.fromEntries(Object.entries(routes).map(([key, value]) => [value, key]));

            // --- Dark Mode Functionality ---
            const LS_DARK_MODE_KEY = 'recyclearner_dark_mode_pref_v2';
            function applyDarkModePreference() {
                const isDarkMode = localStorage.getItem(LS_DARK_MODE_KEY) === 'true';
                if (darkModeToggle) darkModeToggle.checked = isDarkMode;
                document.body.classList.toggle('dark-mode', isDarkMode);
                console.log(`Dark mode applied: ${isDarkMode}`);
            }

            if (darkModeToggle) {
                darkModeToggle.addEventListener('change', () => {
                    localStorage.setItem(LS_DARK_MODE_KEY, darkModeToggle.checked);
                    document.body.classList.toggle('dark-mode', darkModeToggle.checked);
                    console.log(`Dark mode toggled: ${darkModeToggle.checked}`);
                });
            }
            applyDarkModePreference(); // Apply on initial load

            // --- View Management ---
            // Function to navigate to a specific view (e.g., sign-in, profile, or main tabs)
            function navigateToView(viewId, updateBrowserHash = true) {
                console.log(`Navigating to view: ${viewId}`);
                views.forEach(v => v.classList.remove('active')); // Hide all views
                const targetView = document.getElementById(viewId);

                if (targetView) {
                    targetView.classList.add('active'); // Show the target view
                } else {
                    console.warn(`View with ID '${viewId}' not found. Defaulting to home (main tabs).`);
                    document.getElementById(routes['home'])?.classList.add('active');
                     if (updateBrowserHash) window.location.hash = 'home'; // Fallback to home hash
                }

                // Determine if the current view is an auth/profile/checkout page
                const isAuthOrSpecialView = (viewId === routes['profile'] || viewId === routes['sign-in'] || viewId === routes['sign-up'] || viewId === routes['checkout']);

                // Toggle visibility of main navigation tabs container based on view
                // Removed: mainNavWrapperContainer.classList.toggle('hidden-for-auth', isAuthOrSpecialView);
                // The horizontal nav is removed, so this specific line is no longer needed.

                // Toggle visibility of mobile navigation toggle button
                if (mobileNavToggle) {
                    mobileNavToggle.classList.toggle('hidden-for-auth', isAuthOrSpecialView);
                }

                // Update browser URL hash if required
                if (updateBrowserHash) {
                    const newHash = viewToHashMapping[viewId] || 'home'; // Default to 'home' if mapping not found
                    if (window.location.hash !== `#${newHash}`) {
                        window.location.hash = newHash;
                    }
                }

                // If navigating to the 'home' view (main tabs), ensure a default tab is active
                if (viewId === routes['home']) {
                    const defaultHomeTabButton = document.getElementById('about-tab-btn'); // Default to "About Us"
                    const activeTabInHome = document.querySelector('#myTab .nav-link.active');
                    if (defaultHomeTabButton && (!activeTabInHome || !defaultHomeTabButton.classList.contains('active'))) {
                        const tabInstance = bootstrap.Tab.getInstance(defaultHomeTabButton) || new bootstrap.Tab(defaultHomeTabButton);
                        if(tabInstance) tabInstance.show();
                    }
                }

                // Close mobile offcanvas if it's open after navigation
                const offcanvasEl = document.getElementById('mobileNav');
                if (offcanvasEl) {
                    const bsOffcanvas = bootstrap.Offcanvas.getInstance(offcanvasEl);
                    if (bsOffcanvas && offcanvasEl.classList.contains('show')) {
                        bsOffcanvas.hide();
                    }
                }
                 window.scrollTo(0, 0); // Scroll to top on view change
                 handleResize(); // Ensure nav elements correctly displayed/hidden after navigation
            }

            // Function to handle changes in the URL hash
            function handleHashChange() {
                const hash = window.location.hash.substring(1); // Get hash without '#'
                const targetViewId = routes[hash] || routes['home']; // Default to home if hash is invalid/empty
                navigateToView(targetViewId, false); // Navigate without updating hash again

                // If hash was invalid and not empty, redirect to #home
                if (!routes[hash] && hash !== '') {
                    console.warn(`Invalid hash '${hash}', redirecting to #home.`);
                    window.location.hash = 'home';
                } else if (hash === '' && (window.location.pathname.endsWith('/') || window.location.pathname.endsWith('index.html'))) {
                    // If hash is empty on base path, set to #home
                     window.location.hash = 'home';
                }
            }


            // --- Tab Management for Desktop and Mobile Navigation ---
            // This ensures that clicking a tab (desktop or mobile) correctly shows the content
            // and updates the active state for both navigation systems.
            // Note: Desktop tabs are removed, so this section will primarily manage mobile nav state.
            const desktopTabButtons = document.querySelectorAll('#myTab .nav-link'); // These are now only used for Bootstrap's tab content logic
            const mobileNavLinks = document.querySelectorAll('#mobileNav .nav-link');

            desktopTabButtons.forEach(button => {
                // Ensure Bootstrap Tab instances are created for desktop tabs
                if (button && !bootstrap.Tab.getInstance(button)) {
                    new bootstrap.Tab(button);
                }
                // When a desktop tab is shown, update mobile nav active state
                button.addEventListener('shown.bs.tab', function(event) {
                    const activeDesktopTarget = event.target.dataset.bsTarget;
                    mobileNavLinks.forEach(mobileLink => {
                        mobileLink.classList.toggle('active', mobileLink.dataset.bsTarget === activeDesktopTarget);
                    });
                    // Ensure we are on the main content view when a tab is clicked
                    if (document.getElementById('main-content-tabs-view') && !document.getElementById('main-content-tabs-view').classList.contains('active')) {
                        navigateToView(routes['home'], true); // This also updates hash to #home
                    }
                });
            });

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', function() {
                    const targetTabPaneId = this.dataset.bsTarget;
                    const correspondingDesktopButton = document.querySelector(`#myTab .nav-link[data-bs-target="${targetTabPaneId}"]`);

                    // First, ensure we are on the main content view (which handles hash)
                    navigateToView(routes['home'], true);

                    // Then, activate the corresponding desktop tab, which Bootstrap handles
                    if (correspondingDesktopButton) {
                        const tabInstance = bootstrap.Tab.getInstance(correspondingDesktopButton) || new bootstrap.Tab(correspondingDesktopButton);
                        if(tabInstance) tabInstance.show();
                    }
                });
            });

            // Logo click navigates to home view and activates the default "About Us" tab
            if(logoLinkToHome) {
                logoLinkToHome.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateToView(routes['home']); // This will also set hash to #home and activate default tab
                });
            }
            // Footer FAQ link
            document.querySelector('.footer-faq-link')?.addEventListener('click', (e) => {
                e.preventDefault();
                navigateToView(routes['home']);
                const faqTabButton = document.getElementById('faq-tab-btn');
                if (faqTabButton) {
                    const tabInstance = bootstrap.Tab.getInstance(faqTabButton) || new bootstrap.Tab(faqTabButton);
                    if(tabInstance) tabInstance.show();
                    document.getElementById('faq-tab-pane')?.scrollIntoView({ behavior: 'smooth' });
                }
            });


            // --- Payment Page Logic ---
            // Function to show payment page with details of the selected plan
            window.showPaymentPage = function(planName, planPrice, planDescription) {
                console.log(`Showing payment page for plan: ${planName}`);
                const selectedPlanNameTitle = document.getElementById('selected-plan-name-title');
                const selectedPlanDescription = document.getElementById('selected-plan-description');
                const selectedPlanPriceInfo = document.getElementById('selected-plan-price-info');
                const selectedPlanValueInput = document.getElementById('selected-plan-value');

                if(selectedPlanNameTitle) selectedPlanNameTitle.textContent = planName;
                if(selectedPlanDescription) selectedPlanDescription.textContent = planDescription;
                if(selectedPlanPriceInfo) selectedPlanPriceInfo.textContent = planPrice.replace('/year', '/year (7-day free trial)');

                const planValue = planName ? planName.toLowerCase().replace(/\s+/g, '-') : 'unknown-plan';
                if(selectedPlanValueInput) selectedPlanValueInput.value = planValue;

                navigateToView(routes['checkout']); // Navigate to the checkout view
            }
            // Event listeners for plan selection buttons
            document.getElementById('selectStarterPlanBtn')?.addEventListener('click', () => showPaymentPage('Starter Spark Plan', '$9.99/year', 'Begin your journey with essential AI recycling tools and community support.'));
            document.getElementById('selectEcoProPlanBtn')?.addEventListener('click', () => showPaymentPage('Eco Pro Plan', '$19.99/year', 'Unlock unlimited AI analysis, exclusive upcycling projects, and premium support.'));
            document.getElementById('contactSalesPlanBtn')?.addEventListener('click', () => showInfoModal('Green Business Plan Inquiry', 'We\'re excited to help your business achieve its sustainability targets! Please reach out to our enterprise team at <a href=\'mailto:biz@recyclearner.com\'>biz@recyclearner.com</a> or call us at (555) ECO-SMART for a personalized consultation and quote.'));
            // Back button on payment page
            document.getElementById('backToHomeFromPayment')?.addEventListener('click', (e) => {
                e.preventDefault();
                navigateToView(routes['home']); // Go back to main tabs
                // Optionally, re-activate the plans tab
                const plansTabButton = document.getElementById('plans-tab-btn');
                if (plansTabButton) {
                    const tabInstance = bootstrap.Tab.getInstance(plansTabButton) || new bootstrap.Tab(plansTabButton);
                    if(tabInstance) tabInstance.show();
                }
            });


            // --- Custom Modal Function ---
            // Reusable function to display messages in the universal modal
            const infoModalEl = document.getElementById('infoModal');
            const infoModal = infoModalEl ? new bootstrap.Modal(infoModalEl) : null;
            window.showInfoModal = function(title, message, isHtml = true) {
                if (!infoModal) { console.error("Info modal DOM element not found!"); return; }
                const modalTitleEl = document.getElementById('infoModalLabel');
                const modalBodyEl = document.getElementById('infoModalBody');

                if (modalTitleEl) modalTitleEl.innerHTML = title; // Set modal title (allows HTML)
                if (modalBodyEl) {
                    if (isHtml) {
                        modalBodyEl.innerHTML = message; // Set modal body content as HTML
                    } else {
                        modalBodyEl.textContent = message; // Set as plain text
                    }
                }
                infoModal.show(); // Show the modal
            }

            // --- Image Preview for Waste Form ---
            // Displays a preview of the image selected in the AI Helper form
            const wasteImageInput = document.getElementById('waste-image');
            const imagePreview = document.getElementById('waste-image-preview');
            if (wasteImageInput && imagePreview) {
                wasteImageInput.addEventListener('change', function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            imagePreview.src = e.target.result;
                            imagePreview.style.display = 'block'; // Show preview
                        }
                        reader.readAsDataURL(file); // Read file as data URL
                    } else {
                        imagePreview.style.display = 'none'; // Hide preview if no file
                        imagePreview.src = '#';
                    }
                });
            }


            // --- User Authentication (Mocked with localStorage) ---
            // Keys for localStorage items
            const LS_USER_KEY = 'recyclearner_user_v2_expanded';
            const LS_ALL_USERS_KEY = 'recyclearner_all_users_v2_expanded';
            const LS_ANON_TRIAL_KEY = 'recyclearner_anon_ai_trial_used_v2_expanded';
            const DEFAULT_PROFILE_PIC = 'https://placehold.co/140x140/007bff/ffffff?text=User'; // Placeholder image

            // Get current logged-in user from localStorage
            function getCurrentUser() {
                const userJson = localStorage.getItem(LS_USER_KEY);
                try {
                    return userJson ? JSON.parse(userJson) : null;
                } catch (e) {
                    console.error("Error parsing user data from localStorage:", e);
                    localStorage.removeItem(LS_USER_KEY); // Clear corrupted data
                    return null;
                }
            }

            // Save current user data to localStorage
            function saveCurrentUser(userData) {
                try {
                    localStorage.setItem(LS_USER_KEY, JSON.stringify(userData));
                } catch (e) {
                    console.error("Error saving user data to localStorage:", e);
                }
            }

            // Sign out the current user
            function signOutUser() {
                localStorage.removeItem(LS_USER_KEY); // Remove user from storage
                updateHeaderUI(); // Update header to show "Sign In" button
                navigateToView(routes['home']); // Navigate to home page
                showInfoModal('<i class="fas fa-door-open me-2"></i>Signed Out', 'You have been successfully signed out.', true);
            }

            // Update header UI based on authentication state
            function updateHeaderUI() {
                const user = getCurrentUser();
                if (!userAuthSection) { console.error("User auth section not found in header."); return; }
                userAuthSection.innerHTML = ''; // Clear previous content

                if (user) { // If user is logged in, show profile dropdown
                    const profilePicUrl = user.profilePic || DEFAULT_PROFILE_PIC;
                    const dropdownHtml = `
                        <div class="dropdown profile-dropdown">
                            <img src="${profilePicUrl}" alt="Profile" id="userProfilePicHeader" data-bs-toggle="dropdown" aria-expanded="false" onerror="this.src='${DEFAULT_PROFILE_PIC}';">
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userProfilePicHeader">
                                <li><a class="dropdown-item" href="#profile" id="profileNavButton"><i class="fas fa-user-circle"></i> My Profile</a></li>
                                <li><a class="dropdown-item" href="#" id="manageSubscriptionButtonMock"><i class="fas fa-credit-card"></i> Manage Subscription</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" id="signOutButton"><i class="fas fa-sign-out-alt"></i> Sign Out</a></li>
                            </ul>
                        </div>`;
                    userAuthSection.innerHTML = dropdownHtml;

                    // Event listener for "My Profile" link
                    document.getElementById('profileNavButton')?.addEventListener('click', (e) => {
                        e.preventDefault();
                        populateProfileForm(user); // Populate profile form with user data
                        navigateToView(routes['profile']); // Navigate to profile view
                    });
                    // Event listener for "Sign Out" button
                    document.getElementById('signOutButton')?.addEventListener('click', (e) => {
                        e.preventDefault();
                        signOutUser();
                    });
                    document.getElementById('manageSubscriptionButtonMock')?.addEventListener('click', (e) => {
                        e.preventDefault();
                        const subInfo = user.subscription ? `Your current plan: <strong>${user.subscription.planName}</strong>. Renews on: ${user.subscription.renewsOn || 'N/A'}` : 'You do not have an active subscription.';
                        showInfoModal('<i class="fas fa-credit-card me-2"></i>Subscription Management (Mock)', `${subInfo}<br><br><em>Full subscription management features would be available here in a real application.</em>`, true);
                    });
                } else { // If user is not logged in, show "Sign In" button
                    userAuthSection.innerHTML = '<button class="btn btn-sm btn-sign-in" id="signInHeaderButton"><i class="fas fa-sign-in-alt me-1"></i>Sign In</button>';
                    document.getElementById('signInHeaderButton')?.addEventListener('click', (e) => {
                        e.preventDefault();
                        navigateToView(routes['sign-in']); // Navigate to sign-in view
                    });
                }
                 updateAIHelperUIAccess(); // Also update AI helper access based on new auth state
            }

            // Sign In Form Submission
            const signinForm = document.getElementById('signin-form');
            if (signinForm) {
                signinForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = document.getElementById('signin-email').value;
                    const password = document.getElementById('signin-password').value;

                    const storedUsers = JSON.parse(localStorage.getItem(LS_ALL_USERS_KEY)) || {};
                    if (storedUsers[email] && storedUsers[email].password === password) { // Check credentials
                        saveCurrentUser(storedUsers[email]); // Save as current user
                        updateHeaderUI();
                        navigateToView(routes['home']);
                        showInfoModal(`<i class="fas fa-check-circle text-success me-2"></i>Login Successful`, `Welcome back, ${storedUsers[email].fullName || storedUsers[email].username}!`, true);
                        signinForm.reset();
                    } else {
                        showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Login Failed', 'Invalid email or password. Please try again or sign up.', true);
                    }
                });
            }

            // Sign Up Form Submission
            const signupForm = document.getElementById('signup-form');
            if (signupForm) {
                signupForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const username = document.getElementById('signup-username').value;
                    const fullName = document.getElementById('signup-fullname').value;
                    const email = document.getElementById('signup-email').value;
                    const password = document.getElementById('signup-password').value;

                    if (password.length < 6) { // Basic password validation
                         showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Password Too Short', 'Password must be at least 6 characters long.', true);
                         return;
                    }

                    let storedUsers = JSON.parse(localStorage.getItem(LS_ALL_USERS_KEY)) || {};
                    if (storedUsers[email]) { // Check if email already exists
                        showInfoModal('<i class="fas fa-exclamation-circle text-danger me-2"></i>Signup Failed', 'An account with this email already exists. Please sign in.', true);
                        return;
                    }

                    // Create new user object
                    const newUser = {
                        username,
                        fullName,
                        email,
                        password, // In a real app, hash the password!
                        profilePic: DEFAULT_PROFILE_PIC,
                        aiTrialUsed: localStorage.getItem(LS_ANON_TRIAL_KEY) === 'true', // Carry over anon trial status
                        joinDate: new Date().toLocaleDateString(),
                        stats: { itemsRecycled: 0, co2Saved: 0, upcycledProjects: 0 },
                        subscription: null // No subscription by default
                    };
                    storedUsers[email] = newUser; // Add to all users
                    localStorage.setItem(LS_ALL_USERS_KEY, JSON.stringify(storedUsers));

                    saveCurrentUser(newUser); // Set as current user
                    updateHeaderUI();
                    navigateToView(routes['home']);
                    showInfoModal('<i class="fas fa-party-popper text-success me-2"></i>Signup Successful!', `Welcome to RecycLearner, ${fullName || username}! Your account has been created.`, true);
                    signupForm.reset();
                });
            }


            // Profile Form Management
            const profileForm = document.getElementById('profile-form');
            const profileViewImage = document.getElementById('profile-view-image');
            const profilePicUploadInput = document.getElementById('profile-pic-upload-input');
            const uploadProfilePicButton = document.getElementById('uploadProfilePicButton');

            // Populate profile form with user data
            function populateProfileForm(user) {
                if (!user || !document.getElementById('profile-username')) return;
                document.getElementById('profile-username').value = user.username;
                document.getElementById('profile-fullname').value = user.fullName;
                document.getElementById('profile-email').value = user.email;
                document.getElementById('profile-new-password').value = ''; // Clear password field
                if(profileViewImage) profileViewImage.src = user.profilePic || DEFAULT_PROFILE_PIC;

                // Populate mock stats
                const stats = user.stats || { itemsRecycled: 0, co2Saved: 0, upcycledProjects: 0 };
                document.getElementById('statItemsRecycled').textContent = stats.itemsRecycled;
                document.getElementById('statCo2Saved').textContent = `${stats.co2Saved} kg`;
                document.getElementById('statUpcycledProjects').textContent = stats.upcycledProjects;

                // Populate subscription details
                const subDetailsContainer = document.getElementById('profile-subscription-details');
                if (subDetailsContainer) {
                    if (user.subscription) {
                        subDetailsContainer.innerHTML = `
                            <p><strong>Current Plan:</strong> ${user.subscription.planName}</p>
                            <p><strong>Status:</strong> Active (Trial)</p>
                            <p><strong>Renews On:</strong> ${user.subscription.renewsOn || 'N/A'}</p>
                            <button class="btn btn-sm btn-outline-danger mt-2" id="cancelSubscriptionMockBtn">Cancel Subscription (Mock)</button>
                        `;
                        document.getElementById('cancelSubscriptionMockBtn')?.addEventListener('click', () => {
                             showInfoModal('Subscription Management', 'This is a mock cancel subscription. In a real app, this would trigger a cancellation process.', true);
                             user.subscription = null; // Mock cancellation
                             saveCurrentUser(user);
                             populateProfileForm(user); // Re-populate to reflect change
                        });
                    } else {
                        subDetailsContainer.innerHTML = `<p>You do not have an active subscription. <a href="#home" id="profileToPlansLink">View Plans</a></p>`;
                        document.getElementById('profileToPlansLink')?.addEventListener('click', (e) => {
                            e.preventDefault();
                            navigateToView(routes['home']);
                            const plansTabButton = document.getElementById('plans-tab-btn');
                            if (plansTabButton) bootstrap.Tab.getOrCreateInstance(plansTabButton).show();
                        });
                    }
                }
            }

            // Trigger file input when "Upload Picture" button is clicked
            if (uploadProfilePicButton && profilePicUploadInput) {
                uploadProfilePicButton.addEventListener('click', () => {
                    profilePicUploadInput.click();
                });

                // Handle profile picture file selection
                profilePicUploadInput.addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file && file.type.startsWith('image/')) {
                        if (file.size > 2 * 1024 * 1024) { // 2MB limit
                            showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Image Too Large', 'Profile picture should be less than 2MB.', true);
                            profilePicUploadInput.value = ''; // Reset file input
                            return;
                        }
                        const reader = new FileReader();
                        reader.onloadend = () => { // When file is read
                            const base64String = reader.result;
                            if(profileViewImage) profileViewImage.src = base64String; // Display preview
                        }
                        reader.readAsDataURL(file); // Read as Base64
                    } else if (file) {
                        showInfoModal('<i class="fas fa-exclamation-circle text-danger me-2"></i>Invalid File Type', 'Please select a valid image file (e.g., JPG, PNG).', true);
                        profilePicUploadInput.value = ''; // Reset file input
                    }
                });
            }

            // Handle profile form submission
            if (profileForm) {
                profileForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    let user = getCurrentUser();
                    if (!user) {
                        showInfoModal('<i class="fas fa-exclamation-circle text-danger me-2"></i>Error', 'Not logged in. Cannot update profile.', true);
                        navigateToView(routes['sign-in']);
                        return;
                    }

                    user.fullName = document.getElementById('profile-fullname').value;
                    const newPassword = document.getElementById('profile-new-password').value;
                    if (newPassword) { // If new password is provided
                        if (newPassword.length < 6) {
                            showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Password Too Short', 'New password must be at least 6 characters long.', true);
                            return;
                        }
                        user.password = newPassword; // Update password (hash in real app)
                    }
                    if(profileViewImage) user.profilePic = profileViewImage.src; // Update profile picture

                    // Update user in the list of all users
                    let storedUsers = JSON.parse(localStorage.getItem(LS_ALL_USERS_KEY)) || {};
                    storedUsers[user.email] = user;
                    localStorage.setItem(LS_ALL_USERS_KEY, JSON.stringify(storedUsers));

                    saveCurrentUser(user); // Save updated current user
                    updateHeaderUI(); // Update header (e.g., profile pic)
                    showInfoModal('<i class="fas fa-check-circle text-success me-2"></i>Profile Updated', 'Your profile information has been saved successfully.', true);
                });
            }

            // Back button on profile page
             const backToMainFromProfile = document.getElementById('backToMainFromProfile');
             if(backToMainFromProfile) {
                backToMainFromProfile.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateToView(routes['home']);
                });
             }

            // Navigation links between sign-in and sign-up pages
            document.getElementById('navigateToSignUp')?.addEventListener('click', (e) => { e.preventDefault(); navigateToView(routes['sign-up']); });
            document.getElementById('navigateToSignIn')?.addEventListener('click', (e) => { e.preventDefault(); navigateToView(routes['sign-in']); });


            // --- AI Helper Form Logic ---
            const wasteForm = document.getElementById('waste-form');
            const loadingSpinner = document.getElementById('loading-spinner');
            const getInsightsButton = document.getElementById('get-insights-button');
            const aiTrialMessageDiv = document.getElementById('ai-trial-message');

            // Check if user can use the AI trial
            function canUseAITrial() {
                const user = getCurrentUser();
                if (user && user.subscription && user.subscription.planName !== 'Starter Spark') { // Assuming Eco Pro and Green Business have unlimited
                    return true;
                }
                if (user) {
                    return !user.aiTrialUsed; // Check logged-in user's trial status
                } else {
                    return localStorage.getItem(LS_ANON_TRIAL_KEY) !== 'true'; // Check anonymous trial status
                }
            }

            // Mark AI trial as used
            function markAITrialUsed() {
                const user = getCurrentUser();
                 if (user && user.subscription && user.subscription.planName !== 'Starter Spark') {
                    // Don't mark trial used for premium plans
                    // Potentially increment a query counter for Starter Spark if needed
                    if (user.subscription.planName === 'Starter Spark') {
                        user.subscription.queriesUsed = (user.subscription.queriesUsed || 0) + 1;
                        // Add logic here to check if Starter Spark query limit is reached
                        console.log(`Starter Spark query used. Total: ${user.subscription.queriesUsed}`);
                    }
                    saveCurrentUser(user);
                    return;
                }

                if (user) {
                    user.aiTrialUsed = true;
                    saveCurrentUser(user);
                    // Update in all_users list as well
                    let storedUsers = JSON.parse(localStorage.getItem(LS_ALL_USERS_KEY)) || {};
                    if (storedUsers[user.email]) {
                        storedUsers[user.email].aiTrialUsed = true;
                        localStorage.setItem(LS_ALL_USERS_KEY, JSON.stringify(storedUsers));
                    }
                } else {
                    localStorage.setItem(LS_ANON_TRIAL_KEY, 'true'); // Mark anonymous trial used
                }
            }

            // Update UI elements in AI Helper based on trial status
            function updateAIHelperUIAccess() {
                if (!getInsightsButton || !aiTrialMessageDiv) return;

                if (!canUseAITrial()) {
                    getInsightsButton.disabled = true;
                    getInsightsButton.classList.add('btn-custom-disabled'); // Custom class for disabled state
                    let message = `You've used your free AI analysis or reached your plan's limit. Please <a href="#home" id="trialToPlansLink" class="alert-link">upgrade your plan</a> for unlimited access.`;
                    if (!getCurrentUser()) { // If anonymous
                        message = `You've used your free AI analysis. Please <a href="#sign-up" id="trialToSignUpLink" class="alert-link">sign up</a> for more features or <a href="#home" id="trialToPlansLinkAnon" class="alert-link">subscribe to a plan</a>.`;
                    }
                    aiTrialMessageDiv.innerHTML = message;
                    aiTrialMessageDiv.style.display = 'block';

                    // Event listeners for links within the trial message
                    document.getElementById('trialToPlansLink')?.addEventListener('click', (e) => {
                        e.preventDefault(); navigateToView(routes['home']);
                        const plansTabButton = document.getElementById('plans-tab-btn');
                        if (plansTabButton) bootstrap.Tab.getOrCreateInstance(plansTabButton).show();
                    });
                     document.getElementById('trialToPlansLinkAnon')?.addEventListener('click', (e) => {
                        e.preventDefault(); navigateToView(routes['home']);
                        const plansTabButton = document.getElementById('plans-tab-btn');
                        if (plansTabButton) bootstrap.Tab.getOrCreateInstance(plansTabButton).show();
                    });
                    document.getElementById('trialToSignUpLink')?.addEventListener('click', (e) => {
                        e.preventDefault(); navigateToView(routes['sign-up']);
                    });

                } else {
                    getInsightsButton.disabled = false;
                    getInsightsButton.classList.remove('btn-custom-disabled');
                    aiTrialMessageDiv.style.display = 'none';
                }
            }

            // Update AI helper access when its tab is shown
            const aiHelperTabBtn = document.getElementById('ai-helper-tab-btn');
            if (aiHelperTabBtn) {
                aiHelperTabBtn.addEventListener('shown.bs.tab', updateAIHelperUIAccess);
            }
            // Initial check for AI helper access when page loads (if AI helper tab is active)
            if (window.location.hash === '#home' || window.location.hash === '') {
                 const activeTab = document.querySelector('#myTab .nav-link.active');
                 if (!activeTab || activeTab.id === 'ai-helper-tab-btn' || activeTab.id === 'about-tab-btn') { // Check if AI or default tab
                    updateAIHelperUIAccess();
                 }
            }


            // AI Helper Form Submission to Gemini API
            if (wasteForm && loadingSpinner && getInsightsButton) {
                wasteForm.addEventListener('submit', async function(event) {
                    event.preventDefault();

                    if (!canUseAITrial()) { // Double check trial status before submitting
                        updateAIHelperUIAccess();
                        return;
                    }

                    getInsightsButton.disabled = true; // Disable button during processing
                    loadingSpinner.style.display = 'flex'; // Show spinner

                    const wasteDescriptionInput = document.getElementById('waste-description');
                    const wasteImageInput = document.getElementById('waste-image');
                    const description = wasteDescriptionInput.value.trim();
                    const imageFile = wasteImageInput.files[0];

                    if (!description && !imageFile) { // Require at least one input
                        showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Input Required', 'Please provide a description or upload an image of your waste item.', true);
                        loadingSpinner.style.display = 'none';
                        updateAIHelperUIAccess(); // Re-enable button if needed
                        return;
                    }

                    let base64ImageData = null;
                    let mimeType = null;

                    if (imageFile) { // Process image if provided
                        if (imageFile.size > 4 * 1024 * 1024) { // 4MB limit
                             showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Image Too Large', 'Please upload an image smaller than 4MB.', true);
                             loadingSpinner.style.display = 'none';
                             updateAIHelperUIAccess();
                             return;
                        }
                        try {
                            base64ImageData = await new Promise((resolve, reject) => {
                                const reader = new FileReader();
                                reader.onloadend = () => resolve(reader.result.split(',')[1]); // Get Base64 part
                                reader.onerror = reject;
                                reader.readAsDataURL(imageFile);
                            });
                            mimeType = imageFile.type;
                        } catch (error) {
                            console.error("Error reading image file:", error);
                            showInfoModal('<i class="fas fa-times-circle text-danger me-2"></i>Image Error', 'Could not process the image file. Please try a different image or use text description.', true);
                            loadingSpinner.style.display = 'none';
                            updateAIHelperUIAccess();
                            return;
                        }
                    }

                    // Construct prompt for Gemini API
                    let promptText = `You are RecycLearner AI, an expert in recycling and creative upcycling for ${mockLocation}.
A user has submitted a waste item. Please analyze the provided description and/or image.

Item Description: ${description || "No text description provided."}
Image Provided: ${imageFile ? 'Yes' : 'No'}

Provide a comprehensive guide for this item. If the item seems unclear or ambiguous, state that and give general advice or ask for clarification. Otherwise, include:
1.  **Material Identification:** Based on the description and/or image, what is this item likely made of? Be specific.
2.  **Recycling Instructions (${mockLocation} Focus):**
    * Is it commonly recyclable in ${mockLocation} municipal programs? (Yes/No/Sometimes - explain if sometimes, mention specific local facilities if known, e.g., "Dubai Municipality recycling centers accept this.")
    * How should it be prepared for recycling (e.g., rinse, flatten, remove labels/lids, separate parts)?
    * Where can it typically be recycled in ${mockLocation} (e.g., curbside bin with mixed recyclables, special drop-off location, specific company take-back programs)? Mention common recycling symbols if relevant (e.g., PETE #1, HDPE #2).
    * Any common contaminants or reasons it might be rejected in ${mockLocation}?
3.  **Upcycling Ideas ✨ (Be Creative!):** Suggest 2-3 innovative and practical ideas to repurpose or upcycle this item. Provide brief, inspiring instructions or concepts for each idea. Aim for ideas that are accessible.
4.  **Special Considerations/Safety:** Are there any important safety precautions for handling or disposal if the item is hazardous, contains batteries, or is not recyclable? Mention any specific ${mockLocation} regulations for hazardous waste if applicable.
5.  **Eco-Impact & Tip:** Briefly mention the positive environmental impact of correctly handling this item and provide a general eco-friendly tip related to reducing this type of waste or sustainable consumption relevant to ${mockLocation} if possible.

Format your response clearly using Markdown. Use headings (e.g., "### Recycling Instructions"), bold text for emphasis, and bullet points for lists. Ensure the tone is encouraging, informative, and locally relevant to ${mockLocation} where appropriate. If local information is unavailable, provide general advice.`;

                    const chatHistory = [{ role: "user", parts: [] }];
                    chatHistory[0].parts.push({ text: promptText });

                    if (base64ImageData && mimeType) { // Add image data if present
                        chatHistory[0].parts.push({
                            inlineData: { mimeType: mimeType, data: base64ImageData }
                        });
                    }

                    const payload = { contents: chatHistory };
                    const apiKey = ""; // API key is handled by the environment
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) { // Handle API errors
                            const errorData = await response.json();
                            throw new Error(`API request failed with status ${response.status}: ${errorData.error?.message || 'Unknown API error'}`);
                        }

                        const result = await response.json();

                        // Process and display AI response
                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            let aiResponseText = result.candidates[0].content.parts[0].text;

                            // Basic Markdown to HTML conversion for modal display
                            aiResponseText = aiResponseText
                                .replace(/^### (.*$)/gim, '<h5>$1</h5>') // H3 to H5
                                .replace(/^## (.*$)/gim, '<h4>$1</h4>')   // H2 to H4
                                .replace(/^# (.*$)/gim, '<h3>$1</h3>')     // H1 to H3
                                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold
                                .replace(/\*(.*?)\*/g, '<em>$1</em>')       // Italic
                                .replace(/^- (.*$)/gim, '<li>$1</li>')      // Unordered list item
                                .replace(/^\* (.*$)/gim, '<li>$1</li>')    // Unordered list item (alternative)
                                .replace(/\n/g, '<br>');                    // Newlines to <br>
                            // Wrap consecutive <li> into <ul>
                            aiResponseText = aiResponseText.replace(/(<li>.*?<\/li>)+/gs, (match) => `<ul class="list-unstyled ps-3 my-2">${match}</ul>`);


                            showInfoModal('<i class="fas fa-robot me-2"></i>AI Recycling & Upcycling Insights', aiResponseText, true);
                            markAITrialUsed(); // Mark trial as used after successful response
                            // Mock update user stats
                            let currentUser = getCurrentUser();
                            if (currentUser) {
                                currentUser.stats.itemsRecycled = (currentUser.stats.itemsRecycled || 0) + 1;
                                currentUser.stats.co2Saved = (currentUser.stats.co2Saved || 0) + Math.round(Math.random() * 2 + 0.5); // Random CO2 saved
                                saveCurrentUser(currentUser);
                                // If profile view is active, update it (though user is on AI helper tab)
                                if (document.getElementById('profile-view').classList.contains('active')) {
                                    populateProfileForm(currentUser);
                                }
                            }

                        } else {
                            showInfoModal('<i class="fas fa-exclamation-circle text-warning me-2"></i>Analysis Incomplete', 'The AI analysis returned an unexpected result. Please try again or rephrase your query.', true);
                        }
                    } catch (error) { // Handle fetch or other errors
                        console.error("Error calling Gemini API:", error);
                        showInfoModal('<i class="fas fa-times-circle text-danger me-2"></i>Analysis Failed', `Sorry, we couldn't get insights for your item right now. Please try again later. <br><small>Error: ${error.message}</small>`, true);
                    } finally { // Always re-enable button and hide spinner
                        loadingSpinner.style.display = 'none';
                        wasteForm.reset(); // Clear the form
                        if(imagePreview) imagePreview.style.display = 'none'; // Hide image preview
                        updateAIHelperUIAccess(); // Update UI based on trial status
                    }
                });
            }

            // Payment Form Submission (Mock)
            const paymentForm = document.getElementById('payment-form');
            if (paymentForm) {
                paymentForm.addEventListener('submit', function(event) {
                    event.preventDefault();
                    if (!document.getElementById('termsCheck').checked) { // Check if terms are agreed
                        showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Agreement Required', 'Please agree to the Terms and Conditions to proceed.', true);
                        return;
                    }
                    const planValueEl = document.getElementById('selected-plan-value');
                    const planName = planValueEl ? planValueEl.value.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()) : "Your Selected Plan";

                    // Mock subscription update for current user
                    let currentUser = getCurrentUser();
                    if (currentUser) {
                        currentUser.subscription = {
                            planName: planName,
                            status: 'Active (Trial)',
                            renewsOn: new Date(new Date().setDate(new Date().getDate() + 7)).toLocaleDateString(), // Mock renewal date
                            queriesUsed: 0 // For Starter Spark
                        };
                        saveCurrentUser(currentUser);
                        updateHeaderUI(); // Reflect potential changes in header/profile access
                    }


                    showInfoModal('<i class="fas fa-check-circle text-success me-2"></i>Subscription Activated!', `Thank you for subscribing to RecycLearner! Your 7-day free trial for the <strong class="text-capitalize">${planName}</strong> has started. Welcome aboard!`, true);
                    paymentForm.reset();
                    setTimeout(() => { // Navigate back to home after a delay
                        navigateToView(routes['home']);
                    }, 2500);
                });
            }

            // --- Scroll Animations ---
            // Animates elements into view when scrolling
            const scrollElements = document.querySelectorAll('.scroll-animate');
            const elementInView = (el, percentageScroll = 100) => {
                const elementTop = el.getBoundingClientRect().top;
                return (
                    elementTop <= (window.innerHeight || document.documentElement.clientHeight) * (percentageScroll / 100)
                );
            };
            const displayScrollElement = (element) => { element.classList.add('is-visible'); };
            const handleScrollAnimation = () => {
                scrollElements.forEach((el) => {
                    if (elementInView(el, 85)) { displayScrollElement(el); } // Trigger animation when 85% in view
                });
            }
            window.addEventListener('scroll', handleScrollAnimation);
            setTimeout(handleScrollAnimation, 100); // Initial check on load

            // --- Responsive Adjustments & Initial State ---
            // Function to handle UI changes on window resize (e.g., mobile nav toggle visibility)
            function handleResize() {
                const currentHash = window.location.hash.substring(1) || 'home';
                const currentViewId = routes[currentHash] || routes['home'];
                const isAuthOrSpecialView = (currentViewId === routes['profile'] || currentViewId === routes['sign-in'] || currentViewId === routes['sign-up'] || currentViewId === routes['checkout']);

                if (mobileNavToggle) { // Show/hide mobile nav toggle based on current view and screen size
                    mobileNavToggle.classList.toggle('hidden-for-auth', isAuthOrSpecialView);
                    // Actual display (block/none) is handled by CSS media queries based on .hidden-for-auth and screen size
                }
            }
            window.addEventListener('resize', handleResize); // Listen for resize events

            // --- Dynamic Content Loading for New Sections ---
            loadRecyclingGuides();
            loadUpcyclingIdeas();
            loadBlogPosts();
            loadCommunityContent();
            loadFaqs();

            // --- Final Initializations ---
            window.addEventListener('hashchange', handleHashChange); // Listen for hash changes for navigation
            updateHeaderUI(); // Set initial header state (Sign In vs Profile)
            handleHashChange(); // Handle initial route based on URL hash
            handleResize(); // Set initial responsive state

            console.log("RecycLearner App Initialized Successfully.");
        }); // End DOMContentLoaded

        // --- Mock Data and Dynamic Content Functions ---

        // --- 1. Recycling Guides Data & Loader ---
        const recyclingGuidesData = [
            { id: 'plastics', icon: 'fas fa-prescription-bottle', title: 'Plastics', summary: 'Learn about different plastic types (PET, HDPE, PVC, LDPE, PP, PS, Other) and how to recycle them correctly.', details: '<h3>Recycling Plastics (General Guide)</h3><p>Plastic recycling is complex due to the variety of polymer types. Always check local guidelines!</p><h4>Common Recyclable Plastics:</h4><ul><li><strong>PETE or PET (Polyethylene Terephthalate - #1):</strong> Soda bottles, water bottles, food containers. Usually widely recycled. Empty, rinse, and replace cap (or check local rules).</li><li><strong>HDPE (High-Density Polyethylene - #2):</strong> Milk jugs, detergent bottles, shampoo bottles. Also widely recycled. Empty and rinse. Caps often okay.</li><li><strong>PP (Polypropylene - #5):</strong> Yogurt cups, butter tubs, some bottle caps. Increasingly recycled, but check locally. Clean thoroughly.</li></ul><h4>Less Commonly Recycled / Problematic Plastics:</h4><ul><li><strong>PVC or V (Polyvinyl Chloride - #3):</strong> Pipes, window frames, some packaging. Rarely recycled curbside.</li><li><strong>LDPE (Low-Density Polyethylene - #4):</strong> Plastic bags, films, shrink wrap. Generally NOT curbside recyclable. Look for store drop-off programs.</li><li><strong>PS (Polystyrene - #6):</strong> Foam cups/plates, disposable cutlery, CD cases. Very difficult to recycle; often not accepted.</li><li><strong>Other (#7):</strong> Includes a mix of plastics like polycarbonate (PC), bioplastics (PLA). Recycling varies greatly.</li></ul><p><strong>Preparation Tips:</strong> Empty and rinse all containers. Remove loose caps from bottles unless your local program says otherwise (some prefer caps on to prevent them from getting lost in machinery). Do not bag recyclables unless instructed. Avoid wishcycling (throwing non-recyclables in hoping they get recycled).</p><p><strong>Environmental Impact:</strong> Recycling plastic conserves natural resources (petroleum), saves energy, reduces greenhouse gas emissions, and prevents plastic pollution in landfills and oceans.</p>' },
            { id: 'paper', icon: 'fas fa-newspaper', title: 'Paper & Cardboard', summary: 'Understand how to recycle newspapers, magazines, office paper, cardboard boxes, and paperboard.', details: '<h3>Recycling Paper & Cardboard</h3><p>Most paper products are recyclable if clean and dry.</p><ul><li><strong>Newspapers & Magazines:</strong> Widely accepted. Keep dry.</li><li><strong>Office Paper & Junk Mail:</strong> White and colored paper, envelopes (even with windows). Staples are usually okay.</li><li><strong>Cardboard Boxes:</strong> Flatten all boxes to save space. Remove excessive tape if possible. Must be clean (no grease stains like on pizza boxes).</li><li><strong>Paperboard (Cereal Boxes, Shoe Boxes):</strong> Flatten. Usually recycled with cardboard.</li><li><strong>NOT Recyclable:</strong> Greasy pizza boxes, paper towels/tissues, wax-coated paper, metallic wrapping paper, photos.</li></ul><p><strong>Preparation:</strong> Keep paper dry and clean. Flatten boxes. Don\'t shred paper unless specifically requested by your local program (shredded paper fibers are short and can be hard to process).</p>' },
            { id: 'glass', icon: 'fas fa-wine-bottle', title: 'Glass', summary: 'Guidelines for recycling glass bottles and jars. Learn about colors and preparation.', details: '<h3>Recycling Glass</h3><p>Glass is highly recyclable and can be recycled endlessly without loss of quality.</p><ul><li><strong>Accepted:</strong> Glass bottles (beverages, food sauces), glass jars (food).</li><li><strong>Colors:</strong> Some programs require separating by color (clear, brown, green), others accept mixed glass. Check local rules.</li><li><strong>NOT Recyclable:</strong> Ceramics, Pyrex/ovenware, drinking glasses, window glass, mirrors, light bulbs. These have different melting points or chemical compositions.</li></ul><p><strong>Preparation:</strong> Empty and rinse containers. Metal lids can often be recycled separately (check locally if they should be on or off the jar).</p>' },
            { id: 'metals', icon: 'fas fa-缶', title: 'Metals', summary: 'Recycling aluminum cans, steel/tin cans, and other metal items.', details: '<h3>Recycling Metals</h3><p>Metals are valuable and highly recyclable.</p><ul><li><strong>Aluminum Cans:</strong> Beverage cans. Empty and rinse. Crushing is optional (some programs prefer uncrushed).</li><li><strong>Steel & Tin Cans:</strong> Food cans. Empty, rinse well. Lids can often be placed inside the can.</li><li><strong>Aerosol Cans (Empty):</strong> Must be completely empty. Remove plastic cap. Check local rules, as some consider them hazardous if not empty.</li><li><strong>Aluminum Foil & Trays:</strong> Must be clean and balled up (at least 2 inches in diameter). Small, dirty pieces are not recyclable.</li><li><strong>NOT Recyclable (Curbside):</strong> Paint cans (unless empty and dry, check locally), electronics, batteries, scrap metal pieces (often need special drop-off).</li></ul>' },
            { id: 'ewaste', icon: 'fas fa-laptop', title: 'E-Waste', summary: 'Safe disposal and recycling options for electronics like computers, phones, and TVs.', details: '<h3>Recycling E-Waste (Electronic Waste)</h3><p>E-waste contains valuable materials but also hazardous substances. It should NEVER go in regular trash or recycling bins.</p><ul><li><strong>Items:</strong> Computers, laptops, monitors, TVs, cell phones, printers, keyboards, cables, batteries.</li><li><strong>Why Special Handling:</strong> Contains lead, mercury, cadmium, etc. Improper disposal pollutes.</li><li><strong>Recycling Options:</strong> Look for local e-waste collection events, municipal drop-off sites, retailer take-back programs (e.g., Best Buy, Apple), or certified e-waste recyclers.</li></ul><p><strong>Data Security:</strong> Before recycling, wipe all personal data from devices. Remove SIM cards and memory cards.</p><p><strong>Batteries:</strong> Remove batteries if possible. Many batteries (especially lithium-ion) are fire hazards and need separate, special recycling. Look for battery drop-off locations.</p>' },
            { id: 'organics', icon: 'fas fa-carrot', title: 'Organics & Composting', summary: 'Learn about composting food scraps and yard waste to reduce landfill and create rich soil.', details: '<h3>Composting Organics</h3><p>Composting food scraps and yard waste diverts significant amounts from landfills and creates valuable soil amendment.</p><ul><li><strong>Compostable "Greens" (Nitrogen-rich):</strong> Fruit and vegetable scraps, coffee grounds & filters, tea bags, grass clippings (in moderation).</li><li><strong>Compostable "Browns" (Carbon-rich):</strong> Dry leaves, twigs, shredded newspaper, cardboard (plain, no glossy inks).</li><li><strong>DO NOT Compost (typically):</strong> Meat, dairy, oily foods, pet waste, diseased plants, treated wood. These can attract pests or create pathogens.</li></ul><p><strong>Methods:</strong> Backyard composting (bins, piles), worm composting (vermicomposting, good for small spaces), municipal green bin programs (if available in your area like parts of Dubai).</p>' },
        ];

        function loadRecyclingGuides() {
            const container = document.getElementById('guide-category-grid-container');
            if (!container) return;
            container.innerHTML = recyclingGuidesData.map(guide => `
                <div class="guide-card scroll-animate">
                    <div class="guide-card-icon"><i class="${guide.icon}"></i></div>
                    <h4>${guide.title}</h4>
                    <p>${guide.summary}</p>
                    <button class="btn btn-sm btn-learn-more" onclick="showInfoModal('${guide.title} Guide', '${guide.details.replace(/'/g, "&apos;").replace(/"/g, "&quot;")}', true)"><i class="fas fa-book-reader me-2"></i>Learn More</button>
                </div>
            `).join('');
        }

        // --- 2. Upcycling Hub Data & Loader ---
        const upcyclingIdeasData = [
            { id: 'bottleplanter', title: 'Plastic Bottle Planters', summary: 'Turn empty plastic bottles into cute and functional planters for small herbs or succulents.', difficulty: 'easy', materials: ['plastic bottles', 'soil', 'plants'], image: 'https://placehold.co/600x400/28a745/ffffff?text=Bottle+Planter', steps: '1. Clean bottle. 2. Cut bottle in half or desired shape. 3. Add drainage holes. 4. Decorate (optional). 5. Fill with soil and plant.' },
            { id: 'tshirtbag', title: 'No-Sew T-Shirt Tote Bag', summary: 'Transform an old t-shirt into a reusable shopping bag without any sewing required.', difficulty: 'easy', materials: ['old t-shirt', 'scissors'], image: 'https://placehold.co/600x400/007bff/ffffff?text=T-Shirt+Bag', steps: '1. Lay t-shirt flat. 2. Cut off sleeves. 3. Widen neckline. 4. Cut fringe along the bottom. 5. Tie bottom fringes together.' },
            { id: 'jarorganizer', title: 'Glass Jar Organizers', summary: 'Decorate and repurpose glass jars for storing small items like craft supplies, office essentials, or kitchen spices.', difficulty: 'easy', materials: ['glass jars', 'paint', 'labels'], image: 'https://placehold.co/600x400/ffc107/1a202c?text=Jar+Organizers', steps: '1. Clean jars thoroughly. 2. Paint or decorate jars as desired. 3. Attach labels if needed. 4. Fill with items.' },
            { id: 'palletfurniture', title: 'Wooden Pallet Coffee Table', summary: 'Create a rustic coffee table from reclaimed wooden pallets. Requires some woodworking skills.', difficulty: 'medium', materials: ['wooden pallets', 'sandpaper', 'screws', 'paint/stain', 'casters (optional)'], image: 'https://placehold.co/600x400/6f42c1/ffffff?text=Pallet+Table', steps: '1. Disassemble or clean pallets. 2. Sand wood smooth. 3. Assemble into table shape using screws. 4. Paint or stain. 5. Add casters for mobility.' },
            { id: 'denimquilt', title: 'Old Denim Quilt Patchwork', summary: 'Use scraps from old jeans to create a durable and stylish patchwork quilt or blanket.', difficulty: 'hard', materials: ['old jeans', 'sewing machine', 'thread', 'batting', 'backing fabric'], image: 'https://placehold.co/600x400/fd7e14/ffffff?text=Denim+Quilt', steps: '1. Cut denim into uniform squares or shapes. 2. Arrange patches into desired design. 3. Sew patches together into rows, then sew rows together. 4. Layer with batting and backing fabric. 5. Quilt layers together and bind edges.' },
        ];
         const upcyclingMaterials = [...new Set(upcyclingIdeasData.map(idea => idea.materials).flat())].sort();


        function loadUpcyclingIdeas(filteredIdeas = upcyclingIdeasData) {
            const galleryContainer = document.getElementById('upcycling-gallery-container');
             const materialFilterSelect = document.getElementById('upcyclingMaterialFilter');

            if (!galleryContainer) return;
            galleryContainer.innerHTML = filteredIdeas.map(idea => `
                <div class="upcycling-idea-card scroll-animate" data-materials="${idea.materials.join(',').toLowerCase()}" data-difficulty="${idea.difficulty}">
                    <img src="${idea.image}" alt="${idea.title}" onerror="this.src='https://placehold.co/600x400/cccccc/ffffff?text=Image+Not+Found';">
                    <div class="upcycling-idea-card-content">
                        <h4>${idea.title}</h4>
                        <span class="badge difficulty-badge ${idea.difficulty}">${idea.difficulty.charAt(0).toUpperCase() + idea.difficulty.slice(1)}</span>
                        <p>${idea.summary}</p>
                        <button class="btn btn-sm btn-custom btn-view-idea" onclick="showInfoModal('${idea.title}', '<h4>Materials:</h4><p>${idea.materials.join(', ')}</p><h4>Steps:</h4><p>${idea.steps.replace(/'/g, '&apos;')}</p><img src=\\'${idea.image}\\' alt=\\'${idea.title}\\' class=\\'img-fluid rounded mt-2\\'>', true)"><i class="fas fa-tools me-2"></i>View Project</button>
                    </div>
                </div>
            `).join('');

            if (materialFilterSelect && materialFilterSelect.options.length <= 1) { // Populate only once
                upcyclingMaterials.forEach(material => {
                    const option = document.createElement('option');
                    option.value = material.toLowerCase();
                    option.textContent = material.charAt(0).toUpperCase() + material.slice(1);
                    materialFilterSelect.appendChild(option);
                });
            }
        }

        document.getElementById('applyUpcyclingFilters')?.addEventListener('click', () => {
            const searchTerm = document.getElementById('upcyclingSearchInput').value.toLowerCase();
            const difficulty = document.getElementById('upcyclingDifficultyFilter').value;
            const material = document.getElementById('upcyclingMaterialFilter').value;

            const filtered = upcyclingIdeasData.filter(idea => {
                const titleMatch = idea.title.toLowerCase().includes(searchTerm) || idea.summary.toLowerCase().includes(searchTerm);
                const difficultyMatch = difficulty === 'all' || idea.difficulty === difficulty;
                const materialMatch = material === 'all' || idea.materials.map(m=>m.toLowerCase()).includes(material);
                return titleMatch && difficultyMatch && materialMatch;
            });
            loadUpcyclingIdeas(filtered);
        });


        // --- 3. Eco-Blog Data & Loader ---
        const blogPostsData = [
            { id: 1, title: 'The Importance of Sorting Recyclables Correctly', category: 'Recycling Tips', date: 'May 25, 2025', author: 'Jane Doe, Environmentalist', image: 'https://placehold.co/600x400/007bff/ffffff?text=Sorting+Recyclables', excerpt: 'Contamination is a major issue in recycling. Learn why sorting matters and how to do it effectively to maximize recycling rates...', content: '<h3>Why Sorting Matters</h3><p>...</p><h4>Common Contaminants:</h4><ul><li>Food waste in containers</li><li>Plastic bags in mixed paper</li><li>Non-recyclable plastics mixed with recyclables</li></ul>' },
            { id: 2, title: 'Top 5 Easy Upcycling Projects for Beginners', category: 'Upcycling Ideas', date: 'May 28, 2025', author: 'John Creative', image: 'https://placehold.co/600x400/28a745/ffffff?text=Easy+Upcycling', excerpt: 'New to upcycling? These five simple projects are a great way to start turning your "trash" into treasure and reducing waste...', content: '<h3>Project 1: Tin Can Planters</h3><p>...</p>' },
            { id: 3, title: 'Understanding Plastic Resin Codes (1-7)', category: 'Recycling Tips', date: 'June 1, 2025', author: 'RecycLearner Team', image: 'https://placehold.co/600x400/ffc107/1a202c?text=Plastic+Codes', excerpt: 'Those numbers in triangles on plastics can be confusing. We break down what each resin identification code means for recyclability.', content: '<h3>Decoding the Numbers</h3><p>#1 PETE...</p>' },
            { id: 4, title: 'How AI is Revolutionizing Waste Management', category: 'Technology', date: 'June 5, 2025', author: 'AI Insights Weekly', image: 'https://placehold.co/600x400/fd7e14/ffffff?text=AI+Waste+Management', excerpt: 'Artificial intelligence is playing an increasingly crucial role in optimizing recycling processes, from smart bins to material sorting facilities.', content: '<h3>Smart Sorting with AI</h3><p>...</p>' },
        ];
        const blogCategories = [...new Set(blogPostsData.map(post => post.category))].sort();

        function loadBlogPosts(filteredPosts = blogPostsData) {
            const container = document.getElementById('eco-blog-grid-container');
            const categoryFilter = document.getElementById('blogCategoryFilter');

            if (!container) return;
            container.innerHTML = filteredPosts.map(post => `
                <div class="blog-post-card scroll-animate">
                    <img src="${post.image}" alt="${post.title}" class="blog-post-card-image" onerror="this.src='https://placehold.co/600x400/cccccc/ffffff?text=Blog+Image';">
                    <div class="blog-post-card-content">
                        <h4>${post.title}</h4>
                        <div class="blog-post-card-meta">
                            <span><i class="fas fa-calendar-alt"></i> ${post.date}</span>
                            <span><i class="fas fa-user"></i> ${post.author}</span>
                            <span><i class="fas fa-tag"></i> ${post.category}</span>
                        </div>
                        <p class="blog-post-card-excerpt">${post.excerpt}</p>
                        <button class="btn btn-sm btn-custom btn-read-more" onclick="showInfoModal('Blog Post: ${post.title.replace(/'/g, '&apos;')}', '<div class=\\'blog-post-full-content\\'><div class=\\'post-meta-full\\'>By <strong>${post.author}</strong> on ${post.date} in <em>${post.category}</em></div><img src=\\'${post.image}\\' alt=\\'${post.title}\\' class=\\'img-fluid rounded mb-3\\'><div class=\\'post-content-body\\'>${post.content.replace(/'/g, '&apos;')}</div><div class=\\'comments-section\\'><h5>Comments (Mock)</h5><div class=\\'comment\\'><strong>EcoWarrior22:</strong> Great article! Very informative.</div></div></div>', true)"><i class="fas fa-book-open me-2"></i>Read More</button>
                    </div>
                </div>
            `).join('');

            if (categoryFilter && categoryFilter.options.length <=1) { // Populate once
                 blogCategories.forEach(cat => {
                    const option = document.createElement('option');
                    option.value = cat;
                    option.textContent = cat;
                    categoryFilter.appendChild(option);
                });
            }
        }
        document.getElementById('blogSearchInput')?.addEventListener('input', filterBlogPosts);
        document.getElementById('blogCategoryFilter')?.addEventListener('change', filterBlogPosts);

        function filterBlogPosts() {
            const searchTerm = document.getElementById('blogSearchInput').value.toLowerCase();
            const category = document.getElementById('blogCategoryFilter').value;
            const filtered = blogPostsData.filter(post => {
                const titleMatch = post.title.toLowerCase().includes(searchTerm);
                const excerptMatch = post.excerpt.toLowerCase().includes(searchTerm);
                const categoryMatch = category === 'all' || post.category === category;
                return (titleMatch || excerptMatch) && categoryMatch;
            });
            loadBlogPosts(filtered);
        }


        // --- 4. Community Central Data & Loader ---
        const successStoriesData = [
            { user: 'GreenThumbLila', avatar: 'https://placehold.co/50x50/28a745/ffffff?text=L', story: 'Thanks to RecycLearner, I started composting and my garden has never looked better! Reduced my household waste by almost 30%.' },
            { user: 'EcoFamilyDubai', avatar: 'https://placehold.co/50x50/007bff/ffffff?text=EF', story: 'The AI helper is amazing for quickly identifying tricky plastics. We feel much more confident about our recycling now.' },
        ];
        const forumDiscussionsData = [
            { title: 'Best way to recycle coffee pods in Dubai?', user: 'CaffeineFiend', replies: 5, lastPost: '2 hours ago' },
            { title: 'Any local drop-offs for old textiles/clothes?', user: 'Fashionista sostenible', replies: 12, lastPost: '5 hours ago' },
        ];

        function loadCommunityContent() {
            const storiesContainer = document.getElementById('success-stories-container');
            if (storiesContainer) {
                storiesContainer.innerHTML = successStoriesData.map(item => `
                    <div class="story-card scroll-animate">
                        <img src="${item.avatar}" alt="${item.user}" class="user-avatar">
                        <strong>${item.user} says:</strong>
                        <p>"${item.story}"</p>
                    </div>
                `).join('');
            }
            const forumContainer = document.getElementById('forum-discussions-container');
            if (forumContainer) {
                forumContainer.innerHTML = forumDiscussionsData.map(item => `
                    <div class="forum-thread-card scroll-animate">
                        <h5>${item.title}</h5>
                        <small>Started by: ${item.user} | Replies: ${item.replies} | Last post: ${item.lastPost}</small><br>
                        <button class="btn btn-sm btn-outline-primary mt-2">View Thread (Mock)</button>
                    </div>
                `).join('');
            }
        }

        // --- 5. FAQ Data & Loader ---
        const faqData = [
            { category: 'General', q: 'What is RecycLearner?', a: 'RecycLearner is an AI-powered platform designed to help you understand how to recycle and upcycle various waste items correctly. We provide clear guidance using descriptions or images you provide.' },
            { category: 'General', q: 'Is RecycLearner free to use?', a: 'Every user gets one complimentary AI analysis. After that, you can choose from our affordable subscription plans for continued access to AI insights and premium features. Basic guides and FAQs are always free.' },
            { category: 'AI Helper', q: 'How accurate is the AI analysis?', a: 'Our AI is trained on a vast dataset and is constantly learning. While it\'s highly accurate for common items, complex or unusual items might sometimes require more detailed descriptions. We always recommend cross-referencing with your local municipality\'s guidelines, especially for specific local rules.' },
            { category: 'AI Helper', q: 'What kind of images work best for the AI Helper?', a: 'Clear, well-lit photos of a single item against a plain background work best. Ensure the item is easily identifiable.' },
            { category: 'Recycling', q: 'What does "wishcycling" mean?', a: 'Wishcycling is when people put non-recyclable items into the recycling bin hoping they\'ll get recycled. This can contaminate entire batches of recyclables, making them unusable. It\'s always better to check first!' },
            { category: 'Recycling', q: 'Do I need to clean items before recycling?', a: 'Yes, generally. Food containers should be emptied and rinsed to remove food residue. This prevents contamination and pests at recycling facilities.' },
            { category: 'Upcycling', q: 'What is upcycling?', a: 'Upcycling is the process of transforming waste materials or unwanted products into new materials or products of better quality or for better environmental value. It\'s a creative way to reduce waste.' },
            { category: 'Subscription', q: 'How do I cancel my subscription?', a: 'You can manage your subscription, including cancellations, from your Profile page once logged in. (This is a mock feature for the demo).' },
            { category: 'Subscription', q: 'What happens after my free trial ends?', a: 'After your 7-day free trial, your chosen subscription plan will automatically begin, and you will be billed according to the plan\'s terms. You can cancel anytime before the trial ends to avoid charges.' },
        ];

        function loadFaqs(filteredFaqs = faqData) {
            const accordionContainer = document.getElementById('faqAccordionContainer');
            if (!accordionContainer) return;

            // Group FAQs by category
            const faqsByCategory = filteredFaqs.reduce((acc, faq) => {
                if (!acc[faq.category]) {
                    acc[faq.category] = [];
                }
                acc[faq.category].push(faq);
                return acc;
            }, {});

            let html = '';
            for (const category in faqsByCategory) {
                html += `<h4 class="faq-category-title scroll-animate">${category}</h4>`;
                faqsByCategory[category].forEach((faq, index) => {
                    const uniqueId = `faq-${category.replace(/\s+/g, '-')}-${index}`;
                    html += `
                        <div class="accordion-item scroll-animate">
                            <h2 class="accordion-header" id="heading-${uniqueId}">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-${uniqueId}" aria-expanded="false" aria-controls="collapse-${uniqueId}">
                                    ${faq.q}
                                </button>
                            </h2>
                            <div id="collapse-${uniqueId}" class="accordion-collapse collapse" aria-labelledby="heading-${uniqueId}" data-bs-parent="#faqAccordionContainer">
                                <div class="accordion-body">
                                    ${faq.a}
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            accordionContainer.innerHTML = html;
        }

        document.getElementById('faqSearchInput')?.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filtered = faqData.filter(faq =>
                faq.q.toLowerCase().includes(searchTerm) ||
                faq.a.toLowerCase().includes(searchTerm) ||
                faq.category.toLowerCase().includes(searchTerm)
            );
            loadFaqs(filtered);
        });


    </script>
</body>
</html>
