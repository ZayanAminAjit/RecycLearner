<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        RecycLearner
    </title>
    <link rel="icon" type="image/png" href="assets/logo.png" onerror="this.href='https://placehold.co/32x32/007bff/ffffff?text=RL';">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /*
        ==========================================================================
        RecycLearner - Comprehensive Stylesheet
        Version: 2.2 (Gemini API Integration Enhancements)
        Author: AI Generated
        ==========================================================================

        Table of Contents:
        1.  :root Variables (Light & Dark Modes)
        2.  Base & Body Styles
        3.  Typography
        4.  View Management & Animations
        5.  Header & Logo
        6.  Dark Mode Toggle Switch
        7.  User Authentication Section (Header)
        8.  Main Navigation (Desktop Tabs & Mobile Offcanvas)
        9.  Tab Content Wrapper & General Tab Pane Styling
        10. Specific Tab Panes:
            10.1. About Us
            10.2. Our Mission
            10.3. How It Works
            10.4. AI Recycle Helper (Gemini Powered)
            10.5. Our Plans
            10.6. Recycling Guides (Enhanced with Gemini Insights Button & Upcycling Generator)
            10.7. FAQ Section (Enhanced with Gemini Custom Question Button)
        11. Subscription Plans Styling
        12. Buttons (General & Specific, including AI buttons)
        13. Forms (General & Specific)
        14. Authentication Views (Sign In, Sign Up)
        15. Profile View (Expanded)
        16. Payment View
        17. Footer
        18. Modal Styling (Enhanced for AI responses)
        19. Spinner / Loader
        20. Scroll Animations & Utility Classes
        21. Responsive Adjustments (Multiple Breakpoints)
        22. Print Styles (Basic)
        ==========================================================================
        */

        :root {
            /* Light Mode Color Palette */
            --primary-blue: #007bff;
            --secondary-blue: #0056b3;
            --primary-green: #28a745;
            --secondary-green: #1e7e34;
            --light-green: #e6f7ea;
            --light-blue: #e0f3ff;
            --accent-yellow: #ffc107;
            --accent-orange: #fd7e14;
            --accent-red: #dc3545;
            --accent-teal: #20c997;
            --accent-purple: #6f42c1;

            --primary-blue-rgb: 0, 123, 255;
            --primary-green-rgb: 40, 167, 69;
            --accent-red-rgb: 220, 53, 69;


            --background-start: #f4f7f9; /* Slightly lighter gradient start */
            --background-mid: #e9eef2;
            --background-end: #dfe6ec;
            --card-background: rgba(255, 255, 255, 0.98);
            --header-background: rgba(255, 255, 255, 0.97); /* Slightly more opaque */
            --footer-background: rgba(238, 242, 245, 0.95); /* Lighter footer */

            --text-dark: #1a202c;
            --text-dark-rgb: 26, 32, 44;
            --text-medium: #4a5568;
            --text-light: #718096;
            --text-on-primary: #ffffff;
            --text-on-success: #ffffff;

            --border-color: #cbd5e0;
            --border-color-light: #e2e8f0;
            --input-border-color: #ced4da;
            --input-focus-border-color: #80bdff;
            --input-focus-box-shadow: rgba(0, 123, 255, 0.25);


            --border-radius-xl: 45px;
            --border-radius-lg: 35px;
            --border-radius-md: 20px; /* Slightly smaller medium radius */
            --border-radius-sm: 12px; /* Slightly smaller small radius */
            --border-radius-xs: 6px;

            --shadow-light: 0 4px 12px rgba(0, 0, 0, 0.06); /* Softer light shadow */
            --shadow-medium: 0 8px 25px rgba(0, 0, 0, 0.09); /* Softer medium shadow */
            --shadow-strong: 0 12px 35px rgba(0, 0, 0, 0.12); /* Softer strong shadow */
            --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.05);

            --transition-speed: 0.35s; /* Slightly faster base transition */
            --transition-speed-fast: 0.2s;
            --transition-speed-slow: 0.55s;
            --transition-cubic: cubic-bezier(0.25, 0.8, 0.25, 1);

            /* Dark Mode Color Palette - Overridden by body.dark-mode */
            --dm-primary-blue: #3b8dff;
            --dm-secondary-blue: #2a78e0;
            --dm-primary-green: #34c759;
            --dm-secondary-green: #29a347;
            --dm-light-green: rgba(52, 199, 89, 0.15);
            --dm-light-blue: rgba(59, 141, 255, 0.15);
            --dm-accent-yellow: #ffd60a;
            --dm-accent-orange: #ff9f0a;
            --dm-accent-red: #ff453a;
            --dm-accent-teal: #64d2ff;
            --dm-accent-purple: #bf5af2;

            --dm-primary-blue-rgb: 59, 141, 255;
            --dm-primary-green-rgb: 52, 199, 89;
            --dm-accent-red-rgb: 255, 69, 58;


            --dm-background-start: #1a1a1c; /* Darker, more distinct dark shades */
            --dm-background-mid: #262628;
            --dm-background-end: #333335;
            --dm-card-background: rgba(38, 38, 40, 0.98); /* Dark card */
            --dm-header-background: rgba(26, 26, 28, 0.97); /* Dark header */
            --dm-footer-background: rgba(26, 26, 28, 0.95);

            --dm-text-dark: #f5f5f7;    /* Primary text for dark mode (very light grey) */
            --dm-text-dark-rgb: 245, 245, 247;
            --dm-text-medium: #b0b0b3; /* Secondary text */
            --dm-text-light: #8a8a8e;  /* Tertiary text */
            --dm-text-on-primary: #ffffff;
            --dm-text-on-success: #ffffff;

            --dm-border-color: #444446; /* Darker border */
            --dm-border-color-light: #363638;
            --dm-input-border-color: #505053;
            --dm-input-focus-border-color: var(--dm-primary-blue);
            --dm-input-focus-box-shadow: rgba(59, 141, 255, 0.3);

            --dm-shadow-light: 0 5px 15px rgba(0, 0, 0, 0.2); /* Slightly stronger shadows for dark mode */
            --dm-shadow-medium: 0 10px 30px rgba(0, 0, 0, 0.3);
            --dm-shadow-strong: 0 15px 40px rgba(0, 0, 0, 0.35);
            --dm-shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.12);
        }

        /* --- Base & Body Styles --- */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px; /* Base font size */
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(135deg, var(--background-start), var(--background-mid), var(--background-end));
            background-attachment: fixed;
            background-size: 300% 300%; 
            animation: bgAnimation 40s ease infinite alternate; 
            color: var(--text-dark);
            overflow-x: hidden;
            line-height: 1.7; 
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background var(--transition-speed-slow) ease, color var(--transition-speed) ease;
        }

        body.dark-mode {
            --primary-blue: var(--dm-primary-blue);
            --secondary-blue: var(--dm-secondary-blue);
            --primary-green: var(--dm-primary-green);
            --secondary-green: var(--dm-secondary-green);
            --light-green: var(--dm-light-green);
            --light-blue: var(--dm-light-blue);
            --accent-yellow: var(--dm-accent-yellow);
            --accent-orange: var(--dm-accent-orange);
            --accent-red: var(--dm-accent-red);
            --accent-teal: var(--dm-accent-teal);
            --accent-purple: var(--dm-accent-purple);

            --primary-blue-rgb: var(--dm-primary-blue-rgb);
            --primary-green-rgb: var(--dm-primary-green-rgb);
            --accent-red-rgb: var(--dm-accent-red-rgb);

            --background-start: var(--dm-background-start);
            --background-mid: var(--dm-background-mid);
            --background-end: var(--dm-background-end);
            --card-background: var(--dm-card-background);
            --header-background: var(--dm-header-background);
            --footer-background: var(--dm-footer-background);

            --text-dark: var(--dm-text-dark);
            --text-dark-rgb: var(--dm-text-dark-rgb);
            --text-medium: var(--dm-text-medium);
            --text-light: var(--dm-text-light);

            --border-color: var(--dm-border-color);
            --border-color-light: var(--dm-border-color-light);
            --input-border-color: var(--dm-input-border-color);
            --input-focus-border-color: var(--dm-input-focus-border-color);
            --input-focus-box-shadow: var(--dm-input-focus-box-shadow);

            --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.2); /* Slightly stronger shadows for dark mode */
            --shadow-medium: 0 10px 30px rgba(0, 0, 0, 0.3);
            --shadow-strong: 0 15px 40px rgba(0, 0, 0, 0.35);
            --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.12);

            animation-name: bgAnimationDark; 
        }

        @keyframes bgAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes bgAnimationDark { 
             0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- Typography --- */
        h1, .h1, h2, .h2, h3, .h3, h4, .h4, h5, .h5, h6, .h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            color: var(--text-dark); 
            line-height: 1.3;
            margin-top: 0;
            margin-bottom: 1rem; 
            transition: color var(--transition-speed) ease;
        }

        h1, .h1 { font-size: clamp(1.9rem, 4.8vw, 2.8rem); letter-spacing: -0.4px; }
        h2, .h2 { font-size: clamp(1.65rem, 3.8vw, 2.3rem); }
        h3, .h3 { font-size: clamp(1.4rem, 3.3vw, 1.9rem); }
        h4, .h4 { font-size: clamp(1.2rem, 2.8vw, 1.65rem); }
        h5, .h5 { font-size: clamp(1.05rem, 2.3vw, 1.4rem); }
        h6, .h6 { font-size: clamp(0.95rem, 1.8vw, 1.15rem); }

        p {
            margin-bottom: 1.2rem;
            font-size: clamp(0.92rem, 1.4vw, 1.02rem);
            color: var(--text-medium);
            transition: color var(--transition-speed) ease;
        }

        .lead {
            font-size: clamp(1.05rem, 2.3vw, 1.25rem); 
            font-weight: 400; 
            color: var(--text-medium);
            margin-bottom: 1.6rem;
        }

        a {
            color: var(--primary-blue);
            text-decoration: none;
            transition: color var(--transition-speed-fast) ease, opacity var(--transition-speed-fast) ease;
        }
        a:hover {
            color: var(--secondary-blue);
            text-decoration: underline;
            opacity: 0.88;
        }

        strong, b { font-weight: 700; color: var(--text-dark); } 
        em, i { font-style: italic; }

        blockquote {
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--primary-green);
            background-color: var(--light-green); 
            border-radius: var(--border-radius-sm);
            font-style: italic;
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }
        blockquote p { margin-bottom: 0; }
        blockquote footer {
            margin-top: 0.5rem;
            font-size: 0.88rem;
            color: var(--text-light); 
        }


        /* --- View Management & Animations --- */
        .view {
            display: none;
            animation: viewFadeIn var(--transition-speed-slow) var(--transition-cubic);
            min-height: 65vh; 
        }
        .view.active { display: block; }

        @keyframes viewFadeIn {
            from { opacity: 0; transform: translateY(15px) scale(0.985); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        @keyframes subtlePulse { 
            0% { transform: scale(1); }
            50% { transform: scale(1.015); }
            100% { transform: scale(1); }
        }

        /* --- Header & Logo --- */
        header {
            background-color: var(--header-background); 
            padding: 0.9rem 1.8rem; 
            backdrop-filter: blur(20px) saturate(180%); 
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid var(--border-color); 
            position: sticky;
            top: 0;
            z-index: 1050; 
            box-shadow: var(--shadow-medium); 
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: padding var(--transition-speed-fast) ease-out, background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }

        .header-main-content {
            display: flex;
            align-items: center;
            gap: 0.9rem; 
            animation: fadeInDown 0.4s ease-out;
        }
         .header-logo-container {
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }
        .header-logo-container:hover .logo-img { 
            transform: scale(1.12) rotate(-7deg);
            filter: drop-shadow(0 0 10px rgba(var(--primary-green-rgb), 0.45));
        }
        body.dark-mode .header-logo-container:hover .logo-img {
             filter: drop-shadow(0 0 10px rgba(var(--dm-primary-green-rgb), 0.55));
        }


        header .logo-img {
            height: 50px; 
            width: 50px;
            object-fit: contain;
            border-radius: var(--border-radius-sm);
            transition: transform var(--transition-speed) ease-out, filter 0.3s ease;
        }

        header .logo-title {
            font-size: clamp(1.7rem, 4.3vw, 2.4rem); 
            font-weight: 800;
            margin: 0;
            letter-spacing: -0.8px; 
            line-height: 1;
        }
        header .logo-title .recyc { color: var(--primary-blue); }
        header .logo-title .learner { color: var(--primary-green); }

        @media (max-width: 819.98px) { 
            header .logo-title { font-size: 1.5rem; }
            header { padding: 0.7rem 1.2rem; }
        }

        /* --- Dark Mode Toggle Switch --- */
        .dark-mode-toggle-container {
            margin-left: auto; 
            margin-right: 1.3rem; 
            display: flex;
            align-items: center;
        }
        .dark-mode-switch {
            position: relative;
            display: inline-block;
            width: 56px; 
            height: 30px;
        }
        .dark-mode-switch input { display: none; } 

        .dark-mode-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #bdc3c7; 
            transition: var(--transition-speed) ease;
            border-radius: 30px;
            box-shadow: var(--shadow-inset);
        }
        body.dark-mode .dark-mode-slider {
            background-color: #4e555b; 
        }

        .dark-mode-slider:before { 
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition-speed) var(--transition-cubic);
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.15);
        }
        .dark-mode-slider .fa-moon, .dark-mode-slider .fa-sun {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 14px; 
            color: var(--accent-yellow); 
            transition: opacity var(--transition-speed) ease, color var(--transition-speed) ease;
        }
        .dark-mode-slider .fa-moon { 
            right: 7px;
            opacity: 1; 
            color: var(--secondary-blue); 
        }
        .dark-mode-slider .fa-sun { 
            left: 7px;
            opacity: 0; 
        }

        input:checked + .dark-mode-slider { 
            background-color: var(--primary-green); 
        }
        body.dark-mode input:checked + .dark-mode-slider { 
            background-color: var(--dm-primary-green);
        }

        input:focus + .dark-mode-slider { 
            box-shadow: 0 0 0 2px var(--header-background), 0 0 0 3.5px var(--primary-blue);
        }
        body.dark-mode input:focus + .dark-mode-slider {
            box-shadow: 0 0 0 2px var(--dm-header-background), 0 0 0 3.5px var(--dm-primary-blue);
        }

        input:checked + .dark-mode-slider:before { 
            transform: translateX(26px);
        }
        input:checked + .dark-mode-slider .fa-moon { opacity: 0; } 
        input:checked + .dark-mode-slider .fa-sun { opacity: 1; } 


        /* --- User Auth Section in Header --- */
        #user-auth-section {
            position: relative;
            display: flex;
            align-items: center;
        }
        #user-auth-section .btn-sign-in {
            background: linear-gradient(50deg, var(--primary-blue), var(--secondary-blue));
            color: var(--text-on-primary);
            padding: 0.6rem 1.2rem; 
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 0.85rem;
            transition: all var(--transition-speed-fast) var(--transition-cubic);
            box-shadow: var(--shadow-light);
            border:none;
            text-transform: uppercase;
            letter-spacing: 0.6px; 
        }
        #user-auth-section .btn-sign-in:hover, #user-auth-section .btn-sign-in:focus {
            background: linear-gradient(50deg, var(--secondary-blue), var(--primary-blue));
            transform: translateY(-2.5px) scale(1.04);
            box-shadow: var(--shadow-medium);
        }

        #user-auth-section .profile-dropdown img {
            width: 44px; 
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            border: 2.5px solid var(--primary-green); 
            padding: 2.5px;
            object-fit: cover;
            transition: transform var(--transition-speed-fast) ease, box-shadow var(--transition-speed-fast) ease, border-color 0.3s ease;
        }
         #user-auth-section .profile-dropdown img:hover {
            transform: scale(1.13) rotate(4deg); 
            box-shadow: 0 0 18px rgba(var(--text-dark-rgb), 0.18); 
            border-color: var(--accent-yellow);
         }

        #user-auth-section .dropdown-menu {
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-strong); 
            border: 1px solid var(--border-color-light); 
            padding: 0.4rem 0;
            animation: fadeInDropdown 0.25s ease-out;
            min-width: 190px; 
            background-color: var(--card-background); 
        }
        @keyframes fadeInDropdown { 
            from { opacity: 0; transform: translateY(-12px) scale(0.975); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        #user-auth-section .dropdown-item {
            font-weight: 500;
            font-size: 0.92rem; 
            padding: 0.7rem 1.4rem; 
            color: var(--text-dark); 
            transition: background-color var(--transition-speed-fast) ease, color var(--transition-speed-fast) ease, padding-left 0.2s ease, transform 0.2s ease;
        }
        #user-auth-section .dropdown-item i {
            margin-right: 12px;
            color: var(--text-medium); 
            width: 18px; 
            text-align: center;
            transition: color var(--transition-speed-fast) ease, transform var(--transition-speed-fast) ease;
        }
        #user-auth-section .dropdown-item:hover {
            background-color: var(--light-blue); 
            color: var(--primary-blue); 
            padding-left: 1.6rem; 
            transform: translateX(2.5px);
        }
        #user-auth-section .dropdown-item:hover i {
            color: var(--primary-blue); 
            transform: scale(1.08);
        }
        #user-auth-section .dropdown-divider { margin: 0.4rem 0; border-top: 1px solid var(--border-color-light); }

        /* --- Main Navigation (Desktop Tabs & Mobile Offcanvas) --- */
        .main-nav-wrapper-container {
             transition: opacity 0.45s ease-out, max-height 0.55s var(--transition-cubic), margin-bottom 0.55s var(--transition-cubic), padding 0.55s var(--transition-cubic), transform 0.45s ease-out;
             max-height: 100px; /* Adjust if needed based on nav height */
             transform: translateY(0);
             overflow: hidden; /* Important for max-height transition */
        }
        .main-nav-wrapper-container.hidden-for-auth { 
            opacity: 0;
            max-height: 0 !important;
            margin-bottom: 0 !important;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
            pointer-events: none;
            transform: translateY(-20px); /* Slight upward movement on hide */
        }
        .main-nav-wrapper { 
            display: flex;
            justify-content: center;
            padding: 0.7rem 0;
            margin-bottom: 2.2rem; 
        }

        .nav-pills { 
            background-color: rgba(var(--text-dark-rgb), 0.035); 
            padding: 0.5rem; 
            border-radius: var(--border-radius-xl);
            display: inline-flex;
            flex-wrap: nowrap; 
            overflow-x: auto; 
            box-shadow: var(--shadow-medium); 
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            -ms-overflow-style: none;  
            scrollbar-width: none;  
            border: 1px solid rgba(var(--text-dark-rgb), 0.07); 
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }
        .nav-pills::-webkit-scrollbar { display: none; } 

        .nav-pills .nav-item { margin: 0 4px; flex-shrink: 0; } 

        .nav-pills .nav-link { 
            border-radius: var(--border-radius-lg);
            color: var(--text-dark); 
            font-weight: 600;
            font-size: 0.9rem; 
            padding: 0.8rem 1.6rem; 
            transition: all var(--transition-speed) var(--transition-cubic);
            border: 2px solid transparent;
            white-space: nowrap; 
            letter-spacing: 0.3px; 
        }
        .nav-pills .nav-link i { margin-right: 9px; font-size: 1.03em; }

        .nav-pills .nav-link:hover, .nav-pills .nav-link:focus {
            background-color: rgba(var(--primary-blue-rgb), 0.08); 
            transform: translateY(-3.5px); 
            color: var(--primary-blue); 
            border-color: var(--light-blue); 
        }

        .nav-pills .nav-link.active {
            background: linear-gradient(65deg, var(--primary-blue), var(--primary-green));
            color: var(--text-on-primary) !important; 
            box-shadow: 0 8px 20px rgba(var(--primary-blue-rgb), 0.28); 
            transform: translateY(-3.5px) scale(1.05); 
            border-color: transparent;
        }
        .nav-pills .nav-link.active:hover { 
             box-shadow: 0 10px 25px rgba(var(--primary-blue-rgb), 0.35); 
        }

        /* Mobile Navigation (Offcanvas) */
        /* .mobile-nav-toggle {
            font-size: 1.6rem; 
            color: var(--primary-blue); 
            background: var(--card-background); 
            border: 1px solid rgba(var(--text-dark-rgb), 0.09); 
            padding: 0.35rem 0.7rem;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-medium); 
            transition: all var(--transition-speed-fast) ease, opacity 0.3s ease-out, visibility 0.3s ease-out, display 0.1s;
        }
        .mobile-nav-toggle:hover { transform: scale(1.13) rotate(6deg); background-color: var(--light-blue); } 
        .mobile-nav-toggle.hidden-for-auth { 
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none !important;
            display: none !important;
        } */

        /* .offcanvas {
            background-color: var(--background-mid); 
            transition: background-color var(--transition-speed) ease;
            box-shadow: var(--shadow-strong);
        }
        .offcanvas-header {
            border-bottom: 1px solid var(--border-color); 
            background-color: var(--light-blue); 
            padding: 1.1rem 1.3rem;
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }
        .offcanvas-title { color: var(--primary-blue); font-weight: 700; font-size: 1.3rem; } 
        .offcanvas-body .nav-link { 
            display: flex;
            align-items: center;
            padding: 1rem 1.3rem; 
            margin-bottom: 0.5rem;
            border-radius: var(--border-radius-md);
            color: var(--text-dark); 
            font-weight: 600;
            font-size: 0.95rem; 
            transition: background-color var(--transition-speed-fast) ease, color var(--transition-speed-fast) ease, transform var(--transition-speed-fast) ease, box-shadow 0.2s ease;
        }
        .offcanvas-body .nav-link i { margin-right: 14px; font-size: 1.2em; width: 24px; text-align: center; }
        .offcanvas-body .nav-link:hover {
            background-color: var(--light-green); 
            color: var(--primary-green); 
            transform: translateX(7px) scale(1.025); 
            box-shadow: var(--shadow-light); 
        }
        .offcanvas-body .nav-link.active {
            background-color: var(--primary-green); 
            color: var(--text-on-success) !important; 
            transform: translateX(7px) scale(1.025);
            box-shadow: var(--shadow-medium); 
        }
        .offcanvas .btn-close {
            filter: var(--bs-btn-close-white-filter); 
        }
        body.dark-mode .offcanvas .btn-close {
             filter: invert(1) grayscale(100%) brightness(200%); 
        } */


        /* --- Tab Content Wrapper & General Tab Pane Styling --- */
        .tab-content-wrapper {
            background-color: var(--card-background); 
            padding: clamp(1.7rem, 4.3vw, 3.3rem); 
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-strong); 
            min-height: 520px; 
            backdrop-filter: blur(18px) saturate(190%);
            -webkit-backdrop-filter: blur(18px) saturate(190%);
            border: 1px solid rgba(var(--text-dark-rgb), 0.06); 
            margin-top: 0;
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }

        .tab-content-wrapper h2, .auth-view h2, .profile-view h2, #payment-view h2,
        .section-title { 
            color: var(--primary-green); 
            font-weight: 700;
            font-size: clamp(1.9rem, 4.3vw, 2.5rem); 
            margin-bottom: 2.2rem; 
            border-bottom: 3.5px solid var(--primary-blue); 
            padding-bottom: 0.9rem; 
            display: inline-block; 
            animation: slideInFromLeft 0.8s ease-out;
        }
        .tab-pane h3, .section-subtitle { 
             font-size: clamp(1.6rem, 3.6vw, 2.1rem); 
             color: var(--primary-blue); 
             margin-top: 2.8rem; 
             margin-bottom: 1.5rem; 
             padding-bottom: 0.6rem;
             border-bottom: 2px dotted var(--light-blue); 
        }
        .tab-pane h3:first-of-type, .section-subtitle:first-of-type {
            margin-top: 0.4rem; 
        }

        .tab-pane { animation: contentFadeIn 0.7s ease-in-out; } 
        @keyframes contentFadeIn {
            from { opacity: 0; transform: scale(0.965) translateY(12px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        @keyframes slideInFromLeft { 
            from { opacity: 0; transform: translateX(-35px); }
            to { opacity: 1; transform: translateX(0); }
        }


        .tab-pane p, .tab-pane ul, .tab-pane ol {
            font-size: clamp(0.95rem, 2.2vw, 1.05rem); 
            line-height: 1.85; 
            color: var(--text-medium); 
            margin-bottom: 1.4rem; 
        }
        .tab-pane ul:not(.list-unstyled), .tab-pane ol:not(.list-unstyled) { list-style-type: none; padding-left: 0.8rem; }
        .tab-pane ul:not(.list-unstyled) li {
            padding-left: 2.3em; 
            position: relative;
            margin-bottom: 0.8rem; 
        }
        .tab-pane ul:not(.list-unstyled) li::before {
            content: "\f058"; 
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            color: var(--primary-green); 
            position: absolute;
            left: 0;
            top: 6px; 
            font-size: 1.2em; 
            transition: transform var(--transition-speed-fast) ease-out, color 0.2s ease;
        }
        .tab-pane ul:not(.list-unstyled) li:hover::before {
            transform: scale(1.25) rotate(12deg); 
            color: var(--secondary-green); 
        }
        .tab-pane strong { color: var(--text-dark); font-weight: 600; } 

        /* --- 10.1. About Us --- */
        #about-tab-pane .about-intro-image {
            max-width: 100%;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-medium);
            margin-bottom: 1.5rem;
        }
      
        /* --- 10.2. Our Mission --- */
        #mission-tab-pane .mission-icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.4rem;
            margin-top: 1.8rem;
        }
        #mission-tab-pane .mission-icon-item {
            text-align: center;
            padding: 1.4rem;
            border: 1px solid var(--border-color-light); 
            border-radius: var(--border-radius-md);
            background-color: rgba(var(--text-dark-rgb), 0.025); 
        }
        #mission-tab-pane .mission-icon-item i {
            font-size: 2.3rem;
            color: var(--primary-blue); 
            margin-bottom: 0.9rem;
        }


        /* --- 10.3. How It Works --- (Enhanced hover) */
        #how-it-works-tab-pane .col-md-4 > div { 
            transition: all 0.3s var(--transition-cubic);
            border: 1px solid var(--border-color-light); 
            background-color: var(--card-background); /* Changed from white to adapt to dark mode */
        }
        #how-it-works-tab-pane .col-md-4 > div:hover {
            transform: translateY(-10px) scale(1.025);
            box-shadow: var(--shadow-strong) !important; 
            border-color: var(--primary-blue) !important; 
        }
        #how-it-works-tab-pane .col-md-4 > div:hover i {
            transform: scale(1.2) rotate(4deg);
            color: var(--primary-green) !important; 
        }

        /* --- 10.6. Recycling Guides (Enhanced) --- */
        #recycling-guides-tab-pane .guide-category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
            gap: 1.8rem; 
            margin-top: 1.4rem;
        }
        .guide-card {
            background-color: var(--card-background); 
            border: 1px solid var(--border-color-light); 
            border-radius: var(--border-radius-md);
            padding: 1.6rem; 
            box-shadow: var(--shadow-light); 
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease, border-color var(--transition-speed) ease;
            display: flex;
            flex-direction: column;
            height: 100%; 
        }
        .guide-card:hover {
            transform: translateY(-7px);
            box-shadow: var(--shadow-medium); 
            border-color: var(--primary-green);
        }
        .guide-card-icon {
            font-size: 2.6rem; 
            color: var(--primary-green); 
            margin-bottom: 1.1rem;
            text-align: center;
            transition: transform 0.3s ease;
        }
        .guide-card:hover .guide-card-icon {
            transform: scale(1.1) rotate(-5deg);
        }
        .guide-card h4 {
            font-size: 1.3rem; 
            color: var(--primary-blue); 
            margin-bottom: 0.7rem;
        }
        .guide-card p {
            font-size: 0.92rem;
            color: var(--text-medium); 
            flex-grow: 1; 
            margin-bottom: 1.1rem;
        }
        .guide-card .btn-learn-more {
            margin-top: auto; 
            background-color: var(--primary-green);
            border-color: var(--primary-green);
            color: var(--text-on-success);
            font-size: 0.85rem;
            padding: 0.6rem 1.2rem;
        }
        .guide-card .btn-learn-more:hover {
            background-color: var(--secondary-green);
            border-color: var(--secondary-green);
            transform: scale(1.03);
        }
        /* Specific Guide Detail Styles (Modal) */
        .guide-detail-content img { /* For images inside modal if added */
            max-width: 100%;
            height: auto;
            border-radius: var(--border-radius-sm);
            margin-bottom: 1rem;
            box-shadow: var(--shadow-light);
        }
        .guide-detail-content .dos-donts ul { /* If using do/dont lists in modal */
            padding-left: 18px;
            list-style-type: none;
        }
        .guide-detail-content .dos-donts li { position: relative; padding-left: 25px; margin-bottom: 0.5rem;}
        .guide-detail-content .dos-donts li.do::before {
            content: '\f00c'; /* Check mark */
            color: var(--primary-green);
            font-family: "Font Awesome 6 Free"; font-weight: 900;
            position: absolute; left: 0; top: 2px;
        }
        .guide-detail-content .dos-donts li.dont::before {
            content: '\f00d'; /* Times mark */
            color: var(--accent-red);
            font-family: "Font Awesome 6 Free"; font-weight: 900;
            position: absolute; left: 0; top: 2px;
        }

        /* --- 10.7. FAQ Section (Enhanced) --- */
        #faq-tab-pane .faq-search-filter {
            margin-bottom: 2.2rem;
            position: relative;
        }
        #faq-tab-pane #faqSearchInput {
            padding: 0.9rem 1.3rem;
            padding-left: 3rem; /* Space for icon */
            border-radius: var(--border-radius-md);
            font-size: 1rem;
            border: 2px solid var(--input-border-color);
        }
        #faq-tab-pane .faq-search-filter .input-group-text { /* For icon */
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            background: transparent;
            border: none;
            padding: 0 1rem;
            display: flex;
            align-items: center;
            color: var(--text-light);
            font-size: 1.1rem;
            z-index: 3; /* Above input */
        }

        .accordion-item {
            background-color: var(--card-background); 
            border: 1px solid var(--border-color-light); 
            margin-bottom: 0.7rem;
            border-radius: var(--border-radius-md) !important; 
            overflow: hidden; /* Ensures rounded corners are respected by children */
            transition: box-shadow 0.3s ease;
        }
        .accordion-item:hover {
            box-shadow: var(--shadow-light);
        }

        .accordion-button {
            background-color: rgba(var(--text-dark-rgb), 0.02); 
            color: var(--text-dark); 
            font-weight: 600;
            font-size: 1.05rem;
            padding: 1.1rem 1.4rem; 
            border-radius: var(--border-radius-md) !important;
            text-align: left;
            width: 100%;
            border: none; /* Remove Bootstrap's default border */
        }
        .accordion-button:not(.collapsed) {
            background-color: var(--light-blue); 
            color: var(--primary-blue); 
            box-shadow: none; 
        }
        .accordion-button:focus {
            box-shadow: 0 0 0 0.2rem var(--input-focus-box-shadow); 
            z-index: 2; /* Ensure focus outline is visible */
        }
        .accordion-button::after { /* Customizing the accordion arrow */
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%234a5568'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
            transition: transform 0.3s ease;
        }
        .accordion-button:not(.collapsed)::after {
             transform: rotate(-180deg);
        }
        body.dark-mode .accordion-button::after {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23aeaeb2'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
        }
        .accordion-body {
            padding: 1.2rem 1.4rem; /* Slightly adjusted padding */
            font-size: 0.95rem;
            line-height: 1.75;
            background-color: rgba(var(--text-dark-rgb), 0.01);
        }
        body.dark-mode .accordion-body {
             background-color: rgba(var(--dm-text-dark-rgb), 0.03);
        }
        .faq-category-title {
            font-size: 1.4rem;
            color: var(--primary-green); 
            margin-top: 1.8rem;
            margin-bottom: 0.9rem;
            border-bottom: 1.5px solid var(--border-color); 
            padding-bottom: 0.4rem;
            font-weight: 600;
        }
        .faq-category-title:first-of-type { margin-top: 0; }
        #ask-ai-faq-button-container { /* Container for the new AI FAQ button */
            text-align: center;
            margin-top: 2.5rem;
            padding-top: 1.5rem;
            border-top: 1px dashed var(--border-color-light);
        }


        /* --- 10.4. AI Recycle Helper --- */
        #waste-form .or-divider {
            display: flex;
            align-items: center;
            text-align: center;
            color: var(--text-light); 
            margin: 1.7rem 0; 
            font-weight: 600;
            font-size: 0.95rem;
        }
        #waste-form .or-divider::before,
        #waste-form .or-divider::after {
            content: '';
            flex: 1;
            border-bottom: 1.5px solid var(--border-color); 
        }
        #waste-form .or-divider:not(:empty)::before { margin-right: .8rem; }
        #waste-form .or-divider:not(:empty)::after { margin-left: .8rem; }

        #waste-image-preview-container {
            margin-top: 1.4rem; 
            text-align: center;
            min-height: 65px;
            padding: 10px;
            background-color: rgba(var(--text-dark-rgb), 0.025); 
            border-radius: var(--border-radius-md);
            border: 1px solid var(--border-color); 
        }
        #waste-image-preview {
            max-width: 100%;
            max-height: 230px; 
            border-radius: var(--border-radius-sm);
            border: 2.5px dashed var(--light-blue); 
            padding: 7px;
            object-fit: contain;
            display: none;
            background-color: var(--card-background); 
        }

        /* --- 10.5. Our Plans / Subscription Plans Styling --- */
        #plans-tab-pane h2 {
             text-align: center;
             border-bottom: none;
             margin-bottom: 1.4rem; 
        }
         #plans-tab-pane .lead {
            text-align: center;
            margin-bottom: 2.8rem; 
         }

        .subscription-plan {
            border: 1.5px solid var(--border-color); 
            border-radius: var(--border-radius-md);
            padding: 2.5rem 1.6rem; 
            text-align: center;
            background-color: var(--card-background); 
            box-shadow: var(--shadow-medium); 
            margin-bottom: 2.2rem; 
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease, border-color 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        .subscription-plan::before { 
            content: '';
            position: absolute;
            top: -70px;
            left: -70px;
            width: 140px;
            height: 140px;
            background: linear-gradient(45deg, var(--light-blue), var(--light-green)); 
            border-radius: 50%;
            opacity: 0.07; 
            transition: transform 0.8s ease, opacity 0.8s ease;
            z-index: 0;
        }

        .subscription-plan:hover {
            transform: translateY(-14px) scale(1.035); 
            box-shadow: var(--shadow-strong); 
            border-color: var(--primary-blue); 
        }
        .subscription-plan:hover::before { transform: scale(2.3); opacity: 0.12; }

        .subscription-plan > * { position: relative; z-index: 1; }

        .subscription-plan .plan-icon {
            font-size: 3.2rem; 
            margin-bottom: 1.1rem;
            color: var(--primary-blue); 
            transition: color var(--transition-speed) ease, transform var(--transition-speed) ease;
        }
        .subscription-plan:hover .plan-icon { color: var(--primary-green); transform: rotateY(20deg) scale(1.12) translateY(-5px); } 

        .subscription-plan h3 {
            color: var(--primary-blue); 
            font-weight: 700;
            font-size: 1.65rem; 
            margin-bottom: 1.1rem;
        }

        .subscription-plan .plan-price {
            font-size: 2.3rem; 
            font-weight: 800;
            color: var(--text-dark); 
            margin: 1.6rem 0; 
        }
        .subscription-plan .plan-price small { font-size: 0.95rem; color: var(--text-light); font-weight: 400;} 

        .subscription-plan .plan-features {
            list-style: none;
            padding: 0;
            margin: 1.1rem 0 1.6rem;
            text-align: left;
            flex-grow: 1;
            font-size: 0.95rem; 
        }
        .subscription-plan .plan-features li {
            margin-bottom: 0.6rem; 
            color: var(--text-medium); 
            padding-left: 1.8em; 
            position: relative;
        }
        .subscription-plan .plan-features li::before {
            content: "\f00c"; 
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            color: var(--primary-green); 
            position: absolute;
            left: 0;
            top: 5px; 
            font-size: 1.02em; 
        }

        .subscription-plan .badge.popular-badge {
            position: absolute;
            top: 16px; 
            right: 16px;
            background-color: var(--accent-yellow) !important; 
            color: var(--text-dark) !important; 
            font-weight: 700;
            padding: 0.45em 0.75em; 
            border-radius: var(--border-radius-sm);
            font-size: 0.82rem; 
            letter-spacing: 0.6px;
            transform: rotate(3.5deg); 
            box-shadow: 2.5px 2.5px 8px rgba(var(--text-dark-rgb), 0.13); 
        }
        .subscription-plan.popular-plan {
            border: 3.5px solid var(--primary-blue); 
            transform: scale(1.06); 
        }
         .subscription-plan.popular-plan:hover {
             transform: translateY(-14px) scale(1.08); 
         }


        /* --- Buttons (General & Specific) --- */
        .btn-custom,
        .subscription-plan .btn-select-plan,
        #payment-form button[type="submit"],
        #waste-form button[type="submit"],
        .auth-view button[type="submit"],
        .profile-view button[type="submit"],
        .modal-footer .btn-primary, /* Target primary buttons in modal footer */
        .btn-read-more, .btn-view-idea, .btn-learn-more,
        .btn-ai-feature /* General class for AI feature buttons */
         { 
            background: linear-gradient(65deg, var(--primary-blue), var(--secondary-blue)); 
            color: var(--text-on-primary);
            border: none;
            padding: 0.9rem 2.3rem; 
            border-radius: var(--border-radius-lg);
            transition: all var(--transition-speed) var(--transition-cubic);
            font-weight: 600;
            box-shadow: 0 7px 20px rgba(var(--primary-blue-rgb), 0.28); 
            text-transform: uppercase;
            letter-spacing: 0.8px; 
            margin-top: 1.1rem; 
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            outline: none;
            position: relative;
            overflow: hidden;
        }
        .btn-custom i, .subscription-plan .btn-select-plan i,
        .auth-view button[type="submit"] i, .profile-view button[type="submit"] i,
        .btn-read-more i, .btn-view-idea i, .btn-learn-more i,
        .modal-footer .btn-primary i,
        .btn-ai-feature i { margin-right: 10px; font-size: 1.05em; }

        .btn-custom:hover,
        .subscription-plan .btn-select-plan:hover,
        #payment-form button[type="submit"]:hover,
        #waste-form button[type="submit"]:hover,
        .auth-view button[type="submit"]:hover,
        .profile-view button[type="submit"]:hover,
        .modal-footer .btn-primary:hover,
        .btn-read-more:hover, .btn-view-idea:hover, .btn-learn-more:hover,
        .btn-ai-feature:hover {
            background: linear-gradient(65deg, var(--secondary-blue), var(--primary-blue)); 
            transform: translateY(-4.5px) scale(1.04); 
            box-shadow: 0 10px 25px rgba(var(--primary-blue-rgb), 0.35); 
        }
        .btn-custom:active, .subscription-plan .btn-select-plan:active,
        .modal-footer .btn-primary:active, .btn-ai-feature:active { 
            transform: translateY(-1.5px) scale(0.985);
            box-shadow: 0 4px 13px rgba(var(--primary-blue-rgb),0.23); 
        }


        .btn-custom:disabled, #waste-form button[type="submit"]:disabled,
        .auth-view button[type="submit"]:disabled, .profile-view button[type="submit"]:disabled,
        .btn-ai-feature:disabled {
            background: #b0bec5; 
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
            color: #78909c; 
        }
        body.dark-mode .btn-custom:disabled, body.dark-mode .btn-ai-feature:disabled {
            background: #455a64;
            color: #90a4ae;
        }


        .subscription-plan .btn-contact { 
            background: linear-gradient(65deg, var(--primary-green), var(--secondary-green)); 
            box-shadow: 0 7px 20px rgba(var(--primary-green-rgb), 0.28); 
        }
        .subscription-plan .btn-contact:hover {
            background: linear-gradient(65deg, var(--secondary-green), var(--primary-green)); 
            box-shadow: 0 10px 25px rgba(var(--primary-green-rgb), 0.35); 
        }
         .btn-google { 
            background-color: #DB4437 !important;
            color: white !important;
            border: none;
            box-shadow: 0 7px 20px rgba(219, 68, 55, 0.25);
        }
        .btn-google:hover {
            background-color: #C33D2E !important;
            box-shadow: 0 9px 23px rgba(219, 68, 55, 0.32);
            transform: translateY(-3.5px) scale(1.035);
        }
        .btn-ai-feature { /* Specific styling for AI feature buttons if needed, e.g., different color */
            background: linear-gradient(65deg, var(--accent-purple), #5a2fb0); /* Example: Purple gradient */
            box-shadow: 0 7px 20px rgba(111, 66, 193, 0.3);
        }
        .btn-ai-feature:hover {
            background: linear-gradient(65deg, #5a2fb0, var(--accent-purple));
            box-shadow: 0 10px 25px rgba(111, 66, 193, 0.4);
        }


        /* --- Forms (General & Specific) --- */
        .form-control, .form-select {
            border-radius: var(--border-radius-sm);
            padding: 0.9rem 1.3rem; 
            border: 1.8px solid var(--input-border-color); 
            transition: border-color var(--transition-speed-fast) ease, box-shadow var(--transition-speed-fast) ease, background-color 0.2s ease, color 0.2s ease;
            font-size: 1rem; 
            background-clip: padding-box;
            color: var(--text-dark); 
            background-color: var(--card-background); 
        }
        .form-control:focus, .form-select:focus {
            border-color: var(--input-focus-border-color); 
            box-shadow: 0 0 0 0.22rem var(--input-focus-box-shadow); 
            background-color: var(--card-background); 
            color: var(--text-dark); 
        }
        textarea.form-control { min-height: 120px;  } 

        .form-label {
            font-weight: 600;
            color: var(--text-dark); 
            margin-bottom: 0.5rem; 
            font-size: 0.95rem; 
        }
        .form-text { color: var(--text-light); font-size: 0.85rem; } 
        .form-check-label { font-size: 0.95rem; color: var(--text-medium); cursor: pointer; } 
        .form-check-input {
            width: 1.2em; height: 1.2em; 
            margin-top: 0.28em;
            cursor: pointer;
            border: 1.5px solid var(--input-border-color); 
            background-color: var(--card-background); 
        }
        .form-check-input:checked {
            background-color: var(--primary-green); 
            border-color: var(--primary-green); 
        }
        .form-check-input:focus {
            box-shadow: 0 0 0 0.22rem rgba(var(--primary-green-rgb), 0.25); 
            border-color: var(--primary-green); 
        }
        .input-group-text {
            background-color: rgba(var(--text-dark-rgb), 0.04); 
            border: 1.8px solid var(--input-border-color); 
            color: var(--text-medium); 
            border-right: none; 
        }
        .form-control-lg { 
            padding: 0.95rem 1.4rem;
            font-size: 1.1rem;
        }


        /* --- Authentication & Profile Views & Payment View --- */
        .auth-view, .profile-view, #payment-view {
            max-width: 620px; 
            margin: 2.8rem auto; 
            padding: clamp(2rem, 5.3vw, 3.5rem); 
            background-color: var(--card-background); 
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-strong); 
            backdrop-filter: blur(18px) saturate(190%);
            -webkit-backdrop-filter: blur(18px) saturate(190%);
            border: 1px solid rgba(var(--text-dark-rgb), 0.06); 
        }
        #payment-view { max-width: 720px; } 

        .auth-view .form-control, .profile-view .form-control, #payment-view .form-control {
             padding: 1rem 1.3rem; 
             font-size: 1.05rem; 
        }
        .auth-view .btn-link-custom { 
            color: var(--primary-blue); 
            text-decoration: none;
            font-weight: 600;
            transition: color var(--transition-speed-fast) ease, letter-spacing var(--transition-speed-fast) ease, text-shadow 0.2s ease;
        }
        .auth-view .btn-link-custom:hover {
            color: var(--secondary-blue); 
            text-decoration: underline;
            letter-spacing: 0.35px; 
            text-shadow: 0 0 5px rgba(var(--primary-blue-rgb),0.22); 
        }

        .auth-view .divider-text { 
            display: flex;
            align-items: center;
            text-align: center;
            color: var(--text-light); 
            margin: 1.8rem 0; 
            font-weight: 500;
            font-size: 0.92rem; 
        }
        .auth-view .divider-text::before, .auth-view .divider-text::after {
            content: ''; flex: 1; border-bottom: 1.8px solid var(--border-color-light); 
        }
        .auth-view .divider-text:not(:empty)::before { margin-right: .8em; }
        .auth-view .divider-text:not(:empty)::after { margin-left: .8em; }

        /* Profile View Specifics */
        .profile-view .profile-picture-wrapper {
            text-align: center;
            margin-bottom: 2rem; 
            position: relative;
        }
        .profile-view .profile-picture {
            width: 130px; 
            height: 130px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--primary-green); 
            box-shadow: var(--shadow-medium); 
            margin-bottom: 0.7rem; 
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .profile-view .profile-picture:hover {
            transform: scale(1.07); 
            box-shadow: 0 0 20px rgba(var(--primary-green-rgb),0.32); 
        }
        .profile-view .form-label { font-size: 1.02rem; } 
        .profile-view #uploadProfilePicButton { 
            font-size: 0.85rem; 
            padding: 0.45rem 0.9rem;
            background-color: var(--light-blue); 
            border-color: var(--primary-blue); 
            color: var(--primary-blue); 
        }
        .profile-view #uploadProfilePicButton:hover {
            background-color: var(--primary-blue); 
            color: var(--text-on-primary);
        }
        /* Profile stats section */
        .profile-stats {
            margin-top: 1.8rem;
            padding-top: 1.4rem;
            border-top: 1px solid var(--border-color-light); 
        }
        .profile-stats h5 {
            color: var(--primary-green); 
            margin-bottom: 0.9rem;
        }
        .stat-item {
            background-color: rgba(var(--text-dark-rgb),0.025); 
            padding: 0.9rem;
            border-radius: var(--border-radius-sm);
            text-align: center;
            margin-bottom: 0.9rem;
        }
        .stat-item .stat-value {
            font-size: 1.7rem;
            font-weight: 700;
            color: var(--primary-blue); 
            display: block;
        }
        .stat-item .stat-label {
            font-size: 0.85rem;
            color: var(--text-medium); 
        }


        /* --- Footer --- */
        footer {
            text-align: center;
            padding: 3.2rem 1.4rem; 
            margin-top: 4.5rem; 
            background-color: var(--footer-background); 
            border-top: 2px solid rgba(var(--text-dark-rgb), 0.08); 
            transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }
        footer p {
            margin-bottom: 0.5rem;
            color: var(--text-medium); 
            font-size: 0.95rem; 
        }
        footer .social-icons a {
            color: var(--text-light); 
            font-size: 1.5rem; 
            margin: 0 0.7rem; 
            transition: color var(--transition-speed-fast) ease, transform var(--transition-speed-fast) ease, text-shadow 0.2s ease;
        }
        footer .social-icons a:hover {
            color: var(--primary-blue); 
            transform: translateY(-5px) scale(1.22); 
            text-shadow: 0 0 10px rgba(var(--primary-blue-rgb),0.32); 
        }
        footer .footer-links {
            margin-top: 0.9rem;
            margin-bottom: 0.9rem;
        }
        footer .footer-links a {
            color: var(--text-medium); 
            margin: 0 0.7rem;
            font-size: 0.88rem;
            text-decoration: none;
        }
        footer .footer-links a:hover {
            color: var(--primary-blue); 
            text-decoration: underline;
        }


        /* --- Custom Modal (Enhanced) --- */
        .modal-content {
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-strong); 
            border: none;
            background-color: var(--card-background); 
        }
        .modal-header {
            background: linear-gradient(65deg, var(--primary-blue), var(--primary-green)); 
            color: var(--text-on-primary);
            border-top-left-radius: var(--border-radius-lg);
            border-top-right-radius: var(--border-radius-lg);
            border-bottom: none;
            padding: 1.2rem 1.5rem; 
        }
        .modal-header .btn-close {
            filter: brightness(0) invert(1); 
            opacity: 0.9;
            transition: opacity 0.2s ease, transform 0.3s ease;
        }
        .modal-header .btn-close:hover { opacity: 1; transform: rotate(90deg) scale(1.1); }
        .modal-title { font-weight: 700; font-size: 1.3rem; } 
        .modal-body { 
            padding: 1.6rem 2rem; 
            font-size: 1.02rem; 
            line-height: 1.75;
            max-height: 70vh; 
            overflow-y: auto;
        }
        .modal-body h3 { 
            font-size: 1.4rem; color: var(--primary-blue); margin-top: 1.2rem; margin-bottom: 0.6rem; font-weight: 600;
        }
        .modal-body h4 {
            font-size: 1.25rem; color: var(--primary-green); margin-top: 1rem; margin-bottom: 0.5rem; font-weight: 600;
        }
        .modal-body h5 { 
            font-size: 1.1rem;
            color: var(--text-dark); 
            margin-top: 0.9rem;
            margin-bottom: 0.4rem;
            font-weight: 600;
        }
        .modal-body ul:not(.list-unstyled) {
            padding-left: 22px; 
            list-style-type: disc; 
            margin-bottom: 1rem;
        }
         .modal-body ul:not(.list-unstyled) li { 
             padding-left: 0; 
             margin-bottom: 0.4rem; 
        }
         .modal-body ul:not(.list-unstyled) li::before { display: none; } 

         .modal-body ul.list-styled-guide { 
            list-style-type: none;
            padding-left: 0;
         }
         .modal-body ul.list-styled-guide li {
            position: relative;
            padding-left: 1.8em;
            margin-bottom: 0.5em;
         }
         .modal-body ul.list-styled-guide li::before {
            content: "\f138"; 
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            color: var(--primary-green);
            position: absolute;
            left: 0;
            top: 3px;
         }
        .modal-body .ai-response-section { /* Styling for sections within AI response */
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px dashed var(--border-color-light);
        }
        .modal-body .ai-response-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }


        .modal-footer {
            border-top: 1.8px solid var(--border-color-light); 
            padding: 1.1rem 1.5rem; 
        }
        .modal-footer .btn-secondary { 
            background-color: #6c757d;
            border-color: #6c757d;
            padding: 0.7rem 1.6rem; 
            font-weight: 500;
        }
         .modal-footer .btn-secondary:hover {
            background-color: #5a6268;
            border-color: #545b62;
            transform: translateY(-2.5px); 
         }
         body.dark-mode .modal-footer .btn-secondary {
            background-color: #495057;
            border-color: #495057;
         }
         body.dark-mode .modal-footer .btn-secondary:hover {
            background-color: #343a40;
            border-color: #343a40;
         }


        /* --- Spinner for AI processing --- */
        .spinner-container {
            display: none; /* Hidden by default */
            flex-direction: column; /* Stack spinner and text vertically */
            align-items: center;
            justify-content: center;
            text-align: center;
            margin-top: 1.7rem; 
            padding: 1.4rem; 
            background-color: rgba(var(--light-blue-rgb, 224, 243, 255), 0.7); /* Semi-transparent background */
            border-radius: var(--border-radius-md);
            position: absolute; /* To overlay content if needed, or relative */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1060; /* Above most content, below modal if used inside one */
        }
        .global-spinner-container { /* For full page overlay */
            position: fixed;
            top:0; left:0; right:0; bottom:0;
            background-color: rgba(var(--background-start-rgb, 244, 247, 249), 0.85);
            z-index: 1099; /* Highest z-index */
        }
        body.dark-mode .global-spinner-container {
            background-color: rgba(var(--dm-background-start-rgb, 26, 26, 28), 0.85);
        }


        .spinner-border {
            width: 3rem; 
            height: 3rem;
            color: var(--primary-green); 
            border-width: .35em; 
        }
        .spinner-container p {
            margin-top: 0.7rem; 
            color: var(--text-medium); 
            font-style: italic;
            font-weight: 600;
            font-size: 1.02rem; 
        }

        /* --- Scroll Animations & Utility Classes --- */
        .scroll-animate {
            opacity: 0;
            transform: translateY(45px); 
            transition: opacity 0.8s ease-out, transform 0.8s ease-out; 
        }
        .scroll-animate.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .text-primary-blue { color: var(--primary-blue) !important; }
        .text-primary-green { color: var(--primary-green) !important; }
        .bg-light-subtle { background-color: rgba(var(--text-dark-rgb),0.025); } 
        .border-light-subtle { border-color: rgba(var(--text-dark-rgb),0.07) !important; } 


        /* --- Responsive Adjustments for Navigation & Content --- */
        @media (max-width: 1199.98px) { 
             .nav-pills .nav-link { font-size: 0.88rem; padding: 0.75rem 1.4rem; } 
        }

        @media (max-width: 991.98px) { 
            /* .main-nav-wrapper-container:not(.hidden-for-auth) .main-nav-wrapper {
                display: none !important; 
            }
            .mobile-nav-toggle:not(.hidden-for-auth) {
                display: block !important; 
            } */
            .tab-content-wrapper h2, .auth-view h2, .profile-view h2, #payment-view h2, .section-title { font-size: 1.8rem; }
            .tab-pane h3, .section-subtitle { font-size: 1.5rem; }
            .subscription-plan { margin-bottom: 1.7rem; }
            .dark-mode-toggle-container { margin-right: 0.9rem; }
        }

        @media (max-width: 767.98px) { 
             #user-auth-section .btn-sign-in { font-size: 0.82rem; padding: 0.5rem 1rem; }
             #user-auth-section .profile-dropdown img { width: 40px; height: 40px;}

            .tab-content-wrapper, .auth-view, .profile-view, #payment-view { padding: 1.7rem; }
            .tab-content-wrapper h2, .auth-view h2, .profile-view h2, #payment-view h2, .section-title { font-size: 1.6rem; margin-bottom: 1.7rem; }
            .tab-pane h3, .section-subtitle { font-size: 1.4rem; }

            .subscription-plan { padding: 2rem 1.2rem; }
            .subscription-plan h3 { font-size: 1.4rem; }
            .subscription-plan .plan-price { font-size: 1.9rem; }
            .subscription-plan.popular-plan { transform: scale(1); } 
            .subscription-plan.popular-plan:hover { transform: translateY(-9px) scale(1.035); }

            #payment-form .row .col-md-6 { margin-bottom: 1.1rem; }
            #payment-form .row .col-md-6:last-child { margin-bottom: 0; }

            footer { padding: 2.3rem 1.1rem; }
            .dark-mode-toggle-container { margin-right: 0.4rem; }
            .dark-mode-switch { width: 48px; height: 26px; }
            .dark-mode-slider:before { height: 18px; width: 18px; }
            input:checked + .dark-mode-slider:before { transform: translateX(22px); }
            .dark-mode-slider .fa-moon, .dark-mode-slider .fa-sun { font-size: 11px; }


        }

        @media (max-width: 575.98px) { 
            header { padding: 0.7rem 0.9rem; }
            header .logo-img { height: 38px; width: 38px; }
            header .logo-title { font-size: 1.4rem; }

            .tab-content-wrapper, .auth-view, .profile-view, #payment-view { padding: 1.2rem; }
            .tab-content-wrapper h2, .auth-view h2, .profile-view h2, #payment-view h2, .section-title { font-size: 1.4rem; }
            .tab-pane h3, .section-subtitle { font-size: 1.25rem; }
            .tab-pane p, .tab-pane ul, .tab-pane ol { font-size: 0.9rem; }

            .btn-custom,
            .subscription-plan .btn-select-plan,
            #payment-form button[type="submit"],
            #waste-form button[type="submit"],
            .auth-view button[type="submit"],
            .profile-view button[type="submit"],
            .btn-read-more, .btn-view-idea, .btn-learn-more,
            .btn-ai-feature,
            .modal-footer .btn { /* Ensure modal buttons are also responsive */
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
            }
            /* .offcanvas-title { font-size: 1.2rem; } */
             #user-auth-section .btn-sign-in { font-size: 0.8rem; padding: 0.4rem 0.8rem; }
             #user-auth-section .profile-dropdown img { width: 36px; height: 36px;}
             .guide-category-grid { grid-template-columns: 1fr; } 
        }

        /* --- Print Styles (Basic) --- */
        @media print {
            body {
                background: #fff !important; 
                color: #000 !important; 
                font-size: 12pt;
            }
            header, footer, .main-nav-wrapper-container, /* .mobile-nav-toggle, */ .dark-mode-toggle-container,
            .btn, .subscription-plan, .auth-view, .profile-view, #payment-view, .spinner-container,
            .scroll-animate, #user-auth-section .profile-dropdown, /* .offcanvas, */ .modal {
                display: none !important; 
            }
            .view.active, .tab-content-wrapper, .tab-pane.active {
                display: block !important;
                box-shadow: none !important;
                border: none !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            a { text-decoration: underline; color: #000 !important; }
            a[href^="#"]::after { content: " (Internal Link)"; }
            a[href^="http"]::after { content: " (" attr(href) ")"; }
            img { max-width: 100% !important; page-break-inside: avoid; }
            h1, h2, h3, h4, h5, h6 { color: #000 !important; page-break-after: avoid; }
        }

    </style>
</head>

<body>
    <header>
        <div class="header-main-content">
            <div class="header-logo-container">
                <a href="#home" id="logoLinkToHome" style="text-decoration: none; display: flex; align-items: center; gap: 0.7rem;">
                    <img src="assets/logo.png" alt="RecycLearner Logo" class="logo-img" onerror="this.src='https://placehold.co/50x50/007bff/ffffff?text=RL'; this.style.border='1px solid #ccc';">
                    <div>
                        <h1 class="logo-title">
                            <span class="recyc">Recyc</span><span class="learner">Learner</span>
                        </h1>
                    </div>
                </a>
            </div>
        </div>
        <div class="d-flex align-items-center">
            <div class="dark-mode-toggle-container">
                <label class="dark-mode-switch">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="dark-mode-slider">
                        <i class="fas fa-moon"></i>
                        <i class="fas fa-sun"></i>
                    </span>
                </label>
            </div>
            <div id="user-auth-section">
                </div>
        </div>
    </header>

    <div id="main-nav-wrapper-container"> <nav class="main-nav-wrapper" aria-label="Main navigation">
            <ul class="nav nav-pills" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="about-tab-btn" data-bs-toggle="tab" data-bs-target="#about-tab-pane" type="button" role="tab" aria-controls="about-tab-pane" aria-selected="true"><i class="fas fa-info-circle"></i>About Us</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="mission-tab-btn" data-bs-toggle="tab" data-bs-target="#mission-tab-pane" type="button" role="tab" aria-controls="mission-tab-pane" aria-selected="false"><i class="fas fa-seedling"></i>Our Mission</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="how-it-works-tab-btn" data-bs-toggle="tab" data-bs-target="#how-it-works-tab-pane" type="button" role="tab" aria-controls="how-it-works-tab-pane" aria-selected="false"><i class="fas fa-lightbulb"></i>How It Works</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="recycling-guides-tab-btn" data-bs-toggle="tab" data-bs-target="#recycling-guides-tab-pane" type="button" role="tab" aria-controls="recycling-guides-tab-pane" aria-selected="false"><i class="fas fa-book-open"></i>Recycling Guides</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="ai-helper-tab-btn" data-bs-toggle="tab" data-bs-target="#ai-helper-tab-pane" type="button" role="tab" aria-controls="ai-helper-tab-pane" aria-selected="false"><i class="fas fa-microchip"></i>AI Helper</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="faq-tab-btn" data-bs-toggle="tab" data-bs-target="#faq-tab-pane" type="button" role="tab" aria-controls="faq-tab-pane" aria-selected="false"><i class="fas fa-question-circle"></i>FAQ</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="plans-tab-btn" data-bs-toggle="tab" data-bs-target="#plans-tab-pane" type="button" role="tab" aria-controls="plans-tab-pane" aria-selected="false"><i class="fas fa-star"></i>Our Plans</button>
                </li>
            </ul>
        </nav>
    </div>


    <!-- <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileNav" aria-labelledby="mobileNavLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="mobileNavLabel"><img src="assets/logo.png" alt="RecycLearner" style="height: 28px; margin-right: 10px; vertical-align: middle;" onerror="this.src='https://placehold.co/28x28/007bff/ffffff?text=RL';"><span class="recyc">Recyc</span><span class="learner">Learner</span></h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <nav class="offcanvas-body" aria-label="Mobile navigation">
            <ul class="nav flex-column">
                <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#about-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-info-circle"></i>About Us</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#mission-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-seedling"></i>Our Mission</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#how-it-works-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-lightbulb"></i>How It Works</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#recycling-guides-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-book-open"></i>Recycling Guides</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#ai-helper-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-microchip"></i>AI Helper</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#faq-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-question-circle"></i>FAQ</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#plans-tab-pane" data-bs-dismiss="offcanvas" type="button" role="tab"><i class="fas fa-star"></i>Our Plans</button></li>
            </ul>
        </nav>
    </div> -->

    <div class="container mt-3">
        <div id="main-content-tabs-view" class="view active tab-content-wrapper">
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="about-tab-pane" role="tabpanel" aria-labelledby="about-tab-btn">
                    <article>
                        <h2 class="section-title">Welcome to RecycLearner: Your AI Recycling Companion</h2>
                        <img src="https://placehold.co/800x400/28a745/ffffff?text=Our+Team+Working+Sustainably" alt="RecycLearner Team" class="img-fluid rounded mb-4 shadow-sm about-intro-image">
                        <p class="lead">At RecycLearner, we're passionately simplifying the often-confusing world of waste management, transforming it into an engaging, educational, and impactful journey towards sustainability. Our state-of-the-art intelligent platform masterfully leverages cutting-edge Artificial Intelligence to furnish you with exceptionally clear, actionable, and personalized guidance on both recycling best practices and innovative upcycling projects. We champion the fundamental belief that sustainable living should be an accessible and empowering endeavor for everyone, enabling individuals, families, and businesses alike to forge a tangible, positive difference for our precious planet.</p>
                        <p>We invite you to reimagine 'waste' not as a finality, but as a dormant resource brimming with untapped potential, eagerly awaiting its renaissance. RecycLearner is meticulously engineered and continuously refined to assist you in unlocking this vast, often overlooked, potential. Whether you find yourself puzzling over the correct disposal method for a specific item, seeking ingenious and creative ways to breathe vibrant new life into old materials, or are resolutely striving to minimize your overall environmental footprint, our sophisticated AI is your dedicated, ever-learning assistant. Become an integral part of our rapidly growing, vibrant community of eco-conscious innovators, forward-thinkers, and proactive change-makers. Let's collaboratively and enthusiastically build a more sustainable, resilient, and verdant future, one thoughtfully recycled or creatively upcycled item at a time. Your actions, amplified by knowledge, create ripples of positive change.</p>

                        <h3 class="section-subtitle mt-5">Our Core Values</h3>
                        <ul>
                            <li><strong>Innovation for Impact:</strong> We continuously explore and integrate the latest AI advancements to provide the most effective and user-friendly solutions.</li>
                            <li><strong>Education & Empowerment:</strong> Knowledge is key. We strive to educate our users, empowering them to make confident, eco-conscious decisions.</li>
                            <li><strong>Accessibility & Inclusivity:</strong> Sustainable practices should be for everyone. Our platform is designed to be intuitive and accessible to a global audience.</li>
                            <li><strong>Collaboration & Community:</strong> We believe in the power of collective action and aim to foster a supportive community dedicated to environmental stewardship.</li>
                            <li><strong>Transparency & Trust:</strong> We are committed to providing accurate information and being transparent about our processes and data handling.</li>
                        </ul>
                    </article>
                </div>
                <div class="tab-pane fade" id="mission-tab-pane" role="tabpanel" aria-labelledby="mission-tab-btn">
                    <article>
                        <h2 class="section-title">Our Mission: A Greener Planet Through Smart Technology & Shared Knowledge</h2>
                        <img src="https://placehold.co/800x400/0056b3/ffffff?text=Global+Sustainability+Efforts" alt="Global Sustainability" class="img-fluid rounded mb-4 shadow-sm">
                        <p class="lead">RecycLearner is propelled by a profound and unwavering commitment to comprehensive environmental stewardship and the promotion of a truly circular economy. We aspire to be a dynamic and influential catalyst for positive, sustainable change by equipping our users worldwide with the critical knowledge, practical tools, and inspiring ideas necessary for responsible, innovative, and effective waste management. Our foundational pillars are built upon:</p>
                        <div class="mission-icon-grid">
                            <div class="mission-icon-item scroll-animate">
                                <i class="fas fa-lightbulb"></i>
                                <h4>Empowering Informed Action</h4>
                                <p>Delivering exceptionally precise, AI-driven recycling and upcycling instructions tailored to your specific items and location, designed to dramatically reduce landfill burdens and conserve resources.</p>
                            </div>
                            <div class="mission-icon-item scroll-animate" style="animation-delay: 0.1s;">
                                <i class="fas fa-cogs"></i>
                                <h4>Pioneering Eco-Innovation</h4>
                                <p>Relentlessly enhancing our AI algorithms and platform features to consistently offer the most advanced, intuitive, and user-friendly sustainability solutions.</p>
                            </div>
                            <div class="mission-icon-item scroll-animate" style="animation-delay: 0.2s;">
                                <i class="fas fa-graduation-cap"></i>
                                <h4>Fostering Eco-Literacy</h4>
                                <p>Passionately educating users on the circular economy, material lifecycles, and the profound power of individual and collective sustainable choices.</p>
                            </div>
                             <div class="mission-icon-item scroll-animate" style="animation-delay: 0.3s;">
                                <i class="fas fa-globe-americas"></i>
                                <h4>Cultivating Global Collaboration</h4>
                                <p>Uniting individuals, households, and organizations in a shared mission to protect and restore our global environment for current and future generations.</p>
                            </div>
                        </div>
                        <p class="mt-4">We ardently believe that technology, when thoughtfully designed and ethically guided by a clear, altruistic purpose, possesses the extraordinary power to address some of our world's most pressing and complex environmental challenges. Your active engagement with RecycLearner is not merely a personal act but a direct and meaningful contribution to a healthier, more vibrant planet and a more sustainable, equitable, and fulfilling way of life for all. Together, we can learn, adapt, and innovate for a brighter, greener tomorrow. We are dedicated to continuously expanding our knowledge base, incorporating regional recycling nuances, and partnering with local authorities and eco-organizations to provide the most relevant and actionable advice possible.</p>
                    </article>
                </div>
                <div class="tab-pane fade" id="how-it-works-tab-pane" role="tabpanel" aria-labelledby="how-it-works-tab-btn">
                    <article>
                        <h2 class="section-title">Unlock Recycling Wisdom in 3 Simple Steps</h2>
                        <p class="lead">RecycLearner demystifies your journey to effective sustainable waste management through an elegant, intuitive, and AI-powered process. Discover how to effortlessly transform your everyday waste items from potential pollutants into valuable resources, contributing to a healthier planet with every informed decision:</p>
                        <div class="row g-4 g-lg-5 mt-4 align-items-stretch">
                            <div class="col-md-4 d-flex scroll-animate">
                                <div class="text-center p-4 p-lg-5 border rounded-3 shadow-sm bg-white h-100">
                                    <i class="fas fa-camera-retro fa-3x text-primary-blue mb-3"></i>
                                    <h4>1. Submit Your Item</h4>
                                    <p>Simply upload a clear, well-lit photograph of the waste item in question, or provide a concise yet detailed text description. The more specific information you can share with our AI, the more accurate and helpful its guidance will be!</p>
                                </div>
                            </div>
                            <div class="col-md-4 d-flex scroll-animate" style="animation-delay: 0.15s;">
                                <div class="text-center p-4 p-lg-5 border rounded-3 shadow-sm bg-white h-100">
                                    <i class="fas fa-robot fa-3x text-primary-green mb-3"></i>
                                    <h4>2. AI Magic Happens</h4>
                                    <p>Our sophisticated, custom-trained Gemini-powered AI instantly springs into action, meticulously processing your submission. It identifies materials, cross-references vast databases for recyclability, and uncovers exciting, creative upcycling potential.</p>
                                </div>
                            </div>
                            <div class="col-md-4 d-flex scroll-animate" style="animation-delay: 0.3s;">
                                 <div class="text-center p-4 p-lg-5 border rounded-3 shadow-sm bg-white h-100">
                                    <i class="fas fa-directions fa-3x text-accent-orange mb-3"></i>
                                    <h4>3. Get Clear Guidance</h4>
                                    <p>Within moments, you'll receive personalized, easy-to-understand, and actionable instructions. This includes steps for correct recycling preparation, innovative upcycling project ideas, and crucial safe disposal methods.</p>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4 pt-3 border-top">From common everyday packaging like plastics, paper, and glass, to more complex and often confusing items such as electronics, textiles, and mixed materials, RecycLearner is your dedicated, intelligent AI partner. We empower you to make informed, eco-friendly choices with unwavering confidence, every single day. <strong>Your first AI analysis is on us! Try it in the "AI Helper" tab.</strong></p>
                    </article>
                </div>

                <div class="tab-pane fade" id="recycling-guides-tab-pane" role="tabpanel" aria-labelledby="recycling-guides-tab-btn">
                    <article>
                        <h2 class="section-title">Comprehensive Recycling Guides</h2>
                        <p class="lead">Navigate the world of recycling with ease. Our detailed guides cover a wide range of materials, helping you understand what can be recycled, how to prepare items, and their environmental impact.</p>
                        <div id="guide-category-grid-container" class="guide-category-grid">
                            </div>

                        <hr class="my-5">

                        <h2 class="section-title"><i class="fas fa-palette text-accent-purple me-2"></i>AI Upcycling Idea Generator</h2>
                        <p class="lead">Looking for a creative way to reuse old materials? Tell our AI what you have, and it will spark innovative upcycling project ideas for you!</p>
                        <form id="upcycling-form" class="mt-4 pt-3 border-top">
                            <div class="mb-3">
                                <label for="upcycle-material-input" class="form-label"><i class="fas fa-box-open me-2"></i>What material do you want to upcycle?</label>
                                <textarea class="form-control form-control-lg" id="upcycle-material-input" rows="3" placeholder="e.g., old plastic bottles, cardboard boxes, used coffee grounds, old t-shirts, glass jars"></textarea>
                                <div class="form-text mt-1">Be specific! The more details you provide, the more tailored the idea.</div>
                            </div>
                            <div class="text-center mt-4">
                                <button type="submit" class="btn-custom btn-ai-feature btn-lg" id="generate-upcycling-idea-button"><i class="fas fa-lightbulb me-2"></i> Generate Upcycling Idea</button>
                            </div>
                        </form>
                        <div class="spinner-container mt-4" id="upcycling-loading-spinner" style="display: none;">
                            <div class="d-flex align-items-center justify-content-center">
                                <div class="spinner-border me-3" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                <p class="mb-0">Our AI is brewing a creative idea... Please wait a moment!</p>
                            </div>
                        </div>
                    </article>
                </div>

                <div class="tab-pane fade" id="ai-helper-tab-pane" role="tabpanel" aria-labelledby="ai-helper-tab-btn">
                    <article>
                        <h2 class="section-title"><i class="fas fa-microchip text-primary-blue me-2"></i>AI Recycle Helper: Get Instant Advice!</h2>
                        <p class="lead">Unsure how to handle a specific waste item? Don't let it end up in a landfill by mistake! Let our advanced Gemini-powered AI analyze it for you. Provide an image or describe the item in detail, and our system will furnish you with tailored recycling insights, upcycling suggestions, and safe disposal alternatives where applicable. <strong>Remember, every user gets one complimentary AI analysis to experience the power of RecycLearner!</strong></p>
                        <div id="ai-trial-message" class="alert alert-info mt-3 fs-small" style="display: none;"></div>
                        <form id="waste-form" class="mt-4 pt-3 border-top">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="waste-image" class="form-label"><i class="fas fa-image me-2"></i>Upload an Image (Optional)</label>
                                    <input type="file" class="form-control form-control-lg" id="waste-image" name="waste-image" accept="image/jpeg, image/png, image/webp, image/heic">
                                     <div class="form-text mt-1">Clear, well-lit photos of a single item work best. Max file size: 4MB.</div>
                                     <div id="waste-image-preview-container" class="mt-2">
                                         <img id="waste-image-preview" src="#" alt="Image Preview" />
                                     </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="waste-description" class="form-label"><i class="fas fa-pencil-alt me-2"></i>Describe Your Waste Material</label>
                                    <textarea class="form-control form-control-lg" id="waste-description" name="waste-description" rows="6"
                                        placeholder="e.g., Empty plastic milk jug (HDPE #2, white, with cap), old iPhone 8 (cracked screen), stained cotton t-shirt (blue). The more details, the better!"></textarea>
                                    <div class="form-text mt-1">Include material type, color, any labels or symbols, brand (if relevant), and condition.</div>
                                </div>
                            </div>
                            <div class="text-center mt-4">
                                <button type="submit" class="btn-custom btn-lg" id="get-insights-button"><i class="fas fa-lightbulb me-2"></i> Get AI Recycling Insights</button>
                            </div>
                        </form>
                        <div class="spinner-container mt-4" id="loading-spinner">
                            <div class="d-flex align-items-center justify-content-center">
                                <div class="spinner-border me-3" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                <p class="mb-0">Our AI is meticulously analyzing your item... Please wait a moment!</p>
                            </div>
                        </div>
                         <div class="global-spinner-container spinner-container" id="global-loading-spinner" style="display: none;">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mb-0">Our AI is thinking... Please wait!</p>
                        </div>
                    </article>
                </div>
                
                <div class="tab-pane fade" id="faq-tab-pane" role="tabpanel" aria-labelledby="faq-tab-btn">
                    <article>
                        <h2 class="section-title">Frequently Asked Questions</h2>
                        <p class="lead">Find answers to common questions about recycling, upcycling, using RecycLearner, and our subscription plans. If you can't find your answer here, feel free to contact us or ask our AI!</p>
                        <div class="faq-search-filter input-group mb-4">
                            <span class="input-group-text"><i class="fas fa-search"></i></span>
                            <input type="text" id="faqSearchInput" class="form-control form-control-lg" placeholder="Search FAQs...">
                        </div>
                        <div class="accordion" id="faqAccordionContainer">
                            </div>
                        <div id="ask-ai-faq-button-container">
                             <button class="btn-custom btn-ai-feature btn-lg" id="ask-ai-custom-faq-btn"><i class="fas fa-question-circle"></i>  Ask AI Your Own Question</button>
                        </div>
                    </article>
                </div>

                <div class="tab-pane fade" id="plans-tab-pane" role="tabpanel" aria-labelledby="plans-tab-btn">
                    <article id="subscription-plans">
                        <h2 class="section-title">Supercharge Your Sustainability: Choose Your Plan</h2>
                        <p class="lead">Elevate your eco-impact with features designed for every level of commitment. All paid plans come with a <strong>7-day free trial!</strong> After your initial complimentary AI analysis, a subscription is required for unlimited AI insights.</p>
                        <div class="row justify-content-center">
                            <!-- Starter Spark Plan -->
                            <div class="col-lg-3 col-md-6 mb-4 d-flex align-items-stretch scroll-animate">
                                <div class="subscription-plan">
                                    <div>
                                        <i class="fas fa-sparkles plan-icon"></i> <!-- Changed icon -->
                                        <h3>Starter Spark</h3>
                                        <p class="text-muted small mb-3">Perfect for individuals beginning their eco-journey.</p>
                                        <ul class="plan-features">
                                            <li><strong>15 AI Queries</strong></li> <!-- Changed feature -->
                                            <li>Core guides</li>
                                            <li>Basic tracking</li>
                                            <li>Forum access</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="plan-price">AED 4.99<small>/month</small></p> <!-- Changed price and currency -->
                                        <button class="btn-select-plan w-100" id="selectStarterPlanBtn"><i class="fas fa-check-circle"></i> Start Free Trial</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Eco Pro Plan -->
                            <div class="col-lg-3 col-md-6 mb-4 d-flex align-items-stretch scroll-animate" style="animation-delay: 0.15s;">
                                <div class="subscription-plan popular-plan">
                                     <span class="badge popular-badge"><i class="fas fa-fire me-1"></i>Most Popular</span>
                                    <div>
                                        <i class="fas fa-leaf-heart plan-icon"></i> <!-- Changed icon -->
                                        <h3>Eco Pro</h3>
                                        <p class="text-muted small mb-3">For dedicated recyclers and eco-conscious households.</p>
                                        <ul class="plan-features">
                                            <li><strong>50 AI Queries</strong></li> <!-- Changed feature -->
                                            <li>Includes Features of Starter Spark Plan plus</li>
                                            <li>Upcycling library</li>
                                            <li>Detailed impact reports</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="plan-price">AED 19.99<small>/3 months</small></p> <!-- Changed price and currency -->
                                        <button class="btn-select-plan w-100" id="selectEcoProPlanBtn"><i class="fas fa-star"></i> Start Free Trial</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Sustainable God Plan -->
                            <div class="col-lg-3 col-md-6 mb-4 d-flex align-items-stretch scroll-animate" style="animation-delay: 0.3s;">
                                <div class="subscription-plan">
                                    <div>
                                        <i class="fas fa-globe-stand plan-icon"></i> <!-- Changed icon -->
                                        <h3>Sustainable God</h3>
                                        <p class="text-muted small mb-3">For true environmental champions.</p>
                                         <ul class="plan-features">
                                            <li><strong>Unlimited AI Queries</strong></li> <!-- Changed feature -->
                                            <li>Includes Features of Eco Pro Plan plus</li>
                                            <li>Priority access</li>
                                            <li>Up to 3 users</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="plan-price">AED 49.99<small>/year</small></p> <!-- Changed price and currency -->
                                        <button class="btn-select-plan w-100" id="selectSustainableGodPlanBtn"><i class="fas fa-hands-heart"></i> Get Plan</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Green Business Plan -->
                            <div class="col-lg-3 col-md-6 mb-4 d-flex align-items-stretch scroll-animate" style="animation-delay: 0.45s;">
                                <div class="subscription-plan">
                                    <div>
                                        <i class="fas fa-building-shield plan-icon"></i>
                                        <h3>Green Business</h3>
                                        <p class="text-muted small mb-3">Tailored for businesses committed to sustainability.</p>
                                         <ul class="plan-features">
                                            <li><strong>Unlimited AI Queries</strong></li> <!-- Changed feature -->
                                            <li>Includes Features of Sustainable God Plan</li>
                                            <li>Bulk auditing</li>
                                            <li>Team collaboration</li>
                                            <li>API access</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="plan-price">Price Varies<small>(According to School/Business)</small></p> <!-- Changed price text -->
                                        <button class="btn-select-plan btn-contact w-100" id="contactSalesPlanBtn"><i class="fas fa-handshake"></i> Contact Sales</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="text-center mt-4 text-muted small">All prices are in AED. Subscription automatically renews yearly/monthly/quarterly after the trial period unless canceled. You can cancel anytime.</p> <!-- Updated text -->
                    </article>
                </div>
            </div>
        </div>

        <div id="payment-view" class="view">
            <h2 class="section-title">Secure Checkout: <span id="selected-plan-name-title" class="text-primary-blue">Your Plan</span></h2>
            <p id="selected-plan-description" class="text-muted mb-4">You're just a step away from unlocking powerful recycling tools!</p>
            <form id="payment-form">
                <input type="hidden" id="selected-plan-value" name="selected-plan-value">
                <div class="alert alert-success d-flex align-items-center shadow-sm mb-4" role="alert">
                    <i class="fas fa-shield-alt fa-2x me-3 text-success"></i>
                    <div>
                        <strong>Start Your 7-Day Free Trial!</strong> You will not be charged today.
                        Your selected plan: <strong id="selected-plan-price-info" class="text-success">AED 0.00</strong>. <!-- Changed to AED -->
                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col-md-12 mb-3">
                        <label for="cardholder-name" class="form-label">Cardholder Name</label>
                        <input type="text" class="form-control form-control-lg" id="cardholder-name" placeholder="Full Name as on Card" required autocomplete="cc-name">
                    </div>
                </div>
                <div class="mb-3">
                    <label for="card-number" class="form-label">Card Number</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-credit-card"></i></span>
                        <input type="text" class="form-control form-control-lg" id="card-number" placeholder="   " required pattern="\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}" title="Enter a valid 16-digit card number" autocomplete="cc-number">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-7 mb-3 mb-md-0">
                        <label for="expiry-date" class="form-label">Expiry Date</label>
                        <input type="text" class="form-control form-control-lg" id="expiry-date" placeholder="MM / YY" required pattern="(0[1-9]|1[0-2])\s?\/\s?\d{2}" title="Enter date as MM / YY" autocomplete="cc-exp">
                    </div>
                    <div class="col-md-5">
                        <label for="cvv" class="form-label">CVV/CVC</label>
                        <input type="text" class="form-control form-control-lg" id="cvv" placeholder="" required pattern="\d{3,4}" title="Enter 3 or 4 digit CVV" autocomplete="cc-csc">
                    </div>
                </div>
                <div class="mb-4">
                    <label for="billing-email" class="form-label">Billing Email Address</label>
                     <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                        <input type="email" class="form-control form-control-lg" id="billing-email" placeholder="you@example.com" required autocomplete="email">
                    </div>
                </div>
                 <div class="form-check mb-4">
                    <input class="form-check-input" type="checkbox" value="" id="termsCheck" required>
                    <label class="form-check-label" for="termsCheck">
                        I have read and agree to the RecycLearner <a href="#" onclick="showInfoModal('Terms and Conditions', 'This is placeholder text for RecycLearner\'s Terms and Conditions... Users must agree to these terms to proceed.')">Terms and Conditions</a> and acknowledge the 7-day free trial.
                    </label>
                </div>
                <div class="text-center">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-lock me-2"></i>Activate My Free Trial Now</button>
                </div>
                 <div class="text-center mt-3">
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="backToHomeFromPayment"><i class="fas fa-arrow-left"></i> Back to Plans</button>
                </div>
            </form>
        </div>

        <div id="signin-view" class="view auth-view">
            <h2 class="section-title"><i class="fas fa-sign-in-alt me-2 text-primary-blue"></i>Sign In to RecycLearner</h2>
            <p class="text-muted mb-4">Welcome back! Access your account to continue your sustainability journey.</p>
            <form id="signin-form">
                <div class="mb-3">
                    <label for="signin-email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="signin-email" placeholder="you@example.com" required autocomplete="email">
                </div>
                <div class="mb-3">
                    <label for="signin-password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="signin-password" placeholder="Enter your password" required autocomplete="current-password">
                </div>
                <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-paper-plane"></i> Sign In</button>
                    <button type="button" class="btn-custom btn-lg btn-google" onclick="showInfoModal('Feature Not Implemented', 'Sign in with Google is not yet available.', false)"><i class="fab fa-google"></i> Sign In with Google</button>
                </div>
            </form>
            <p class="text-center mt-4">
                Don't have an account? <a href="#sign-up" id="navigateToSignUp" class="btn-link-custom">Create one here!</a>
            </p>
        </div>

        <div id="signup-view" class="view auth-view">
            <h2 class="section-title"><i class="fas fa-user-plus me-2 text-primary-green"></i>Create Your Account</h2>
            <p class="text-muted mb-4">Join our community, start your free AI trial, and impact the planet!</p>
            <form id="signup-form">
                <div class="mb-3">
                    <label for="signup-username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="signup-username" placeholder="Choose a unique username" required autocomplete="username">
                </div>
                <div class="mb-3">
                    <label for="signup-fullname" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="signup-fullname" placeholder="Enter your full name" required autocomplete="name">
                </div>
                <div class="mb-3">
                    <label for="signup-email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="signup-email" placeholder="you@example.com" required autocomplete="email">
                </div>
                <div class="mb-3">
                    <label for="signup-password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="signup-password" placeholder="Create a strong password (min. 6 characters)" required minlength="6" autocomplete="new-password">
                </div>
                 <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-check-circle"></i> Sign Up & Start Trial</button>
                    <button type="button" class="btn-custom btn-lg btn-google" onclick="showInfoModal('Feature Not Implemented', 'Sign up with Google is not yet available.', false)"><i class="fab fa-google"></i> Sign Up with Google</button>
                </div>
            </form>
            <p class="text-center mt-4">
                Already have an account? <a href="#sign-in" id="navigateToSignIn" class="btn-link-custom">Sign in here!</a>
            </p>
        </div>

        <div id="profile-view" class="view profile-view">
            <h2 class="section-title"><i class="fas fa-id-card me-2 text-primary-blue"></i>Manage Your Profile</h2>
            <p class="text-muted mb-4">Keep your information up to date and manage your RecycLearner experience.</p>
            <form id="profile-form">
                <div class="profile-picture-wrapper">
                    <img src="assets/logo.png" alt="Profile Picture" id="profile-view-image" class="profile-picture" onerror="this.src='https://placehold.co/130x130/007bff/ffffff?text=User';">
                    <input type="file" id="profile-pic-upload-input" accept="image/*" style="display: none;">
                    <button type="button" class="btn btn-sm btn-outline-secondary mt-2" id="uploadProfilePicButton"><i class="fas fa-camera"></i> Upload New Picture</button>
                </div>
                <div class="mb-3">
                    <label for="profile-username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="profile-username" readonly>
                </div>
                <div class="mb-3">
                    <label for="profile-fullname" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="profile-fullname" autocomplete="name">
                </div>
                <div class="mb-3">
                    <label for="profile-email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="profile-email" readonly>
                </div>
                <div class="mb-3">
                    <label for="profile-new-password" class="form-label">New Password (Optional)</label>
                    <input type="password" class="form-control" id="profile-new-password" placeholder="Enter new password to change (min. 6 characters)" minlength="6" autocomplete="new-password">
                </div>
                <div class="d-grid mt-4">
                    <button type="submit" class="btn-custom btn-lg"><i class="fas fa-save"></i> Save Changes</button>
                </div>
            </form>
            <div class="profile-stats mt-5">
                <h5><i class="fas fa-chart-line me-2"></i>Your Eco Impact (Mock Stats)</h5>
                <div class="row">
                    <div class="col-md-4">
                        <div class="stat-item">
                            <span class="stat-value" id="statItemsRecycled">0</span>
                            <span class="stat-label">Items Recycled</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="stat-item">
                            <span class="stat-value" id="statCo2Saved">0 kg</span>
                            <span class="stat-label">CO2 Saved (Est.)</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="stat-item">
                            <span class="stat-value" id="statUpcycledProjects">0</span>
                            <span class="stat-label">Upcycled Projects</span>
                        </div>
                    </div>
                </div>
                 <h5><i class="fas fa-user-cog me-2"></i>Subscription Details (Mock)</h5>
                 <div id="profile-subscription-details" class="mt-3 p-3 border rounded bg-light-subtle border-light-subtle">
                    </div>
            </div>
             <div class="text-center mt-4">
                <button type="button" class="btn btn-outline-secondary" id="backToMainFromProfile"><i class="fas fa-arrow-left"></i> Back to Main Site</button>
            </div>
        </div>

    </div> <footer class="scroll-animate">
        <div class="container">
            <img src="assets/logo.png" alt="RecycLearner Small Logo" style="height: 45px; margin-bottom: 15px; opacity: 0.8;" onerror="this.src='https://placehold.co/45x45/007bff/ffffff?text=RL';">
            <p>&copy; <span id="currentYear"></span> <span style="color: var(--primary-blue);">Recyc</span><span style="color: var(--primary-green);">Learner</span>. All Rights Reserved.
            <br>Pioneering AI for a Sustainable Planet. Dubai, UAE. <span id="currentLocationDisplay" class="d-block small mt-1"></span></p>
            <div class="footer-links">
                <a href="#home">Home</a> |
                <a href="#" onclick="showInfoModal('Privacy Policy', 'Placeholder for Privacy Policy content. This site uses local storage for mock user data and preferences. No data is sent to external servers beyond the AI API call for recycling analysis.')">Privacy Policy</a> |
                <a href="#" onclick="showInfoModal('Terms of Service', 'Placeholder for Terms of Service content. Use of this demonstration website is subject to acceptance of these mock terms.')">Terms of Service</a> |
                <a href="#faq-tab-pane" class="footer-faq-link">FAQ</a>
            </div>
            <div class="social-icons mt-3">
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="infoModalLabel"><i class="fas fa-info-circle me-2"></i>RecycLearner Notification</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="infoModalBody">
            </div>
          <div class="modal-footer" id="infoModalFooter">
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal"><i class="fas fa-thumbs-up me-2"></i>Got it!</button>
          </div>
        </div>
      </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // --- DOMContentLoaded: Main script execution start ---
        document.addEventListener('DOMContentLoaded', function() {
            // --- Initial Setup & Global Variables ---
            console.log("RecycLearner App Initializing - Version 2.2 (Gemini Enhanced)");
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            const mockLocation = "Dubai, UAE"; 
            const locationDisplay = document.getElementById('currentLocationDisplay');
            if(locationDisplay) locationDisplay.textContent = `Serving from: ${mockLocation}`;


            const views = document.querySelectorAll('.view');
            const userAuthSection = document.getElementById('user-auth-section');
            const mainNavWrapperContainer = document.getElementById('main-nav-wrapper-container'); 
            // const mobileNavToggle = document.querySelector('.mobile-nav-toggle'); // Removed
            const logoLinkToHome = document.getElementById('logoLinkToHome');
            const darkModeToggle = document.getElementById('darkModeToggle');
            const globalLoadingSpinner = document.getElementById('global-loading-spinner');


            // --- Client-Side Routing Configuration ---
            const routes = {
                'home': 'main-content-tabs-view', 
                'profile': 'profile-view',
                'sign-up': 'signup-view',
                'sign-in': 'signin-view',
                'checkout': 'payment-view'
            };
            const viewToHashMapping = Object.fromEntries(Object.entries(routes).map(([key, value]) => [value, key]));

            // --- Dark Mode Functionality ---
            const LS_DARK_MODE_KEY = 'recyclearner_dark_mode_pref_v2_2'; 
            function applyDarkModePreference() {
                const isDarkMode = localStorage.getItem(LS_DARK_MODE_KEY) === 'true';
                if (darkModeToggle) darkModeToggle.checked = isDarkMode;
                document.body.classList.toggle('dark-mode', isDarkMode);
            }

            if (darkModeToggle) {
                darkModeToggle.addEventListener('change', () => {
                    localStorage.setItem(LS_DARK_MODE_KEY, darkModeToggle.checked);
                    document.body.classList.toggle('dark-mode', darkModeToggle.checked);
                });
            }
            applyDarkModePreference(); 

            // --- View Management ---
            function navigateToView(viewId, updateBrowserHash = true) {
                views.forEach(v => v.classList.remove('active')); 
                const targetView = document.getElementById(viewId);

                if (targetView) {
                    targetView.classList.add('active'); 
                } else {
                    document.getElementById(routes['home'])?.classList.add('active');
                     if (updateBrowserHash) window.location.hash = 'home'; 
                }

                // Updated to include 'checkout' in the condition for hiding navigation
                const isAuthOrSpecialView = (viewId === routes['profile'] || viewId === routes['sign-in'] || viewId === routes['sign-up'] || viewId === routes['checkout']);
                
                if(mainNavWrapperContainer) { 
                    mainNavWrapperContainer.classList.toggle('hidden-for-auth', isAuthOrSpecialView);
                }

                if (updateBrowserHash) {
                    const newHash = viewToHashMapping[viewId] || 'home'; 
                    if (window.location.hash !== `#${newHash}`) {
                        window.location.hash = newHash;
                    }
                }

                if (viewId === routes['home']) {
                    const defaultHomeTabButton = document.getElementById('about-tab-btn'); 
                    const activeTabInHome = document.querySelector('#myTab .nav-link.active');
                    if (defaultHomeTabButton && (!activeTabInHome || !defaultHomeTabButton.classList.contains('active'))) {
                        const tabInstance = bootstrap.Tab.getInstance(defaultHomeTabButton) || new bootstrap.Tab(defaultHomeTabButton);
                        if(tabInstance) tabInstance.show();
                    }
                }

                 window.scrollTo(0, 0); 
                 handleResize(); 
            }

            function handleHashChange() {
                const hash = window.location.hash.substring(1); 
                const targetViewId = routes[hash] || routes['home']; 
                navigateToView(targetViewId, false); 

                if (!routes[hash] && hash !== '') {
                    window.location.hash = 'home';
                } else if (hash === '' && (window.location.pathname.endsWith('/') || window.location.pathname.endsWith('index.html'))) {
                     window.location.hash = 'home';
                }
            }


            // --- Tab Management for Desktop and Mobile Navigation ---
            const desktopTabButtons = document.querySelectorAll('#myTab .nav-link'); 
            const mobileNavLinks = document.querySelectorAll('#mobileNav .nav-link'); // This will now be empty or target non-existent elements

            desktopTabButtons.forEach(button => {
                if (button && !bootstrap.Tab.getInstance(button)) {
                    new bootstrap.Tab(button);
                }
                button.addEventListener('shown.bs.tab', function(event) {
                    const activeDesktopTarget = event.target.dataset.bsTarget;
                    if (document.getElementById('main-content-tabs-view') && !document.getElementById('main-content-tabs-view').classList.contains('active')) {
                        navigateToView(routes['home'], true); 
                    }
                });
            });

            if(logoLinkToHome) {
                logoLinkToHome.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateToView(routes['home']); 
                });
            }
            document.querySelector('.footer-faq-link')?.addEventListener('click', (e) => {
                e.preventDefault();
                navigateToView(routes['home']);
                const faqTabButton = document.getElementById('faq-tab-btn');
                if (faqTabButton) {
                    const tabInstance = bootstrap.Tab.getInstance(faqTabButton) || new bootstrap.Tab(faqTabButton);
                    if(tabInstance) tabInstance.show();
                    document.getElementById('faq-tab-pane')?.scrollIntoView({ behavior: 'smooth' });
                }
            });


            // --- Payment Page Logic ---
            window.showPaymentPage = function(planName, planPrice, planDescription) {
                const selectedPlanNameTitle = document.getElementById('selected-plan-name-title');
                const selectedPlanDescription = document.getElementById('selected-plan-description');
                const selectedPlanPriceInfo = document.getElementById('selected-plan-price-info');
                const selectedPlanValueInput = document.getElementById('selected-plan-value');

                if(selectedPlanNameTitle) selectedPlanNameTitle.textContent = planName;
                if(selectedPlanDescription) selectedPlanDescription.textContent = planDescription;
                // Updated to show price as-is for the info, but always add trial info
                if(selectedPlanPriceInfo) selectedPlanPriceInfo.textContent = planPrice === 'Custom Pricing' ? 'Custom Pricing' : `${planPrice} (7-day free trial)`;

                const planValue = planName ? planName.toLowerCase().replace(/\s+/g, '-') : 'unknown-plan';
                if(selectedPlanValueInput) selectedPlanValueInput.value = planValue;

                navigateToView(routes['checkout']); 
            }
            document.getElementById('selectStarterPlanBtn')?.addEventListener('click', () => showPaymentPage('Starter Spark Plan', 'AED 4.99/month', 'Begin your journey with essential AI recycling tools and community support.'));
            document.getElementById('selectEcoProPlanBtn')?.addEventListener('click', () => showPaymentPage('Eco Pro Plan', 'AED 19.99/3 months', 'Unlock more AI analysis, exclusive upcycling projects, and detailed impact reports.'));
            document.getElementById('selectSustainableGodPlanBtn')?.addEventListener('click', () => showPaymentPage('Sustainable God Plan', 'AED 49.99/year', 'Become a true environmental champion with unlimited AI, priority access, and multi-user support.'));
            document.getElementById('contactSalesPlanBtn')?.addEventListener('click', () => showInfoModal('Green Business Plan Inquiry', 'We\'re excited to help your business achieve its sustainability targets! Please reach out to our enterprise team at <a href=\'mailto:biz@recyclearner.com\'>biz@recyclearner.com</a> or call us at (555) ECO-SMART for a personalized consultation and quote.'));
            document.getElementById('backToHomeFromPayment')?.addEventListener('click', (e) => {
                e.preventDefault();
                navigateToView(routes['home']); 
                const plansTabButton = document.getElementById('plans-tab-btn');
                if (plansTabButton) {
                    const tabInstance = bootstrap.Tab.getInstance(plansTabButton) || new bootstrap.Tab(plansTabButton);
                    if(tabInstance) tabInstance.show();
                }
            });


            // --- Custom Modal Function ---
            const infoModalEl = document.getElementById('infoModal');
            const infoModal = infoModalEl ? new bootstrap.Modal(infoModalEl) : null;
            const infoModalFooter = document.getElementById('infoModalFooter');

            window.showInfoModal = function(title, message, isHtml = true, showAiGuideButton = false, guideTitle = '', guideDetails = '') {
                if (!infoModal) { return; }
                const modalTitleEl = document.getElementById('infoModalLabel');
                const modalBodyEl = document.getElementById('infoModalBody');

                if (modalTitleEl) modalTitleEl.innerHTML = title; 
                if (modalBodyEl) {
                    if (isHtml) {
                        modalBodyEl.innerHTML = message; 
                    } else {
                        modalBodyEl.textContent = message; 
                    }
                }
                
                // Clear previous buttons and add default "Got it!"
                if(infoModalFooter) {
                    infoModalFooter.innerHTML = '<button type="button" class="btn btn-primary" data-bs-dismiss="modal"><i class="fas fa-thumbs-up me-2"></i>Got it!</button>';
                    if (showAiGuideButton && guideTitle) {
                        const aiButton = document.createElement('button');
                        aiButton.type = 'button';
                        aiButton.classList.add('btn', 'btn-ai-feature', 'ms-2');
                        aiButton.innerHTML = '<i class="fas fa-robot"></i>  Get AI Insights for Dubai';
                        aiButton.onclick = () => getRecyclingGuideAIInsights(guideTitle, guideDetails);
                        infoModalFooter.appendChild(aiButton);
                    }
                }
                infoModal.show(); 
            }

            // --- Image Preview for Waste Form ---
            const wasteImageInput = document.getElementById('waste-image');
            const imagePreview = document.getElementById('waste-image-preview');
            if (wasteImageInput && imagePreview) {
                wasteImageInput.addEventListener('change', function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            imagePreview.src = e.target.result;
                            imagePreview.style.display = 'block'; 
                        }
                        reader.readAsDataURL(file); 
                    } else {
                        imagePreview.style.display = 'none'; 
                        imagePreview.src = '#';
                    }
                });
            }


            // --- User Authentication (Mocked with localStorage) ---
            const LS_USER_KEY = 'recyclearner_user_v2_2_gemini';
            const LS_ALL_USERS_KEY = 'recyclearner_all_users_v2_2_gemini';
            const LS_ANON_TRIAL_KEY = 'recyclearner_anon_ai_trial_used_v2_2_gemini';
            const DEFAULT_PROFILE_PIC = 'https://placehold.co/130x130/007bff/ffffff?text=User'; 

            function getCurrentUser() {
                const userJson = localStorage.getItem(LS_USER_KEY);
                try {
                    return userJson ? JSON.parse(userJson) : null;
                } catch (e) {
                    localStorage.removeItem(LS_USER_KEY); 
                    return null;
                }
            }

            function saveCurrentUser(userData) {
                try {
                    localStorage.setItem(LS_USER_KEY, JSON.stringify(userData));
                } catch (e) {
                    console.error("Error saving user data:", e);
                }
            }

            function signOutUser() {
                localStorage.removeItem(LS_USER_KEY); 
                updateHeaderUI(); 
                navigateToView(routes['home']); 
                showInfoModal('<i class="fas fa-door-open me-2"></i>Signed Out', 'You have been successfully signed out.', true);
            }

            function updateHeaderUI() {
                const user = getCurrentUser();
                if (!userAuthSection) { return; }
                userAuthSection.innerHTML = ''; 

                if (user) { 
                    const profilePicUrl = user.profilePic || DEFAULT_PROFILE_PIC;
                    const dropdownHtml = `
                        <div class="dropdown profile-dropdown">
                            <img src="${profilePicUrl}" alt="Profile" id="userProfilePicHeader" data-bs-toggle="dropdown" aria-expanded="false" onerror="this.src='${DEFAULT_PROFILE_PIC}';">
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userProfilePicHeader">
                                <li><a class="dropdown-item" href="#profile" id="profileNavButton"><i class="fas fa-user-circle"></i> My Profile</a></li>
                                <li><a class="dropdown-item" href="#" id="manageSubscriptionButtonMock"><i class="fas fa-credit-card"></i> Manage Subscription</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" id="signOutButton"><i class="fas fa-sign-out-alt"></i> Sign Out</a></li>
                            </ul>
                        </div>`;
                    userAuthSection.innerHTML = dropdownHtml;

                    document.getElementById('profileNavButton')?.addEventListener('click', (e) => {
                        e.preventDefault();
                        populateProfileForm(user); 
                        navigateToView(routes['profile']); 
                    });
                    document.getElementById('signOutButton')?.addEventListener('click', (e) => {
                        e.preventDefault();
                        signOutUser();
                    });
                    document.getElementById('manageSubscriptionButtonMock')?.addEventListener('click', (e) => {
                        e.preventDefault();
                        const subInfo = user.subscription ? `Your current plan: <strong>${user.subscription.planName}</strong>. Renews on: ${user.subscription.renewsOn || 'N/A'}` : 'You do not have an active subscription.';
                        showInfoModal('<i class="fas fa-credit-card me-2"></i>Subscription Management (Mock)', `${subInfo}<br><br><em>Full subscription management features would be available here in a real application.</em>`, true);
                    });
                } else { 
                    userAuthSection.innerHTML = '<button class="btn btn-sm btn-sign-in" id="signInHeaderButton"><i class="fas fa-sign-in-alt me-1"></i>Sign In</button>';
                    document.getElementById('signInHeaderButton')?.addEventListener('click', (e) => {
                        e.preventDefault();
                        navigateToView(routes['sign-in']); 
                    });
                }
                 updateAIHelperUIAccess(); 
            }

            const signinForm = document.getElementById('signin-form');
            if (signinForm) {
                signinForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = document.getElementById('signin-email').value;
                    const password = document.getElementById('signin-password').value;

                    const storedUsers = JSON.parse(localStorage.getItem(LS_ALL_USERS_KEY)) || {};
                    if (storedUsers[email] && storedUsers[email].password === password) { 
                        saveCurrentUser(storedUsers[email]); 
                        updateHeaderUI();
                        navigateToView(routes['home']);
                        showInfoModal(`<i class="fas fa-check-circle text-success me-2"></i>Login Successful`, `Welcome back, ${storedUsers[email].fullName || storedUsers[email].username}!`, true);
                        signinForm.reset();
                    } else {
                        showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Login Failed', 'Invalid email or password. Please try again or sign up.', true);
                    }
                });
            }

            const signupForm = document.getElementById('signup-form');
            if (signupForm) {
                signupForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const username = document.getElementById('signup-username').value;
                    const fullName = document.getElementById('signup-fullname').value;
                    const email = document.getElementById('signup-email').value;
                    const password = document.getElementById('signup-password').value;

                    if (password.length < 6) { 
                         showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Password Too Short', 'Password must be at least 6 characters long.', true);
                         return;
                    }

                    let storedUsers = JSON.parse(localStorage.getItem(LS_ALL_USERS_KEY)) || {};
                    if (storedUsers[email]) { 
                        showInfoModal('<i class="fas fa-exclamation-circle text-danger me-2"></i>Signup Failed', 'An account with this email already exists. Please sign in.', true);
                        return;
                    }

                    const newUser = {
                        username,
                        fullName,
                        email,
                        password, 
                        profilePic: DEFAULT_PROFILE_PIC,
                        aiTrialUsed: localStorage.getItem(LS_ANON_TRIAL_KEY) === 'true', 
                        joinDate: new Date().toLocaleDateString(),
                        stats: { itemsRecycled: 0, co2Saved: 0, upcycledProjects: 0 },
                        subscription: null 
                    };
                    storedUsers[email] = newUser; 
                    localStorage.setItem(LS_ALL_USERS_KEY, JSON.stringify(storedUsers));

                    saveCurrentUser(newUser); 
                    updateHeaderUI();
                    navigateToView(routes['home']);
                    showInfoModal('<i class="fas fa-party-popper text-success me-2"></i>Signup Successful!', `Welcome to RecycLearner, ${fullName || username}! Your account has been created.`, true);
                    signupForm.reset();
                });
            }


            const profileForm = document.getElementById('profile-form');
            const profileViewImage = document.getElementById('profile-view-image');
            const profilePicUploadInput = document.getElementById('profile-pic-upload-input');
            const uploadProfilePicButton = document.getElementById('uploadProfilePicButton');

            function populateProfileForm(user) {
                if (!user || !document.getElementById('profile-username')) return;
                document.getElementById('profile-username').value = user.username;
                document.getElementById('profile-fullname').value = user.fullName;
                document.getElementById('profile-email').value = user.email;
                document.getElementById('profile-new-password').value = ''; 
                if(profileViewImage) profileViewImage.src = user.profilePic || DEFAULT_PROFILE_PIC;

                const stats = user.stats || { itemsRecycled: 0, co2Saved: 0, upcycledProjects: 0 };
                document.getElementById('statItemsRecycled').textContent = stats.itemsRecycled;
                document.getElementById('statCo2Saved').textContent = `${stats.co2Saved} kg`;
                document.getElementById('statUpcycledProjects').textContent = stats.upcycledProjects;

                const subDetailsContainer = document.getElementById('profile-subscription-details');
                if (subDetailsContainer) {
                    if (user.subscription) {
                        subDetailsContainer.innerHTML = `
                            <p><strong>Current Plan:</strong> ${user.subscription.planName}</p>
                            <p><strong>Status:</strong> Active (Trial)</p>
                            <p><strong>Renews On:</strong> ${user.subscription.renewsOn || 'N/A'}</p>
                            <button class="btn btn-sm btn-outline-danger mt-2" id="cancelSubscriptionMockBtn">Cancel Subscription (Mock)</button>
                        `;
                        document.getElementById('cancelSubscriptionMockBtn')?.addEventListener('click', () => {
                             showInfoModal('Subscription Management', 'This is a mock cancel subscription. In a real app, this would trigger a cancellation process.', true);
                             user.subscription = null; 
                             saveCurrentUser(user);
                             populateProfileForm(user); 
                        });
                    } else {
                        subDetailsContainer.innerHTML = `<p>You do not have an active subscription. <a href="#home" id="profileToPlansLink">View Plans</a></p>`;
                        document.getElementById('profileToPlansLink')?.addEventListener('click', (e) => {
                            e.preventDefault();
                            navigateToView(routes['home']);
                            const plansTabButton = document.getElementById('plans-tab-btn');
                            if (plansTabButton) bootstrap.Tab.getOrCreateInstance(plansTabButton).show();
                        });
                    }
                }
            }

            if (uploadProfilePicButton && profilePicUploadInput) {
                uploadProfilePicButton.addEventListener('click', () => {
                    profilePicUploadInput.click();
                });

                profilePicUploadInput.addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file && file.type.startsWith('image/')) {
                        if (file.size > 2 * 1024 * 1024) { 
                            showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Image Too Large', 'Profile picture should be less than 2MB.', true);
                            profilePicUploadInput.value = ''; 
                            return;
                        }
                        const reader = new FileReader();
                        reader.onloadend = () => { 
                            const base64String = reader.result;
                            if(profileViewImage) profileViewImage.src = base64String; 
                        }
                        reader.readAsDataURL(file); 
                    } else if (file) {
                        showInfoModal('<i class="fas fa-exclamation-circle text-danger me-2"></i>Invalid File Type', 'Please select a valid image file (e.g., JPG, PNG).', true);
                        profilePicUploadInput.value = ''; 
                    }
                });
            }

            if (profileForm) {
                profileForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    let user = getCurrentUser();
                    if (!user) {
                        showInfoModal('<i class="fas fa-exclamation-circle text-danger me-2"></i>Error', 'Not logged in. Cannot update profile.', true);
                        navigateToView(routes['sign-in']);
                        return;
                    }

                    user.fullName = document.getElementById('profile-fullname').value;
                    const newPassword = document.getElementById('profile-new-password').value;
                    if (newPassword) { 
                        if (newPassword.length < 6) {
                            showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Password Too Short', 'New password must be at least 6 characters long.', true);
                            return;
                        }
                        user.password = newPassword; 
                    }
                    if(profileViewImage) user.profilePic = profileViewImage.src; 

                    let storedUsers = JSON.parse(localStorage.getItem(LS_ALL_USERS_KEY)) || {};
                    storedUsers[user.email] = user;
                    localStorage.setItem(LS_ALL_USERS_KEY, JSON.stringify(storedUsers));

                    saveCurrentUser(user); 
                    updateHeaderUI(); 
                    showInfoModal('<i class="fas fa-check-circle text-success me-2"></i>Profile Updated', 'Your profile information has been saved successfully.', true);
                });
            }

             const backToMainFromProfile = document.getElementById('backToMainFromProfile');
             if(backToMainFromProfile) {
                backToMainFromProfile.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateToView(routes['home']);
                });
             }

            document.getElementById('navigateToSignUp')?.addEventListener('click', (e) => { e.preventDefault(); navigateToView(routes['sign-up']); });
            document.getElementById('navigateToSignIn')?.addEventListener('click', (e) => { e.preventDefault(); navigateToView(routes['sign-in']); });


            // --- AI Helper Form Logic (Existing Gemini Feature) ---
            const wasteForm = document.getElementById('waste-form');
            const loadingSpinner = document.getElementById('loading-spinner'); // Specific spinner for this form
            const getInsightsButton = document.getElementById('get-insights-button');
            const aiTrialMessageDiv = document.getElementById('ai-trial-message');

            function canUseAITrial() {
                const user = getCurrentUser();
                // Check if user has an active subscription that provides unlimited queries
                if (user && user.subscription && (user.subscription.planName === 'Eco Pro' || user.subscription.planName === 'Sustainable God' || user.subscription.planName === 'Green Business')) {
                    return true;
                }
                // Check for Starter Spark specific query limit
                if (user && user.subscription && user.subscription.planName === 'Starter Spark') {
                    // Assuming Starter Spark has a limit of 15 AI Queries per month
                    // This mock implementation won't reset monthly, but increments
                    const queriesUsed = user.subscription.queriesUsed || 0;
                    return queriesUsed < 15;
                }
                
                // If no subscription, check for initial free trial
                if (user) {
                    return !user.aiTrialUsed; 
                } else {
                    return localStorage.getItem(LS_ANON_TRIAL_KEY) !== 'true'; 
                }
            }

            function markAITrialUsed() {
                const user = getCurrentUser();
                if (user) {
                    if (user.subscription) {
                        // For Starter Spark, increment queriesUsed
                        if (user.subscription.planName === 'Starter Spark') {
                            user.subscription.queriesUsed = (user.subscription.queriesUsed || 0) + 1;
                        }
                        // For other plans, no specific query count, always allowed
                    } else {
                        // For non-subscribed users, mark trial as used
                        user.aiTrialUsed = true;
                    }
                    saveCurrentUser(user);
                    let storedUsers = JSON.parse(localStorage.getItem(LS_ALL_USERS_KEY)) || {};
                    if (storedUsers[user.email]) {
                        storedUsers[user.email] = user; // Update the user object in storedUsers
                        localStorage.setItem(LS_ALL_USERS_KEY, JSON.stringify(storedUsers));
                    }
                } else {
                    // For anonymous users, mark trial as used
                    localStorage.setItem(LS_ANON_TRIAL_KEY, 'true'); 
                }
            }

            function updateAIHelperUIAccess() {
                if (!getInsightsButton || !aiTrialMessageDiv) return;

                const user = getCurrentUser();
                const starterSparkQueriesRemaining = user && user.subscription && user.subscription.planName === 'Starter Spark' ? (15 - (user.subscription.queriesUsed || 0)) : -1;

                if (!canUseAITrial()) {
                    getInsightsButton.disabled = true;
                    getInsightsButton.classList.add('btn-custom-disabled'); 
                    let message = '';

                    if (user && user.subscription && user.subscription.planName === 'Starter Spark') {
                        message = `You've reached your Starter Spark plan limit of 15 AI Queries. Please <a href="#home" id="trialToPlansLink" class="alert-link">upgrade your plan</a> for more queries or unlimited access.`;
                    } else if (user) {
                        message = `You've used your free AI analysis. Please <a href="#home" id="trialToPlansLink" class="alert-link">upgrade your plan</a> for unlimited access.`;
                    } else {
                        message = `You've used your free AI analysis. Please <a href="#sign-up" id="trialToSignUpLink" class="alert-link">sign up</a> for more features or <a href="#home" id="trialToPlansLinkAnon" class="alert-link">subscribe to a plan</a>.`;
                    }
                    
                    aiTrialMessageDiv.innerHTML = message;
                    aiTrialMessageDiv.style.display = 'block';

                    document.getElementById('trialToPlansLink')?.addEventListener('click', (e) => {
                        e.preventDefault(); navigateToView(routes['home']);
                        const plansTabButton = document.getElementById('plans-tab-btn');
                        if (plansTabButton) bootstrap.Tab.getOrCreateInstance(plansTabButton).show();
                    });
                     document.getElementById('trialToPlansLinkAnon')?.addEventListener('click', (e) => {
                        e.preventDefault(); navigateToView(routes['home']);
                        const plansTabButton = document.getElementById('plans-tab-btn');
                        if (plansTabButton) bootstrap.Tab.getOrCreateInstance(plansTabButton).show();
                    });
                    document.getElementById('trialToSignUpLink')?.addEventListener('click', (e) => {
                        e.preventDefault(); navigateToView(routes['sign-up']);
                    });

                } else {
                    getInsightsButton.disabled = false;
                    getInsightsButton.classList.remove('btn-custom-disabled');
                    if (starterSparkQueriesRemaining > -1) {
                         aiTrialMessageDiv.innerHTML = `You have <strong>${starterSparkQueriesRemaining} AI Queries</strong> remaining this month with your Starter Spark plan.`;
                         aiTrialMessageDiv.style.display = 'block';
                    } else {
                        aiTrialMessageDiv.style.display = 'none';
                    }
                }
            }

            const aiHelperTabBtn = document.getElementById('ai-helper-tab-btn');
            if (aiHelperTabBtn) {
                aiHelperTabBtn.addEventListener('shown.bs.tab', updateAIHelperUIAccess);
            }
            if (window.location.hash === '#home' || window.location.hash === '') {
                 const activeTab = document.querySelector('#myTab .nav-link.active');
                 if (!activeTab || activeTab.id === 'ai-helper-tab-btn' || activeTab.id === 'about-tab-btn') { 
                    updateAIHelperUIAccess();
                 }
            }


            if (wasteForm && loadingSpinner && getInsightsButton) {
                wasteForm.addEventListener('submit', async function(event) {
                    event.preventDefault();

                    if (!canUseAITrial()) { 
                        updateAIHelperUIAccess();
                        return;
                    }

                    getInsightsButton.disabled = true; 
                    loadingSpinner.style.display = 'flex'; 

                    const wasteDescriptionInput = document.getElementById('waste-description');
                    const wasteImageInput = document.getElementById('waste-image');
                    const description = wasteDescriptionInput.value.trim();
                    const imageFile = wasteImageInput.files[0];

                    if (!description && !imageFile) { 
                        showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Input Required', 'Please provide a description or upload an image of your waste item.', true);
                        loadingSpinner.style.display = 'none';
                        updateAIHelperUIAccess(); 
                        return;
                    }

                    let base64ImageData = null;
                    let mimeType = null;

                    if (imageFile) { 
                        if (imageFile.size > 4 * 1024 * 1024) { 
                             showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Image Too Large', 'Please upload an image smaller than 4MB.', true);
                             loadingSpinner.style.display = 'none';
                             updateAIHelperUIAccess();
                             return;
                        }
                        try {
                            base64ImageData = await new Promise((resolve, reject) => {
                                const reader = new FileReader();
                                reader.onloadend = () => resolve(reader.result.split(',')[1]); 
                                reader.onerror = reject;
                                reader.readAsDataURL(imageFile);
                            });
                            mimeType = imageFile.type;
                        } catch (error) {
                            showInfoModal('<i class="fas fa-times-circle text-danger me-2"></i>Image Error', 'Could not process the image file. Please try a different image or use text description.', true);
                            loadingSpinner.style.display = 'none';
                            updateAIHelperUIAccess();
                            return;
                        }
                    }

                    let promptText = `You are RecycLearner AI, an expert in recycling and creative upcycling for ${mockLocation}.
A user has submitted a waste item. Please analyze the provided description and/or image.

Item Description: ${description || "No text description provided."}
Image Provided: ${imageFile ? 'Yes' : 'No'}

Provide a comprehensive guide for this item. If the item seems unclear or ambiguous, state that and give general advice or ask for clarification. Otherwise, include:
1.  **Material Identification:** Based on the description and/or image, what is this item likely made of? Be specific.
2.  **Recycling Instructions (${mockLocation} Focus):**
    * Is it commonly recyclable in ${mockLocation} municipal programs? (Yes/No/Sometimes - explain if sometimes, mention specific local facilities if known, e.g., "Dubai Municipality recycling centers accept this.")
    * How should it be prepared for recycling (e.g., rinse, flatten, remove labels/lids, separate parts)?
    * Where can it typically be recycled in ${mockLocation} (e.g., curbside bin with mixed recyclables, special drop-off location, specific company take-back programs)? Mention common recycling symbols if relevant (e.g., PETE #1, HDPE #2).
    * Any common contaminants or reasons it might be rejected in ${mockLocation}?
3.  **Upcycling Ideas  (Be Creative!):** Suggest 2-3 innovative and practical ideas to repurpose or upcycle this item. Provide brief, inspiring instructions or concepts for each idea. Aim for ideas that are accessible.
4.  **Special Considerations/Safety:** Are there any important safety precautions for handling or disposal if the item is hazardous, contains batteries, or is not recyclable? Mention any specific ${mockLocation} regulations for hazardous waste if applicable.
5.  **Eco-Impact & Tip:** Briefly mention the positive environmental impact of correctly handling this item and provide a general eco-friendly tip related to reducing this type of waste or sustainable consumption relevant to ${mockLocation} if possible.

Format your response clearly using Markdown. Use headings (e.g., "### Recycling Instructions"), bold text for emphasis, and bullet points for lists. Ensure the tone is encouraging, informative, and locally relevant to ${mockLocation} where appropriate. If local information is unavailable, provide general advice.`;

                    const chatHistory = [{ role: "user", parts: [] }];
                    chatHistory[0].parts.push({ text: promptText });

                    if (base64ImageData && mimeType) { 
                        chatHistory[0].parts.push({
                            inlineData: { mimeType: mimeType, data: base64ImageData }
                        });
                    }

                    const payload = { contents: chatHistory };
                    const apiKey = ""; 
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) { 
                            const errorData = await response.json();
                            throw new Error(`API request failed with status ${response.status}: ${errorData.error?.message || 'Unknown API error'}`);
                        }

                        const result = await response.json();

                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            let aiResponseText = result.candidates[0].content.parts[0].text;

                            aiResponseText = formatAIResponse(aiResponseText);
                            showInfoModal('<i class="fas fa-robot me-2"></i>AI Recycling & Upcycling Insights', aiResponseText, true);
                            markAITrialUsed(); 
                            let currentUser = getCurrentUser();
                            if (currentUser) {
                                currentUser.stats.itemsRecycled = (currentUser.stats.itemsRecycled || 0) + 1;
                                currentUser.stats.co2Saved = (currentUser.stats.co2Saved || 0) + Math.round(Math.random() * 2 + 0.5); 
                                saveCurrentUser(currentUser);
                                if (document.getElementById('profile-view').classList.contains('active')) {
                                    populateProfileForm(currentUser);
                                }
                            }

                        } else {
                            showInfoModal('<i class="fas fa-exclamation-circle text-warning me-2"></i>Analysis Incomplete', 'The AI analysis returned an unexpected result. Please try again or rephrase your query.', true);
                        }
                    } catch (error) { 
                        showInfoModal('<i class="fas fa-times-circle text-danger me-2"></i>Analysis Failed', `Sorry, we couldn't get insights for your item right now. <br>Please try again later. <br><small>Error: ${error.message}</small>`, true);
                    } finally { 
                        loadingSpinner.style.display = 'none';
                        wasteForm.reset(); 
                        if(imagePreview) imagePreview.style.display = 'none'; 
                        updateAIHelperUIAccess(); 
                    }
                });
            }

            const paymentForm = document.getElementById('payment-form');
            if (paymentForm) {
                paymentForm.addEventListener('submit', function(event) {
                    event.preventDefault();
                    if (!document.getElementById('termsCheck').checked) { 
                        showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Agreement Required', 'Please agree to the Terms and Conditions to proceed.', true);
                        return;
                    }
                    const planValueEl = document.getElementById('selected-plan-value');
                    const planName = planValueEl ? planValueEl.value.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()) : "Your Selected Plan";

                    let currentUser = getCurrentUser();
                    if (currentUser) {
                        currentUser.subscription = {
                            planName: planName,
                            status: 'Active (Trial)',
                            // Determine renewsOn based on plan type for mock purposes
                            renewsOn: (planName.includes('MONTH') || planName.includes('3 MONTHS')) ? 
                                      new Date(new Date().setMonth(new Date().getMonth() + (planName.includes('3 MONTHS') ? 3 : 1))).toLocaleDateString() : 
                                      new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toLocaleDateString(),
                            queriesUsed: 0 // Reset queries used for new subscription
                        };
                        saveCurrentUser(currentUser);
                        updateHeaderUI(); 
                    }


                    showInfoModal('<i class="fas fa-check-circle text-success me-2"></i>Subscription Activated!', `Thank you for subscribing to RecycLearner! Your 7-day free trial for the <strong class="text-capitalize">${planName}</strong> has started. Welcome aboard!`, true);
                    paymentForm.reset();
                    setTimeout(() => { 
                        navigateToView(routes['home']);
                    }, 2500);
                });
            }

            // --- Scroll Animations ---
            const scrollElements = document.querySelectorAll('.scroll-animate');
            const elementInView = (el, percentageScroll = 100) => {
                const elementTop = el.getBoundingClientRect().top;
                return (
                    elementTop <= (window.innerHeight || document.documentElement.clientHeight) * (percentageScroll / 100)
                );
            };
            const displayScrollElement = (element) => { element.classList.add('is-visible'); };
            const handleScrollAnimation = () => {
                scrollElements.forEach((el) => {
                    if (elementInView(el, 85)) { displayScrollElement(el); } 
                });
            }
            window.addEventListener('scroll', handleScrollAnimation);
            setTimeout(handleScrollAnimation, 100); 

            // --- Responsive Adjustments & Initial State ---
            function handleResize() {
                const currentHash = window.location.hash.substring(1) || 'home';
                const currentViewId = routes[currentHash] || routes['home'];
                const isAuthOrSpecialView = (currentViewId === routes['profile'] || currentViewId === routes['sign-in'] || currentViewId === routes['sign-up'] || currentViewId === routes['checkout']);

                if(mainNavWrapperContainer) { 
                    mainNavWrapperContainer.classList.toggle('hidden-for-auth', isAuthOrSpecialView);
                }
            }
            window.addEventListener('resize', handleResize); 

            // --- Dynamic Content Loading for New Sections ---
            loadRecyclingGuides();
            loadFaqs();

            // --- Final Initializations ---
            window.addEventListener('hashchange', handleHashChange); 
            updateHeaderUI(); 
            handleHashChange(); 
            handleResize(); 

        }); // End DOMContentLoaded

        // --- Helper function to format AI responses (Markdown to HTML) ---
        function formatAIResponse(text) {
            if (!text) return "";
            // Convert Markdown headings, bold, italics, and lists to basic HTML
            let html = text
                .replace(/^### (.*$)/gim, '<h5 class="ai-response-section">$1</h5>') 
                .replace(/^## (.*$)/gim, '<h4 class="ai-response-section">$1</h4>')   
                .replace(/^# (.*$)/gim, '<h3 class="ai-response-section">$1</h3>')     
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') 
                .replace(/\*(.*?)\*/g, '<em>$1</em>')       
                .replace(/^- (.*$)/gim, '<li>$1</li>')      
                .replace(/^\* (.*$)/gim, '<li>$1</li>')    
                .replace(/\n/g, '<br>');                    
            html = html.replace(/(<li>.*?<\/li>)+/gs, (match) => `<ul class="list-unstyled ps-3 my-2">${match}</ul>`);
            return html;
        }


        // --- EXISTING GEMINI API FEATURE: Recycling Guide Deeper Insights ---
        async function getRecyclingGuideAIInsights(guideTitle, guideDetails) {
            const globalSpinner = document.getElementById('global-loading-spinner');
            if(globalSpinner) globalSpinner.style.display = 'flex';

            const prompt = `You are RecycLearner AI, an expert assistant for sustainability in Dubai, UAE.
A user is currently viewing our guide titled "${guideTitle}".
The existing guide content is:
---
${guideDetails}
---
Please provide additional, concise, and actionable insights for recycling and handling items related to "${guideTitle}" specifically relevant to Dubai, UAE. Include:
1.  **Advanced Dubai Recycling Tips (1-2 points):** Specific local nuances, common mistakes to avoid in Dubai, or less-known local facilities/programs for this material.
2.  **Creative Upcycling Idea for Dubai (1 idea):** A practical and culturally relevant upcycling idea for items covered in this guide, suitable for someone in Dubai. Briefly describe it.
3.  **Quick Quiz Question (1 question):** A multiple-choice or true/false question related to recycling this material in Dubai, with the correct answer clearly indicated (e.g., "Answer: True" or "Answer: C").

Format your response clearly using Markdown with headings (e.g., "### Advanced Dubai Tips"). Keep the tone encouraging and helpful. If specific Dubai info is scarce for a very niche point, provide general best practices with a note to always check local Dubai Municipality resources.`;

            const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`API request failed with status ${response.status}: ${errorData.error?.message || 'Unknown API error'}`);
                }
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    let aiResponseText = result.candidates[0].content.parts[0].text;
                    // Append to existing modal content or show in a new section
                    const modalBodyEl = document.getElementById('infoModalBody');
                    if (modalBodyEl) {
                         modalBodyEl.innerHTML += `<hr class="my-4"><h4 class="text-primary-green mt-3"><i class="fas fa-lightbulb"></i>  AI-Powered Insights for Dubai:</h4>${formatAIResponse(aiResponseText)}`;
                    } else { // Fallback if modal body isn't the target
                        showInfoModal(`AI Insights for ${guideTitle}`, formatAIResponse(aiResponseText), true);
                    }
                } else {
                    showInfoModal('AI Insights Error', 'Could not retrieve additional insights at this time.', false);
                }
            } catch (error) {
                console.error("Error fetching AI Guide Insights:", error);
                showInfoModal('AI Insights Error', `Failed to get insights: ${error.message}`, false);
            } finally {
                if(globalSpinner) globalSpinner.style.display = 'none';
            }
        }


        // --- EXISTING GEMINI API FEATURE: Custom FAQ Question ---
        const askAICustomFAQBtn = document.getElementById('ask-ai-custom-faq-btn');
        if (askAICustomFAQBtn) {
            askAICustomFAQBtn.addEventListener('click', async () => {
                const userQuestion = prompt("What is your question about recycling, upcycling, or sustainability in Dubai?");
                if (userQuestion && userQuestion.trim() !== "") {
                    const globalSpinner = document.getElementById('global-loading-spinner');
                    if(globalSpinner) globalSpinner.style.display = 'flex';
                    
                    const prompt = `You are RecycLearner AI, a knowledgeable and friendly assistant for recycling, upcycling, and sustainability in Dubai, UAE.
A user has the following question: "${userQuestion}"

Please answer this question comprehensively and accurately.
- If the question is directly related to recycling/upcycling practices, provide information relevant to Dubai, UAE where possible. Mention Dubai Municipality or other local resources if applicable.
- If the question is more general about sustainability, provide a helpful and informative answer.
- If the question is off-topic or unanswerable, politely state that you can only assist with questions related to recycling, waste management, and sustainability.
- Keep the tone encouraging and educational.
- Format your response clearly using Markdown. Use paragraphs, bullet points, or bold text as appropriate for readability.`;

                    const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                    const payload = { contents: chatHistory };
                    const apiKey = ""; 
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
                        if (!response.ok) {
                            const errorData = await response.json();
                            throw new Error(`API request failed with status ${response.status}: ${errorData.error?.message || 'Unknown API error'}`);
                        }
                        const result = await response.json();
                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            let aiResponseText = result.candidates[0].content.parts[0].text;
                            showInfoModal(`AI Answer to: "${userQuestion}"`, formatAIResponse(aiResponseText), true);
                        } else {
                            showInfoModal('AI Answer Error', 'Could not get an answer at this time.', false);
                        }
                    } catch (error) {
                        console.error("Error fetching AI FAQ Answer:", error);
                        showInfoModal('AI Answer Error', `Failed to get answer: ${error.message}`, false);
                    } finally {
                         if(globalSpinner) globalSpinner.style.display = 'none';
                    }
                }
            });
        }


        // --- NEW GEMINI API FEATURE: Upcycling Project Generator ---
        const upcyclingForm = document.getElementById('upcycling-form');
        const upcycleMaterialInput = document.getElementById('upcycle-material-input');
        const generateUpcyclingIdeaButton = document.getElementById('generate-upcycling-idea-button');
        const upcyclingLoadingSpinner = document.getElementById('upcycling-loading-spinner');

        if (upcyclingForm) {
            upcyclingForm.addEventListener('submit', async (event) => {
                event.preventDefault();

                const material = upcycleMaterialInput.value.trim();
                if (!material) {
                    showInfoModal('<i class="fas fa-exclamation-triangle text-warning me-2"></i>Input Required', 'Please enter a material to generate an upcycling idea.', true);
                    return;
                }

                generateUpcyclingIdeaButton.disabled = true;
                upcyclingLoadingSpinner.style.display = 'flex';

                const prompt = `You are RecycLearner AI, a creative upcycling expert based in Dubai, UAE.
A user wants an upcycling idea for the following material: "${material}".

Please generate ONE innovative and practical upcycling project idea. Include:
1.  **Project Title:** A catchy and descriptive title for the upcycling project.
2.  **Materials Needed:** A list of the primary material (the user's input) and any other common household items or simple tools required.
3.  **Step-by-Step Instructions:** Clear, concise steps on how to create the project.
4.  **Difficulty Level:** (Easy, Medium, Hard)
5.  **Time Estimate:** (e.g., 30 minutes, 1-2 hours, half a day)
6.  **Eco-Friendly Tip:** A short tip related to upcycling or sustainable living.

Format your response clearly using Markdown. Use headings, bold text, and numbered lists for instructions. Ensure the idea is suitable for a general audience and practical.`;

                const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`API request failed with status ${response.status}: ${errorData.error?.message || 'Unknown API error'}`);
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        let aiResponseText = result.candidates[0].content.parts[0].text;
                        showInfoModal('<i class="fas fa-palette me-2"></i> Your Upcycling Idea!', formatAIResponse(aiResponseText), true);
                    } else {
                        showInfoModal('<i class="fas fa-exclamation-circle text-warning me-2"></i>Idea Generation Failed', 'The AI could not generate an upcycling idea. Please try a different material or refine your request.', true);
                    }
                } catch (error) {
                    console.error("Error fetching AI Upcycling Idea:", error);
                    showInfoModal('<i class="fas fa-times-circle text-danger me-2"></i>Idea Generation Failed', `Sorry, we couldn't generate an idea right now. <br>Please try again later. <br><small>Error: ${error.message}</small>`, true);
                } finally {
                    upcyclingLoadingSpinner.style.display = 'none';
                    generateUpcyclingIdeaButton.disabled = false;
                    upcycleMaterialInput.value = ''; 
                }
            });
        }


        // --- Mock Data and Dynamic Content Functions ---

        // --- 1. Recycling Guides Data & Loader ---
        const recyclingGuidesData = [
            { id: 'plastics', icon: 'fas fa-prescription-bottle', title: 'Plastics Guide', summary: 'Learn about different plastic types (PET, HDPE, etc.) and how to recycle them correctly in your area.', details: '<h3>Recycling Plastics: A Comprehensive Guide</h3><p>Plastic recycling can be confusing due to the variety of polymer types. It\'s crucial to <strong>always check your local municipal guidelines</strong> as acceptance varies greatly. For Dubai, refer to <a href=\\"https://www.dm.gov.ae\\" target=\\"_blank\\">Dubai Municipality</a> resources.</p><h4>Commonly Recyclable Plastics (Check Locally!):</h4><ul class="list-styled-guide"><li><strong>PETE or PET (Polyethylene Terephthalate - #1):</strong> Typically used for soda bottles, water bottles, and many food containers. Generally widely recycled. <strong>Preparation:</strong> Empty, rinse thoroughly, and replace cap (many facilities prefer caps on to prevent them from getting lost in machinery, but confirm locally).</li><li><strong>HDPE (High-Density Polyethylene - #2):</strong> Found in milk jugs, detergent bottles, shampoo bottles. Also commonly recycled. <strong>Preparation:</strong> Empty and rinse. Caps are often okay to leave on.</li><li><strong>PP (Polypropylene - #5):</strong> Used for yogurt cups, butter tubs, some bottle caps, and food containers. Acceptance is increasing, but verify with your local program. <strong>Preparation:</strong> Clean thoroughly.</li></ul><h4>Less Commonly Recycled / Often Problematic Plastics:</h4><ul class="list-styled-guide"><li><strong>PVC or V (Polyvinyl Chloride - #3):</strong> Used for pipes, window frames, some clear food packaging. Rarely recycled in curbside programs due to its chemical composition.</li><li><strong>LDPE (Low-Density Polyethylene - #4):</strong> Includes plastic bags, films, shrink wrap, and some flexible lids. Generally <strong>NOT</strong> recyclable in curbside bins. Look for designated store drop-off programs for clean and dry plastic films.</li><li><strong>PS (Polystyrene - #6):</strong> Foam cups/plates, disposable cutlery, some yogurt containers, CD cases. Very difficult to recycle and often not accepted due to its light weight and contamination issues.</li><li><strong>Other (#7):</strong> This is a catch-all category for various plastics like polycarbonate (PC), bioplastics (PLA), and mixed-material items. Recycling for #7 plastics is highly variable and often not available.</li></ul><p><strong>Key Preparation Tips for All Recyclables:</strong></p><ul class="list-styled-guide"><li><strong>Empty & Rinse:</strong> Remove all food residue. Liquids and food can contaminate other recyclables.</li><li><strong>Keep it Loose:</strong> Do <strong>not</strong> bag your recyclables in plastic bags unless specifically instructed by your local program. Workers often can\'t open bags for safety reasons, so bagged items may go to landfill.</li><li><strong>No Small Items:</strong> Items smaller than a credit card (like bottle caps if loose, straws, coffee pods) can fall through sorting machinery. Check local rules for caps (on or off).</li><li><strong>Avoid "Wishcycling":</strong> When in doubt, throw it out (in the general waste). Putting non-recyclable items in the recycling bin can contaminate the entire batch.</li></ul><p><strong>Environmental Impact:</strong> Recycling plastics conserves vital natural resources like petroleum, significantly saves energy compared to producing new plastic, reduces greenhouse gases emissions, and helps prevent plastic pollution from choking our landfills and oceans.</p>' },
            { id: 'paper', icon: 'fas fa-newspaper', title: 'Paper & Cardboard', summary: 'Understand how to recycle newspapers, magazines, office paper, cardboard boxes, and paperboard effectively.', details: '<h3>Recycling Paper & Cardboard: Best Practices</h3><p>Most paper and cardboard products are readily recyclable if they are kept clean and dry. Contamination with food, grease, or liquids can make them unrecyclable.</p><h4>Accepted Paper & Cardboard:</h4><ul class="list-styled-guide"><li><strong>Newspapers & Magazines:</strong> Widely accepted. Keep them dry. No need to remove staples.</li><li><strong>Office Paper & Junk Mail:</strong> Includes white and colored paper, envelopes (even those with plastic windows are usually fine).</li><li><strong>Cardboard Boxes (Corrugated):</strong> Essential to flatten all boxes to save space in collection trucks and at processing facilities. Remove excessive plastic tape if possible, though small amounts are usually okay.</li><li><strong>Paperboard (Cereal Boxes, Shoe Boxes, Food Boxes):</strong> Flatten these items. This includes items like cereal boxes, shoe boxes, and the card packaging for many food products (e.g., pasta boxes, cracker boxes).</li><li><strong>Phone Books & Paperback Books:</strong> Often accepted, but check local guidelines, especially for hardback books (covers might need removal).</li></ul><h4>NOT Typically Recyclable Paper Items:</h4><ul class="list-styled-guide"><li><strong>Greasy Pizza Boxes:</strong> Oil and grease contaminate paper fibers. Tear off and recycle clean sections if possible; compost or discard greasy parts.</li><li><strong>Paper Towels, Napkins, & Tissues:</strong> These are usually made with short fibers and may contain bodily fluids, making them unsuitable for recycling. Compost them if clean.</li><li><strong>Wax-Coated or Plastic-Coated Paper:</strong> Items like wax paper, some frozen food boxes, and coffee cups (often plastic-lined) are generally not recyclable with regular paper.</li><li><strong>Metallic or Glittery Wrapping Paper/Cards:</strong> These often contain non-paper materials that contaminate the recycling process.</li><li><strong>Photographs:</strong> Photographic paper has special coatings.</li><li><strong>Shredded Paper:</strong> While the paper itself is recyclable, small shreds can cause major problems at sorting facilities, getting stuck in machinery or contaminating other materials. Some municipalities accept shredded paper if it\'s contained in a clear plastic bag or a paper bag  CHECK LOCALLY.</li></ul><p><strong>Preparation is Key:</strong></p><ul class="list-styled-guide"><li><strong>Keep it Dry:</strong> Wet paper degrades and is harder to recycle.</li><li><strong>Keep it Clean:</strong> Avoid food, grease, and other contaminants.</li><li><strong>Flatten Boxes:</strong> This is crucial for efficient collection and processing.</li></ul>' },
            { id: 'glass', icon: 'fas fa-wine-bottle', title: 'Glass Recycling', summary: 'Guidelines for recycling glass bottles and jars. Learn about colors, preparation, and what not to include.', details: '<h3>Recycling Glass: Clear, Brown, and Green</h3><p>Glass is an excellent material for recycling as it can be recycled endlessly without any loss of quality or purity.</p><h4>What Glass is Usually Recyclable?</h4><ul class="list-styled-guide"><li><strong>Glass Bottles:</strong> Beverage bottles (soda, beer, wine, juice), food sauce bottles (ketchup, salad dressing).</li><li><strong>Glass Jars:</strong> Food jars (jam, pickles, baby food, sauces).</li></ul><h4>Color Separation:</h4><ul class="list-styled-guide"><li>Some recycling programs require you to separate glass by color (clear, brown, green), as different colored glass has different chemical compositions and melting points.</li><li>Other programs use advanced sorting technology and accept mixed-color glass. <strong>Always check your local Dubai Municipality guidelines.</strong></li></ul><h4>What Glass is Typically NOT Recyclable (in curbside bins)?</h4><ul class="list-styled-guide"><li><strong>Ceramics, China, Pottery:</strong> These have different melting points than container glass.</li><li><strong>Pyrex, Corningware, Ovenware:</strong> These are specially treated to withstand high temperatures and will contaminate a batch of regular glass.</li><li><strong>Drinking Glasses & Crystal:</strong> Often contain different additives or lead.</li><li><strong>Window Glass & Mirrors:</strong> Different composition and treatment.</li><li><strong>Light Bulbs:</strong> Incandescent and halogen bulbs are generally not recyclable. Fluorescent bulbs (CFLs) contain mercury and require special disposal. LED bulbs may have take-back programs.</li></ul><p><strong>Preparation for Recycling:</strong></p><ul class="list-styled-guide"><li><strong>Empty and Rinse:</strong> Remove all contents and give a quick rinse to remove residue. Labels can usually be left on.</li><li><strong>Lids:</strong> Metal lids from glass jars and bottles are often recyclable. Check locally if they should be removed and recycled separately or if they can be loosely placed back on. Plastic lids should usually be removed and checked for their own recyclability.</li><li><strong>Do Not Break:</strong> It\'s generally preferred to keep glass items whole, as broken glass can be a safety hazard for workers and can be harder to sort.</li></ul>' },
            { id: 'metals', icon: 'fas fa-', title: 'Metal Recycling Facts', summary: 'Recycling aluminum cans, steel/tin cans, aerosol cans, and other common metal items.', details: '<h3>Recycling Metals: Valuable Resources</h3><p>Metals are highly valuable and can be recycled repeatedly without losing their properties, saving significant energy and natural resources.</p><h4>Commonly Recyclable Metals:</h4><ul class="list-styled-guide"><li><strong>Aluminum Cans:</strong> Beverage cans (soda, beer, etc.). These are one ofthe most valuable recyclables.</li><li><strong>Steel & Tin Cans:</strong> Food cans (vegetables, soups, pet food).</li><li><strong>Empty Aerosol Cans:</strong> Must be completely empty of product and propellant. Remove plastic caps. Some areas may have specific instructions due to pressure concerns.</li><li><strong>Aluminum Foil & Trays:</strong> Must be clean (no food residue). Ball up clean foil into a size of at least 2 inches in diameter to help it get sorted correctly. Small, loose pieces of foil can get lost.</li></ul><h4>Preparation for Metal Recycling:</h4><ul class="list-styled-guide"><li><strong>Empty & Rinse:</strong> For food and beverage cans, empty all contents and give them a quick rinse.</li><li><strong>Lids from Cans:</strong> For steel/tin cans, it\'s often recommended to place the lid inside the empty can and then slightly crimp the top of thecan to keep the lid contained. Check local guidelines.</li><li><strong>Crushing Cans (Optional):</strong> Crushing aluminum cans can save space, but some facilities prefer them uncrushed for easier sorting. Check locally.</li></ul><h4>Metals NOT Typically for Curbside Bins:</h4><ul class="list-styled-guide"><li><strong>Paint Cans:</strong> Latex paint cans, if completely empty and dry, might be accepted by some programs (check locally). Oil-based paint cans are usually considered household hazardous waste.</li><li><strong>Electronics & Batteries:</strong> These contain metals but require special e-waste recycling (see E-Waste guide).</li><li><strong>Scrap Metal Pieces:</strong> Large or unusual scrap metal items (pots, pans, pipes, hangers) are usually not for curbside bins but can often be taken to scrap metal dealers or special drop-off locations.</li><li><strong>Hazardous Material Containers:</strong> Containers that held hazardous materials (pesticides, chemicals) should not be recycled unless specifically instructed.</li></ul>' },
            { id: 'ewaste', icon: 'fas fa-laptop', title: 'E-Waste Disposal', summary: 'Safe disposal and recycling options for electronics like computers, phones, TVs, and batteries.', details: '<h3>E-Waste: Responsible Electronic Disposal</h3><p>Electronic waste (e-waste) is a growing concern due to the valuable materials it contains and the hazardous substances that can pollute the environment if not disposed of correctly. <strong>E-waste should NEVER go into your regular trash or recycling bins.</strong></p><h4>What is E-Waste?</h4><ul class="list-styled-guide"><li>Computers (desktops, laptops, tablets)</li><li>Mobile Phones & Smartphones</li><li>Televisions & Monitors (CRT, LCD, LED)</li><li>Printers, Scanners, Fax Machines</li><li>Keyboards, Mice, Cables</li><li>Stereos, DVD Players, Game Consoles</li><li>Small household appliances (check locally, some are e-waste, some are scrap metal)</li><li>Batteries of all types (especially important to recycle separately)</li></ul><h4>Why Special Handling for E-Waste?</h4><ul class="list-styled-guide"><li><strong>Hazardous Materials:</strong> Contains lead, mercury, cadmium, beryllium, flame retardants, and other toxic substances that can pollute the environment if not disposed of correctly.</li><li><strong>Valuable Resources:</strong> Contains gold, silver, copper, palladium, and other precious metals that can be recovered and reused, reducing the need for virgin mining.</li></ul><h4>Recycling Options in Dubai & UAE:</h4><ul class="list-styled-guide"><li><strong>Dubai Municipality E-Waste Collection:</strong> Check the DM website for designated collection points or special collection drives.</li><li><strong>Retailer Take-Back Programs:</strong> Many electronics retailers and manufacturers offer take-back or recycling programs for old devices (e.g., Apple, Sharaf DG, Emax often have initiatives).</li><li><strong>Specialized E-Waste Recyclers:</strong> Several companies in the UAE specialize in e-waste collection and recycling (e.g., Enviroserve, Madenat Al Nokhba). Search for "e-waste recycling Dubai".</li><li><strong>Community Collection Events:</strong> Keep an eye out for e-waste collection events organized by community groups or environmental organizations.</li></ul><h4>Data Security:</h4><ul class="list-styled-guide"><li>Before recycling computers, phones, or other data-storing devices, ensure you <strong>wipe all personal data</strong>. Perform a factory reset and, for computers, consider physically destroying or professionally wiping the hard drive.</li><li>Remove SIM cards and memory cards from phones and cameras.</li></ul><h4>Battery Recycling:</h4><ul class="list-styled-guide"><li>Batteries (AA, AAA, button cells, lithium-ion, etc.) should be recycled separately. Many supermarkets and electronics stores in Dubai have battery collection bins. Lithium-ion batteries, in particular, can be a fire hazard if damaged or disposed of improperly.</li></ul>' },
            { id: 'organics', icon: 'fas fa-carrot', title: 'Organics & Composting', summary: 'Learn about composting food scraps and yard waste to reduce landfill volume and create nutrient-rich soil.', details: '<h3>Composting Organics: Turning Waste into Gold</h3><p>Composting is a natural process that recycles organic materials like food scraps and yard waste into a valuable soil amendment called compost. It diverts significant waste from landfills, reduces greenhouse gas emissions, and enriches soil.</p><h4>What Can You Compost? (The "Greens" and "Browns")</h4><ul class="list-styled-guide"><li><strong>"Greens" (Nitrogen-rich):</strong> These add moisture and activate the compost. Examples:<ul><li>Fruit and vegetable scraps (peels, cores, etc.)</li><li>Coffee grounds and paper filters</li><li>Tea bags (remove staples and synthetic tags)</li><li>Grass clippings (add in thin layers to avoid matting)</li><li>Plant trimmings (non-diseased)</li></ul></li><li><strong>"Browns" (Carbon-rich):</strong> These provide bulk and allow air to circulate. Examples:<ul><li>Dry leaves</li><li>Twigs and small branches (chopped)</li><li>Shredded newspaper (avoid glossy inks or colored paper in large amounts)</li><li>Plain cardboard (torn into small pieces, no glossy coatings or plastic tape)</li><li>Straw or hay</li><li>Wood chips or sawdust (from untreated wood)</li></ul></li></ul><h4>What NOT to Compost (Typically for Home Composting):</h4><ul class="list-styled-guide"><li><strong>Meat, Fish, and Bones:</strong> Can attract pests and create odors.</li><li><strong>Dairy Products & Eggs:</strong> Similar pest and odor issues.</li><li><strong>Oily or Greasy Foods:</strong> Can disrupt moisture balance and attract pests.</li><li><strong>Pet Waste (Dog & Cat Feces):</strong> May contain pathogens harmful to humans.</li><li><strong>Diseased Plants or Weeds with Seeds:</strong> Can spread diseases or weeds back into your garden.</li><li><strong>Chemically Treated Wood or Plants:</strong> Pesticides and herbicides can contaminate your compost.</li><li><strong>Coal or Charcoal Ash:</strong> Can contain harmful substances.</li><li><strong>Glossy Magazines or Coated Cardboard (in large amounts):</strong> May contain heavy metals or plastics.</li></ul><h4>Composting Methods:</h4><ul class="list-styled-guide"><li><strong>Backyard Composting:</strong> Using a compost bin (purchased or DIY) or an open pile. Requires a balance of greens and browns, moisture, and occasional turning for aeration.</li><li><strong>Worm Composting (Vermicomposting):</strong> Uses earthworms (typically red wigglers) in a bin to break down food scraps. Excellent for small spaces and produces nutrient-rich worm castings.</li><li><strong>Municipal Green Bin Programs:</strong> Some cities, including potentially parts of Dubai (check current DM initiatives), offer curbside collection of organic waste for large-scale composting.</li></ul><p><strong>Benefits of Composting:</strong> Enriches soil, helps retain moisture, reduces need for chemical fertilizers, and reduces landfill waste.</p>' },
        ];

        function loadRecyclingGuides() {
            const container = document.getElementById('guide-category-grid-container');
            if (!container) return;
            container.innerHTML = recyclingGuidesData.map(guide => `
                <div class="guide-card scroll-animate">
                    <div class="guide-card-icon"><i class="${guide.icon}"></i></div>
                    <h4>${guide.title}</h4>
                    <p>${guide.summary}</p>
                    <button class="btn btn-sm btn-custom btn-learn-more" 
                            onclick="showInfoModal('Recycling Guide: ${guide.title.replace(/'/g, '&apos;')}', 
                                                 '${guide.details.replace(/'/g, '&apos;').replace(/"/g, '&quot;')}', 
                                                 true, true, '${guide.title.replace(/'/g, "&apos;")}', '${guide.details.replace(/'/g, "&apos;").replace(/"/g, "&quot;").replace(/\n/g, '\\n')}' )">
                        <i class="fas fa-book-reader me-2"></i>Learn More
                    </button>
                    <button class="btn btn-sm btn-ai-feature mt-2" 
                            onclick="getRecyclingGuideAIInsights('${guide.title.replace(/'/g, '&apos;')}', 
                                                              '${guide.details.replace(/'/g, '&apos;').replace(/"/g, '&quot;').replace(/\n/g, '\\n')}')">
                        <i class="fas fa-robot me-2"></i>Ask AI for Dubai Insights
                    </button>
                </div>
            `).join('');
        }
        
        // --- FAQ Data & Loader ---
        const faqData = [
            { category: 'General Information', q: 'What is RecycLearner?', a: 'RecycLearner is an AI-powered platform designed to help you understand how to recycle and upcycle various waste items correctly. We provide clear guidance using descriptions or images you provide, with a focus on local guidelines where possible.' },
            { category: 'General Information', q: 'Is RecycLearner free to use?', a: 'Every new user gets one complimentary AI analysis to try out our core feature. After that, you can choose from our affordable subscription plans for continued access to unlimited AI insights and other premium features. Our general recycling guides and FAQs are always free to access.' },
            { category: 'AI Helper Feature', q: 'How accurate is the AI analysis for recycling?', a: 'Our AI is trained on a vast dataset and is constantly learning. While it strives for high accuracy for common items, complex or unusual items might sometimes require more detailed descriptions from your end. We always strongly recommend cross-referencing the AI\'s advice with your local municipality\'s official recycling guidelines, as rules can vary significantly by region (e.g., Dubai Municipality guidelines for local residents).' },
            { category: 'AI Helper Feature', q: 'What kind of images work best for the AI Helper?', a: 'Clear, well-lit photos of a single item against a relatively plain background work best. Ensure the item is the main focus and easily identifiable. Avoid blurry images or photos with multiple, cluttered items.' },
            { category: 'Recycling Basics', q: 'What does "wishcycling" mean and why is it bad?', a: 'Wishcycling is the practice of putting items in the recycling bin hoping they can be recycled, even if they are not accepted by the local program. This is harmful because non-recyclable items can contaminate entire batches of actual recyclables, potentially causing the whole load to be sent to landfill. It also damages recycling machinery. When in doubt, it\'s better to check official local guidelines or dispose of the item in the general waste.' },
            { category: 'Recycling Basics', q: 'Do I always need to clean items before recycling?', a: 'Yes, generally. Food containers (plastics, glass, metal) should be emptied and given a quick rinse to remove most food residue. This prevents contamination of other materials (like paper) and reduces pests and odors at recycling facilities. Items don\'t need to be spotlessly clean, but free of significant food waste.' },
            { category: 'Upcycling & Reuse', q: 'What is upcycling and how is it different from recycling?', a: 'Upcycling is the creative reuse of waste materials or unwanted products to create new items of higher quality or value than the original. For example, turning old jeans into a bag. Recycling, on the other hand, involves breaking down waste materials to make new raw materials, which are then used to manufacture new products (e.g., melting down plastic bottles to make new plastic pellets).' },
            { category: 'Subscription & Account', q: 'How do I cancel my RecycLearner subscription?', a: 'You can manage your subscription, including cancellations, from your Profile page once you are logged in. Look for the "Manage Subscription" section. (Please note: For this demonstration version, subscription management is a mock feature).' },
            { category: 'Subscription & Account', q: 'What happens after my 7-day free trial ends?', a: 'After your 7-day free trial for a paid plan concludes, your chosen subscription plan will automatically begin, and your payment method on file will be billed according to the plan\'s terms (e.g., annually). You can cancel your trial at any time before it ends to avoid being charged.' },
            { category: 'Local Recycling (Dubai)', q: 'Where can I find specific recycling information for Dubai?', a: 'For official and up-to-date recycling information specific to Dubai, please refer to the Dubai Municipality website (dm.gov.ae) or contact their customer service. They provide guidelines on what materials are accepted in curbside bins, locations of recycling centers, and special waste disposal programs.' },
        ];

        function loadFaqs(filteredFaqs = faqData) {
            const accordionContainer = document.getElementById('faqAccordionContainer');
            if (!accordionContainer) return;

            const faqsByCategory = filteredFaqs.reduce((acc, faq) => {
                if (!acc[faq.category]) {
                    acc[faq.category] = [];
                }
                acc[faq.category].push(faq);
                return acc;
            }, {});

            let html = '';
            for (const category in faqsByCategory) {
                html += `<h4 class="faq-category-title scroll-animate">${category}</h4>`;
                faqsByCategory[category].forEach((faq, index) => {
                    const uniqueId = `faq-${category.replace(/\s+/g, '-').toLowerCase()}-${index}`;
                    html += `
                        <div class="accordion-item scroll-animate">
                            <h2 class="accordion-header" id="heading-${uniqueId}">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-${uniqueId}" aria-expanded="false" aria-controls="collapse-${uniqueId}">
                                    ${faq.q}
                                </button>
                            </h2>
                            <div id="collapse-${uniqueId}" class="accordion-collapse collapse" aria-labelledby="heading-${uniqueId}" data-bs-parent="#faqAccordionContainer">
                                <div class="accordion-body">
                                    ${faq.a}
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            accordionContainer.innerHTML = html;
        }

        document.getElementById('faqSearchInput')?.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filtered = faqData.filter(faq =>
                faq.q.toLowerCase().includes(searchTerm) ||
                faq.a.toLowerCase().includes(searchTerm) ||
                faq.category.toLowerCase().includes(searchTerm)
            );
            loadFaqs(filtered);
        });
    </script>
</body>
</html>
